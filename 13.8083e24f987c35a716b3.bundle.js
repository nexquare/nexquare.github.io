(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1408:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DropdownOptionsService}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_api_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(217);let DropdownOptionsService=class DropdownOptionsService{constructor(apiService){this.apiService=apiService,this.general_sub_url="controller/api",this.misc_sub_url="controller/misc",this.course_components_sub_url="controller/api/courses/components",this.course_batch_components_sub_url="controller/api/batch-components",this.tenant_type_sub_url="controller/api/tenant-type",this.tenant_sub_url="controller/api/tenant",this.config_sub_url="controller/api/config"}currencies(){return this.apiService.get(this.general_sub_url+"/currencies")}courseDeliveryMethods(){return this.apiService.get(this.course_components_sub_url+"/delivery-methods")}courseTypes(){return this.apiService.get(this.course_components_sub_url+"/course-types")}courseSkills(){return this.apiService.get(this.course_components_sub_url+"/skills")}courseLearningLevels(){return this.apiService.get(this.course_components_sub_url+"/learning-levels")}courseInstructorTypes(){return this.apiService.get(this.course_components_sub_url+"/instructor-types")}courseSubjects(){return this.apiService.get(this.course_components_sub_url+"/subjects")}courseInstructionLanguage(){return this.apiService.get(this.course_components_sub_url+"/instruction-language")}courseEnrollmentMethods(){return this.apiService.get(this.course_components_sub_url+"/enrollment-methods")}coursePaymentMethods(){return this.apiService.get(this.course_components_sub_url+"/payment-methods")}courseCompetencies(){return this.apiService.get(this.course_components_sub_url+"/competencies")}courseChannelRequirements(){return this.apiService.get(this.course_components_sub_url+"/channel-requirements")}courseAccessLifetime(){return this.apiService.get(this.course_components_sub_url+"/access-lifetime")}courseSubscriptionTypes(){return this.apiService.get(this.course_components_sub_url+"/subscription-types")}courseAccessTypes(){return this.apiService.get(this.course_components_sub_url+"/access-types")}courseGradeBookDisplaySettings(){return this.apiService.get(this.course_components_sub_url+"/grade-book-display-settings")}courseStatus(){return this.apiService.get(this.course_components_sub_url+"/course-status")}batchStatus(){return this.apiService.get(this.course_batch_components_sub_url+"/batch-status")}batchUserStatus(){return this.apiService.get(this.course_batch_components_sub_url+"/batch-user-status")}tenantTypeRoleTypes(tenantTypeId){return this.apiService.get(`${this.tenant_type_sub_url}/${tenantTypeId}/role-type`)}tenantTypeRolePrivileges(tenantTypeId,typeId){return this.apiService.get(`${this.tenant_type_sub_url}/${tenantTypeId}/privileges/type/${typeId}`)}tenantTypes(){return this.apiService.get(""+this.tenant_type_sub_url)}tenantLanguages(){return this.apiService.get(this.tenant_sub_url+"/languages")}tenantRoleTypes(tenantId){return this.apiService.get(`${this.tenant_sub_url}/${tenantId}/role-type`)}tenantRolePrivileges(tenantId,typeId){return this.apiService.get(`${this.tenant_sub_url}/${tenantId}/privileges/type/${typeId}`)}tenantRoleTemplates(tenantId){return this.apiService.get(`${this.config_sub_url}/${tenantId}/role-template`)}countriesList(){return this.apiService.get(this.misc_sub_url+"/countries")}industriesList(){return this.apiService.get(this.misc_sub_url+"/industries")}organizationRoles(){return this.apiService.get(this.misc_sub_url+"/organization-roles")}};DropdownOptionsService=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)({providedIn:"root"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.f)("design:paramtypes",["function"==typeof(_a=void 0!==_api_service__WEBPACK_IMPORTED_MODULE_2__.a&&_api_service__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object])],DropdownOptionsService)},1425:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PendingChangesGuard}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_shared_pipes_translate_pipe__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(215);let PendingChangesGuard=class PendingChangesGuard{constructor(translatePipe){this.translatePipe=translatePipe}canDeactivate(component){return!!component.canDeactivate()||confirm(this.translatePipe.transform("CHANGE_CONFIRM_MSG"))}};PendingChangesGuard=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.f)("design:paramtypes",["function"==typeof(_a=void 0!==_shared_pipes_translate_pipe__WEBPACK_IMPORTED_MODULE_2__.a&&_shared_pipes_translate_pipe__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object])],PendingChangesGuard)},1427:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RoleUtils}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(509);class RoleUtils{static generateAssignedPrivileges(privileges,selected){const tree=[];return privileges.forEach(privilege=>{if(selected.includes(privilege.privilegeId))tree.push(privilege);else if(privilege.children&&privilege.children.length){const children=this.generateAssignedPrivileges(privilege.children,selected);children.length&&(privilege=Object.assign(Object.assign({},privilege),{children:children}),tree.push(privilege))}}),tree}static generateUnAssignedPrivileges(privileges,selected){const tree=[];return privileges.forEach(privilege=>{if(!selected.includes(privilege.privilegeId))if(privilege.children&&privilege.children.length){const children=this.generateUnAssignedPrivileges(privilege.children,selected);children.length&&tree.push(Object.assign(Object.assign({},privilege),{children:children}))}else tree.push(privilege)}),tree}static getLeafNodes(privileges){const _map={},_recurGet=(privilege,map)=>{let _leafNodes;return _leafNodes=privilege.children?lodash__WEBPACK_IMPORTED_MODULE_0__.uniq(lodash__WEBPACK_IMPORTED_MODULE_0__.flatten(privilege.children.map(p=>_recurGet(p,map)))):[privilege.privilegeId],map[privilege.privilegeId]=_leafNodes,_leafNodes};for(const privilege of privileges)_recurGet(privilege,_map);return _map}static getAllLeafNodes(privileges){let leafPrivileges=[];return privileges.forEach(privilege=>{if(privilege.children&&privilege.children.length){const leafNodes=this.getAllLeafNodes(privilege.children);leafPrivileges=[...leafPrivileges,...leafNodes]}else leafPrivileges=[...leafPrivileges,privilege.privilegeId]}),leafPrivileges}static transformPrivilege(privileges){return privileges.map(p=>{const updatedPrivilege={title:p.name,key:p.privilegeId};let children=null;return p.children?(children=this.transformPrivilege(p.children),updatedPrivilege.children=children):updatedPrivilege.isLeaf=!0,updatedPrivilege})}}},1532:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="master-management">\n  <nxq-breadcrumbs [breadcrumbs]="breadcrumbs"></nxq-breadcrumbs>\n  <div class="header">\n    <nxq-header [title]="pageHeader" [headerType]="pageHeaderType"></nxq-header>\n  </div>\n  <div class="body">\n    <div class="body-sidenav">\n      <nxq-sub-menu [dataTree]="subMenu" [level]="this.level" (selectElement)="subMenuSelectedItem($event)"></nxq-sub-menu>\n    </div>\n    <div class="body-content">\n      <router-outlet></router-outlet>\n    </div>\n  </div>\n</div>\n'},1533:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.master-management {\n  padding-top: 20px;\n  height: 100%;\n  width: 100%;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.master-management .header {\n  width: 100%;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  align-content: center;\n}\n:host-context(.xs) .master-management .header, .xs .master-management .header, :host-context(.sm) .master-management .header, .sm .master-management .header {\n  display: flex;\n  flex-direction: column;\n}\n:host-context(.xs) .master-management .header, .xs .master-management .header, :host-context(.sm) .master-management .header, .sm .master-management .header {\n  justify-content: space-between;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.master-management .body {\n  margin-top: 20px;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.master-management .body-sidenav {\n  display: flex;\n  flex-direction: row;\n  flex-basis: auto;\n  flex-grow: 0;\n  flex-shrink: 0;\n  width: 270px;\n  height: 100%;\n  border-right: 1px solid #d9d9d9;\n}\n.master-management .body-sidenav nxq-sub-menu {\n  width: 100%;\n}\n.master-management .body-content {\n  width: 100%;\n  height: 100%;\n}"},1534:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="header-buttons">\n  <nxq-button [type]="buttonType.PRIMARY" (click)="back()">{{ \'BACK\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.SECONDARY" (click)="next()">{{ \'NEXT\' | translate }}</nxq-button>\n</div>\n\n<div class="tenant-types" *ngIf="!isLoading">\n  <nxq-table\n    [tableHeaders]="headers"\n    [tableData]="data"\n    [showPagination]="showPagination"\n    [enableSelect]="enableSelect"\n    (actionClicked)="actionClicked($event)"\n    (customAction)="customAction($event)"\n    (filtersChanged)="filters($event)"\n    (rowsSelected)="rowsSelected($event)"\n  >\n  </nxq-table>\n\n  <div>\n    <nxq-button *ngIf="editAllowed" [type]="buttonType.PRIMARY" (click)="onAdd()">{{ \'ADD_NEW\' | translate }}</nxq-button>\n  </div>\n\n  <nz-drawer\n    [nzBodyStyle]="{ height: \'calc(100% - 55px)\', overflow: \'auto\', \'padding-bottom\': \'70px\' }"\n    [nzClosable]="false"\n    [nzMaskClosable]="true"\n    [nzWidth]="470"\n    [nzVisible]="showAdd"\n    [nzTitle]="\'\'"\n    (nzOnClose)="onClose()"\n  >\n    <div class="side-drawer" *ngIf="!!editAllowed && !!showAdd">\n      <nxq-tenant-type-add\n        [action]="action"\n        [tenantType]="selectedTenantType"\n        (closeDrawer)="onClose()"\n        (formIsDirty)="formDirtyStateChanged($event)"\n      ></nxq-tenant-type-add>\n    </div>\n  </nz-drawer>\n\n  <nz-modal\n    [(nzVisible)]="showModal"\n    [nzContent]="modalContent"\n    [nzFooter]="modalFooter"\n    (nzOnCancel)="onCancelPopup()"\n    nzWidth="400px"\n    nzHeight="300px"\n    class="confirm-popup"\n    nzClassName="confirm-modal"\n  >\n    <ng-template #modalContent>\n      You have unsaved data in the form, Are you sure you want to discard the changes?\n    </ng-template>\n\n    <ng-template #modalFooter>\n      <nxq-button type="primary" (click)="onCancelPopup()">Cancel</nxq-button>\n      <nxq-button type="secondary" (click)="onConfirmPopup()">Confirm</nxq-button>\n    </ng-template>\n  </nz-modal>\n</div>\n\n<div class="nxq-spinner-cp" *ngIf="isLoading">\n  <nxq-loading></nxq-loading>\n</div>\n'},1535:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.header-buttons {\n  margin: -55px 0 40px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.header-buttons > * {\n  margin-right: 10px;\n}\n.header-buttons > *:last-child {\n  margin-right: 0;\n}\n.tenant-types {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n}\n.tenant-types > * {\n  margin-bottom: 20px;\n}\n.tenant-types > *:last-child {\n  margin-bottom: 0;\n}\n.tenant-types nxq-table {\n  height: 60vh;\n  overflow: scroll;\n}"},1536:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="header-buttons" *ngIf="editAllowed">\n  <nxq-button [type]="buttonType.PRIMARY" (click)="reset()">{{ \'RESET\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.PRIMARY" (click)="update(\'back\')">{{ \'UPDATE_AND_BACK\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.SECONDARY" (click)="update(\'next\')">{{ \'UPDATE_AND_NEXT\' | translate }}</nxq-button>\n</div>\n\n<div class="modules-plug-ins">\n  <div class="modules-plug-ins-select">\n    <p>{{ \'CHOOSE_TENANT_TYPE\' | translate }}</p>\n    <nxq-select\n      [placeholder]="\'CHOOSE\' | translate"\n      [control]="selectTenantType"\n      [options]="tenantTypeOptions"\n      (searchQueryChange)="searchQueryChanged($event)"\n    ></nxq-select>\n  </div>\n  <div>\n    <nxq-collapse *ngIf="!!modules.length" [background]="false" [active]="true">\n      <div slot="header">\n        <h3>{{ \'MODULES\' | translate }}</h3>\n      </div>\n      <div slot="content">\n        <table class="modules-plug-ins-content">\n          <tr *ngFor="let module of modules">\n            <td class="label">\n              <p>{{ module.masterId | masterPluginName: masterPlugins }}</p>\n            </td>\n            <td>\n              <nxq-switch\n                [control]="modulesForm.controls[module.masterId]"\n                [offLabel]="\'INACTIVE\' | translate"\n                [onLabel]="\'ACTIVE\' | translate"\n              >\n              </nxq-switch>\n            </td>\n          </tr>\n        </table>\n      </div>\n    </nxq-collapse>\n    <nxq-collapse *ngIf="!!plugins.length" [background]="false">\n      <div slot="header">\n        <h3>{{ \'PLUG_INS\' | translate }}</h3>\n      </div>\n      <div slot="content">\n        <table class="modules-plug-ins-content">\n          <tr *ngFor="let module of plugins">\n            <td class="label">\n              <p>{{ module.masterId | masterPluginName: masterPlugins }}</p>\n            </td>\n            <td>\n              <nxq-switch\n                [control]="pluginsForm.controls[module.masterId]"\n                [offLabel]="\'INACTIVE\' | translate"\n                [onLabel]="\'ACTIVE\' | translate"\n              >\n              </nxq-switch>\n            </td>\n          </tr>\n        </table>\n      </div>\n    </nxq-collapse>\n  </div>\n</div>\n'},1537:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.header-buttons {\n  margin: -55px 0 40px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.header-buttons > * {\n  margin-right: 10px;\n}\n.header-buttons > *:last-child {\n  margin-right: 0;\n}\n.modules-plug-ins {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 100%;\n}\n.modules-plug-ins-select {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  max-width: 300px;\n}\n.modules-plug-ins-select > * {\n  margin-bottom: 10px;\n}\n.modules-plug-ins-select > *:last-child {\n  margin-bottom: 0;\n}\n.modules-plug-ins-content td {\n  padding: 10px;\n}\n.modules-plug-ins-content .label {\n  width: 324px;\n}"},1538:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="header-buttons" *ngIf="editAllowed">\n  <nxq-button [type]="buttonType.PRIMARY" (click)="reset()">{{ \'RESET\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.PRIMARY" (click)="update(\'back\')">{{ \'UPDATE_AND_BACK\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.SECONDARY" (click)="update(\'next\')">{{ \'UPDATE_AND_NEXT\' | translate }}</nxq-button>\n</div>\n\n<div class="integrations">\n  <div class="integrations-select">\n    <p>{{ \'CHOOSE_TENANT_TYPE\' | translate }}</p>\n    <nxq-select\n      [placeholder]="\'CHOOSE\' | translate"\n      [control]="selectTenantType"\n      [options]="tenantTypeOptions"\n      (searchQueryChange)="searchQueryChanged($event)"\n    >\n    </nxq-select>\n  </div>\n  <div>\n    <form [formGroup]="integrationsForm" *ngIf="!!selectTenantType.value">\n      <ng-container *ngFor="let integration of masterIntegrations | keyvalue">\n        <nxq-collapse [background]="false" [active]="true">\n          <div slot="header">\n            <h3>{{ integration.key | titlecase }}</h3>\n          </div>\n          <div slot="content">\n            <div class="integrations-content">\n              <p>{{ \'SELECT\' | translate }} {{ integration.key | titlecase }} {{ \'PROVIDER\' | translate }}</p>\n              <div class="integrations-content-container">\n                <div\n                  class="integrations-content-logo"\n                  *ngFor="let option of integration.value"\n                  [ngClass]="{ selected: integrationsForm.controls[integration.key]?.value.includes(option.id) }"\n                  (click)="integrationSelected(integration.key, option.id)"\n                >\n                  <img [src]="option.logoUrl" alt="" />\n                  <span>{{ option.name | uppercase }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </nxq-collapse>\n      </ng-container>\n    </form>\n  </div>\n</div>\n'},1539:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.header-buttons {\n  margin: -55px 0 40px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.header-buttons > * {\n  margin-right: 10px;\n}\n.header-buttons > *:last-child {\n  margin-right: 0;\n}\n.integrations {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 100%;\n}\n.integrations-select {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  max-width: 300px;\n}\n.integrations-select > * {\n  margin-bottom: 10px;\n}\n.integrations-select > *:last-child {\n  margin-bottom: 0;\n}\n.integrations-content {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n  padding-bottom: 20px;\n}\n.integrations-content > * {\n  margin-bottom: 20px;\n}\n.integrations-content > *:last-child {\n  margin-bottom: 0;\n}\n.integrations-content-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.integrations-content-container > * {\n  margin-right: 60px;\n}\n.integrations-content-container > *:last-child {\n  margin-right: 0;\n}\n.integrations-content-container .rtl {\n  display: flex;\n  flex-direction: row;\n}\n.integrations-content-container .rtl > * {\n  margin-left: 60px;\n  margin-right: 0;\n}\n.integrations-content-container .rtl > *:last-child {\n  margin-left: 0;\n}\n.integrations-content-logo {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  align-content: center;\n  padding: 0 10px 10px 10px;\n  cursor: pointer;\n}\n.integrations-content-logo > * {\n  margin-right: 10px;\n}\n.integrations-content-logo > *:last-child {\n  margin-right: 0;\n}\n.integrations-content-logo > img {\n  height: 30px;\n  width: 60px;\n  -o-object-fit: contain;\n     object-fit: contain;\n}\n.integrations-content-logo > span {\n  font-size: 14px;\n  font-weight: 600;\n}\n.integrations-content-logo.selected {\n  border-bottom: 2px solid #2373ff;\n  color: #2373ff;\n}"},1540:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="header-buttons" *ngIf="editAllowed">\n  <nxq-button [type]="buttonType.PRIMARY" (click)="reset()">{{ \'RESET\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.PRIMARY" (click)="update(\'back\')">{{ \'UPDATE_AND_BACK\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.SECONDARY" (click)="update(\'next\')">{{ \'UPDATE_AND_NEXT\' | translate }}</nxq-button>\n</div>\n\n<div class="user-rights">\n  <div class="user-rights-select">\n    <p>{{ \'CHOOSE_TENANT_TYPE\' | translate }}</p>\n    <nxq-select\n      [placeholder]="\'CHOOSE\' | translate"\n      [control]="selectTenantType"\n      [options]="tenantTypeOptions"\n      (searchQueryChange)="searchQueryChanged($event)"\n    >\n    </nxq-select>\n  </div>\n\n  <div *ngIf="!!privileges && !!privilegeRoles && !!selectTenantType.value" class="privileges">\n    <ng-container *ngFor="let privilege of privileges">\n      <nxq-privilege\n        [privilege]="privilege"\n        [privilegeRoles]="privilegeRoles"\n        (privilegeToUpdate)="updatePrivilegeList($event)"\n      ></nxq-privilege>\n    </ng-container>\n  </div>\n</div>\n'},1541:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.header-buttons {\n  margin: -55px 0 40px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.header-buttons > * {\n  margin-right: 10px;\n}\n.header-buttons > *:last-child {\n  margin-right: 0;\n}\n.user-rights {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 5px 20px 5px;\n  width: 100%;\n}\n.user-rights-select {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  max-width: 300px;\n}\n.user-rights-select > * {\n  margin-bottom: 10px;\n}\n.user-rights-select > *:last-child {\n  margin-bottom: 0;\n}\n.user-rights-content {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  align-content: center;\n  padding-bottom: 20px;\n}\n.user-rights-content > * {\n  margin-right: 60px;\n}\n.user-rights-content > *:last-child {\n  margin-right: 0;\n}\n.user-rights-content .rtl {\n  display: flex;\n  flex-direction: row;\n}\n.user-rights-content .rtl > * {\n  margin-left: 60px;\n  margin-right: 0;\n}\n.user-rights-content .rtl > *:last-child {\n  margin-left: 0;\n}\n.user-rights-content > p {\n  width: 5rem;\n}\n.user-rights .privileges {\n  max-width: 850px;\n  overflow-x: scroll;\n}"},1542:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="header-buttons" *ngIf="editAllowed">\n  \x3c!--  <nxq-button [type]="buttonType.PRIMARY" (click)="reset()">{{ \'RESET\' | translate }}</nxq-button>--\x3e\n  <nxq-button [type]="buttonType.PRIMARY" (click)="back()">{{ \'BACK\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.SECONDARY" (click)="next()">{{ \'NEXT\' | translate }}</nxq-button>\n</div>\n\n<div class="role-templates">\n  <div class="role-templates-select">\n    <p>{{ \'CHOOSE_TENANT_TYPE\' | translate }}</p>\n    <nxq-select\n      [placeholder]="\'CHOOSE\' | translate"\n      [control]="selectTenantType"\n      [options]="tenantTypeOptions"\n      (searchQueryChange)="searchQueryChanged($event)"\n    >\n    </nxq-select>\n  </div>\n  <div>\n    <nxq-collapse [background]="false" [active]="true">\n      <div slot="header">\n        <h3>{{ \'EXISTING_ROLE_TEMPLATES\' | translate }}</h3>\n      </div>\n      <div slot="content" class="role-templates-content">\n        <nxq-table\n          [tableHeaders]="headers"\n          [tableData]="data"\n          [showPagination]="showPagination"\n          (actionClicked)="actionClicked($event)"\n          (customAction)="customAction($event)"\n          (filtersChanged)="filters($event)"\n          *ngIf="!!this.selectTenantType.value && !isLoading"\n        >\n        </nxq-table>\n        <nxq-button type="primary" (click)="add()" *ngIf="!!this.selectTenantType.value && !isLoading && editAllowed">{{\n          \'ADD_NEW_ROLE\' | translate\n        }}</nxq-button>\n\n        <nz-drawer\n          [nzBodyStyle]="{ height: \'calc(100% - 55px)\', overflow: \'auto\', \'padding-bottom\': \'70px\' }"\n          [nzClosable]="false"\n          [nzMaskClosable]="true"\n          [nzWidth]="470"\n          [nzVisible]="showAdd"\n          [nzTitle]="\'\'"\n          (nzOnClose)="onClose()"\n        >\n          <div class="side-drawer" *ngIf="!!showAdd && !!editAllowed">\n            <nxq-add-new-role\n              [tenantTypeId]="+selectTenantType.value"\n              [role]="selectedRole"\n              (closeDrawer)="onClose()"\n              (formIsDirty)="formDirtyStateChanged($event)"\n            ></nxq-add-new-role>\n          </div>\n        </nz-drawer>\n        <div class="nxq-spinner-cp" *ngIf="isLoading">\n          <nxq-loading></nxq-loading>\n        </div>\n      </div>\n    </nxq-collapse>\n  </div>\n</div>\n\n<nz-modal\n  [(nzVisible)]="showModal"\n  [nzContent]="modalContent"\n  [nzFooter]="modalFooter"\n  (nzOnCancel)="onCancelPopup()"\n  nzWidth="400px"\n  nzHeight="300px"\n  class="confirm-popup"\n  nzClassName="confirm-modal"\n>\n  <ng-template #modalContent>\n    You have unsaved data in the form, Are you sure you want to discard the changes?\n  </ng-template>\n\n  <ng-template #modalFooter>\n    <nxq-button type="primary" (click)="onCancelPopup()">Cancel</nxq-button>\n    <nxq-button type="secondary" (click)="onConfirmPopup()">Confirm</nxq-button>\n  </ng-template>\n</nz-modal>\n'},1543:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.header-buttons {\n  margin: -55px 0 40px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.header-buttons > * {\n  margin-right: 10px;\n}\n.header-buttons > *:last-child {\n  margin-right: 0;\n}\n.role-templates {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 100%;\n}\n.role-templates-select {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  max-width: 300px;\n}\n.role-templates-select > * {\n  margin-bottom: 10px;\n}\n.role-templates-select > *:last-child {\n  margin-bottom: 0;\n}\n.role-templates-content {\n  display: flex;\n  flex-direction: column;\n}\n.role-templates-content > * {\n  margin-bottom: 20px;\n}\n.role-templates-content > *:last-child {\n  margin-bottom: 0;\n}"},1544:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="header-buttons">\n  <nxq-button [type]="buttonType.PRIMARY" (click)="reset()">{{ \'RESET\' | translate }}</nxq-button>\n  <nxq-button [type]="buttonType.PRIMARY" (click)="back()">{{ \'UPDATE_AND_BACK\' | translate }}</nxq-button>\n  \x3c!--  <nxq-button [type]="buttonType.SECONDARY" (click)="next()">Update and Next</nxq-button>--\x3e\n</div>\n\n<div class="navigation">\n  <div class="navigation-select">\n    <p>{{ \'CHOOSE_TENANT_TYPE\' }}</p>\n    <nxq-select\n      [placeholder]="\'CHOOSE\' | translate"\n      [control]="selectControl"\n      [options]="selectOptions"\n      (searchQueryChange)="searchQueryChanged($event)"\n    >\n    </nxq-select>\n  </div>\n  <div>\n    <nxq-collapse *ngIf="!!modulesDict.length" [background]="false" [active]="true">\n      <div slot="header">\n        <h3>{{ \'HOME\' | translate }}</h3>\n      </div>\n      <div slot="content">\n        <ng-container *ngFor="let plugin of modulesDict">\n          <div class="navigation-content">\n            <p>{{ plugin.id }}</p>\n            <nxq-switch [control]="plugin.formControl" [offLabel]="\'INACTIVE\' | translate" [onLabel]="\'ACTIVE\' | translate"> </nxq-switch>\n          </div>\n        </ng-container>\n      </div>\n    </nxq-collapse>\n    <nxq-collapse [background]="false">\n      <div slot="header">\n        <h3>{{ \'DISCOVER\' | translate }}</h3>\n      </div>\n      <div slot="content">\n        <ng-container *ngFor="let plugin of modulesDict">\n          <div class="navigation-content">\n            <p>{{ plugin.id }}</p>\n            <nxq-switch [control]="plugin.formControl" [offLabel]="\'INACTIVE\' | translate" [onLabel]="\'ACTIVE\' | translate"> </nxq-switch>\n          </div>\n        </ng-container>\n      </div>\n    </nxq-collapse>\n    <nxq-collapse [background]="false">\n      <div slot="header">\n        <h3>{{ \'PATHWAYS\' | translate }}</h3>\n      </div>\n      <div slot="content">\n        <ng-container *ngFor="let plugin of modulesDict">\n          <div class="navigation-content">\n            <p>{{ plugin.id }}</p>\n            <nxq-switch [control]="plugin.formControl" [offLabel]="\'INACTIVE\' | translate" [onLabel]="\'ACTIVE\' | translate"> </nxq-switch>\n          </div>\n        </ng-container>\n      </div>\n    </nxq-collapse>\n  </div>\n</div>\n'},1545:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.header-buttons {\n  margin: -55px 0 40px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.header-buttons > * {\n  margin-right: 10px;\n}\n.header-buttons > *:last-child {\n  margin-right: 0;\n}\n.navigation {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 100%;\n}\n.navigation-select {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  max-width: 300px;\n}\n.navigation-select > * {\n  margin-bottom: 10px;\n}\n.navigation-select > *:last-child {\n  margin-bottom: 0;\n}\n.navigation-content {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  align-content: center;\n  padding-bottom: 20px;\n}\n.navigation-content > * {\n  margin-right: 60px;\n}\n.navigation-content > *:last-child {\n  margin-right: 0;\n}\n.navigation-content .rtl {\n  display: flex;\n  flex-direction: row;\n}\n.navigation-content .rtl > * {\n  margin-left: 60px;\n  margin-right: 0;\n}\n.navigation-content .rtl > *:last-child {\n  margin-left: 0;\n}"},1546:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="header-buttons" *ngIf="editAllowed">\n  <nxq-button [type]="buttonType.PRIMARY" (click)="back()">{{ \'BACK\' | translate }}</nxq-button>\n  \x3c!--  <nxq-button [type]="buttonType.SECONDARY" (click)="next()">{{ \'NEXT\' | translate | titlecase }}</nxq-button>--\x3e\n</div>\n\n<div class="nxq-cp-ctr">\n  <div div class="nxq-cp-ctr-body">\n    <div class="nxq-cp-ctr-select">\n      <p>{{ \'CHOOSE_TENANT_TYPE\' | translate }}</p>\n      <nxq-select\n        [placeholder]="\'CHOOSE\' | translate"\n        [control]="selectTenantType"\n        [options]="tenantTypeOptions"\n        (searchQueryChange)="searchQueryChanged($event)"\n      >\n      </nxq-select>\n    </div>\n    <div class="nxq-cp-ctr-body-section" *ngIf="!!this.selectTenantType.value">\n      <nxq-collapse [background]="false" [active]="true">\n        <div slot="header">\n          <nxq-header [title]="\'360\'" [headerType]="headerType.SECTION"></nxq-header>\n        </div>\n        <div slot="content" class="nxq-cp-ctr-body-content">\n          <div class="table">\n            <nxq-table\n              [tableHeaders]="tableHeaders"\n              [tableData]="threeSixtyData"\n              [showPagination]="showPagination"\n              [enableSelect]="enableSelect"\n              (actionClicked)="actionClicked($event, \'ThreeSixty\')"\n              (customAction)="customActionClicked($event)"\n              (filtersChanged)="threeSixtyFiltersChanged($event)"\n              *ngIf="!isLoading"\n            ></nxq-table>\n          </div>\n          <div class="row">\n            <nxq-button type="primary" (click)="add(\'ThreeSixty\')" *ngIf="!isLoading && editAllowed">{{ \'ADD\' | translate }}</nxq-button>\n          </div>\n          <div class="nxq-spinner-cp" *ngIf="isLoading">\n            <nxq-loading></nxq-loading>\n          </div>\n        </div>\n      </nxq-collapse>\n      <nxq-collapse [background]="false" [active]="true">\n        <div slot="header">\n          <nxq-header [title]="\'PULSE\' | translate" [headerType]="headerType.SECTION"></nxq-header>\n        </div>\n        <div slot="content" class="nxq-cp-ctr-body-content">\n          <div class="table">\n            <nxq-table\n              [tableHeaders]="tableHeaders"\n              [tableData]="pulseData"\n              [showPagination]="showPagination"\n              [enableSelect]="enableSelect"\n              (actionClicked)="actionClicked($event, \'Pulse\')"\n              (customAction)="customActionClicked($event)"\n              (filtersChanged)="pulseFiltersChanged($event)"\n              *ngIf="!isLoading"\n            ></nxq-table>\n          </div>\n          <div class="row">\n            <nxq-button type="primary" (click)="add(\'Pulse\')" *ngIf="!isLoading && editAllowed">{{ \'ADD\' | translate }}</nxq-button>\n          </div>\n          <div class="nxq-spinner-cp" *ngIf="isLoading">\n            <nxq-loading></nxq-loading>\n          </div>\n        </div>\n      </nxq-collapse>\n    </div>\n  </div>\n  <nz-drawer\n    [nzBodyStyle]="{ height: \'calc(100% - 55px)\', overflow: \'auto\', \'padding-bottom\': \'70px\' }"\n    [nzClosable]="false"\n    [nzMaskClosable]="true"\n    [nzWidth]="470"\n    [nzVisible]="showAdd"\n    [nzTitle]="\'\'"\n    (nzOnClose)="onClose(\'\')"\n  >\n    <div class="side-drawer" *ngIf="showAdd && editAllowed">\n      <nxq-add-survey\n        (closeDrawer)="onClose($event)"\n        (formIsDirty)="formDirtyStateChanged($event)"\n        [survey]="selectedSurvey"\n        [tenantTypeId]="tenantTypeId"\n        [type]="type"\n      ></nxq-add-survey>\n    </div>\n  </nz-drawer>\n\n  <nz-modal\n    [(nzVisible)]="showModal"\n    [nzContent]="modalContent"\n    [nzFooter]="modalFooter"\n    (nzOnCancel)="onCancel()"\n    nzWidth="400px"\n    nzHeight="300px"\n    class="confirm-popup"\n    nzClassName="confirm-modal"\n  >\n    <ng-template #modalContent>\n      {{ \'DELETE_MESSAGE\' | translate }}\n    </ng-template>\n\n    <ng-template #modalFooter>\n      <nxq-button type="primary" (click)="onCancel()">{{ \'CANCEL\' | translate }}</nxq-button>\n      <nxq-button type="secondary" (click)="onConfirm()">{{ \'CONFIRM\' | translate }}</nxq-button>\n    </ng-template>\n  </nz-modal>\n\n  <nz-modal\n    [(nzVisible)]="showFormDirtyModal"\n    [nzContent]="modalContents"\n    [nzFooter]="modalFooters"\n    (nzOnCancel)="onCancelPopup()"\n    nzWidth="400px"\n    nzHeight="300px"\n    class="confirm-popup"\n    nzClassName="confirm-modal"\n  >\n    <ng-template #modalContents>\n      You have unsaved data in the form, Are you sure you want to discard the changes?\n    </ng-template>\n\n    <ng-template #modalFooters>\n      <nxq-button type="primary" (click)="onCancelPopup()">Cancel</nxq-button>\n      <nxq-button type="secondary" (click)="onConfirmPopup()">Confirm</nxq-button>\n    </ng-template>\n  </nz-modal>\n</div>\n'},1547:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.header-buttons {\n  width: 100%;\n  margin: -55px 0 40px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.header-buttons > * {\n  margin-right: 10px;\n}\n.header-buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 65vw;\n}\n.nxq-cp-ctr > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-select {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  max-width: 300px;\n}\n.nxq-cp-ctr-select > * {\n  margin-bottom: 10px;\n}\n.nxq-cp-ctr-select > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-header {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  align-content: center;\n}\n.nxq-cp-ctr-body {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-section {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr-body-content {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr-body-content > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body-content > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-content .table {\n  overflow-x: scroll;\n  display: flex;\n}\n.nxq-cp-ctr-body-content .table nxq-table {\n  flex: auto;\n}\n.nxq-pop-up {\n  margin: 20px 0;\n  padding: 30px;\n  border-radius: 10px;\n  border: 1px solid #2373ff;\n  box-shadow: 0 2px 22px rgba(174, 179, 198, 0.120465);\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-header {\n  color: #2373ff;\n  font-size: 22px;\n  font-weight: bold;\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-header > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-header > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-body {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-body > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-actions {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-pop-up-actions > * {\n  margin-right: 30px;\n}\n.nxq-pop-up-actions > *:last-child {\n  margin-right: 0;\n}\n.row {\n  display: flex;\n  flex-direction: row;\n}"},1548:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="container">\n  <div class="header">\n    <span *ngIf="!role">{{ \'ADD_NEW_ROLE\' | translate }}</span>\n    <span *ngIf="!!role">{{ \'EDIT_ROLE\' | translate }}</span>\n  </div>\n\n  <div class="content">\n    <form class="form" [formGroup]="form" #formElement>\n      <div class="input-field">\n        <div class="input-container">\n          <nxq-label [isRequired]="!!controls.name.validator" labelType="code" [value]="\'ROLE_NAME\' | translate"></nxq-label>\n          <nxq-input-master [placeholder]="\'ROLE_NAME\' | translate" [control]="controls.name"></nxq-input-master>\n        </div>\n\n        <div class="input-container">\n          <nxq-label [isRequired]="!!controls.typeId.validator" labelType="code" [value]="\'TYPE\' | translate"></nxq-label>\n          <nxq-select [placeholder]="\'TYPE\' | translate" [control]="controls.typeId" [options]="typeOptions"></nxq-select>\n          <nxq-control-error\n            [control]="controls.typeId"\n            *ngIf="controls.typeId.invalid && controls.typeId.touched"\n            [errorMessage]="errorMessage"\n          ></nxq-control-error>\n        </div>\n\n        <div class="input-container">\n          <nxq-label [isRequired]="!!controls.subTypeId.validator" labelType="code" [value]="\'SUB_TYPE\' | translate"></nxq-label>\n          <nxq-select [placeholder]="\'SUB_TYPE\' | translate" [control]="controls.subTypeId" [options]="subTypeOptions"></nxq-select>\n          <nxq-control-error\n            [control]="controls.subTypeId"\n            *ngIf="controls.subTypeId.invalid && controls.subTypeId.touched"\n            [errorMessage]="errorMessage"\n          ></nxq-control-error>\n        </div>\n\n        <div class="input-container">\n          <nxq-label [isRequired]="!!controls.description.validator" labelType="code" [value]="\'ROLE_DESCRIPTION\' | translate"></nxq-label>\n          <quill-editor\n            class="quill"\n            [placeholder]="\'ROLE_DESCRIPTION\' | translate"\n            [formControl]="controls.description"\n            theme="bubble"\n          ></quill-editor>\n          <nxq-control-error\n            [control]="controls.description"\n            *ngIf="controls.description.invalid && controls.description.touched"\n            [errorMessage]="errorMessage"\n          ></nxq-control-error>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <div class="select-privileges">\n    <h3>{{ \'SELECT_PRIVILEGES\' | translate }}</h3>\n\n    <nxq-tabset-radio-button-group [control]="selectedTab">\n      <nxq-radio-button value="option-1">{{ \'ALL\' | translate }}</nxq-radio-button>\n      <nxq-radio-button value="option-2">{{ \'ASSIGNED\' | translate }}</nxq-radio-button>\n      <nxq-radio-button value="option-3">{{ \'UNASSIGNED\' | translate }}</nxq-radio-button>\n    </nxq-tabset-radio-button-group>\n\n    <div class="tree-container">\n      <nxq-tree\n        *ngIf="selectedTab.value === \'option-1\' && !!allPrivileges.length"\n        [nodes]="allPrivileges"\n        [checkedKeys]="selectedPrivileges"\n        (checkBoxChange)="onCheckBoxClick($event)"\n      ></nxq-tree>\n      <nxq-tree\n        *ngIf="selectedTab.value === \'option-2\' && !!assignedPrivileges.length"\n        [nodes]="assignedPrivileges"\n        [checkable]="false"\n      ></nxq-tree>\n      <nxq-tree\n        *ngIf="selectedTab.value === \'option-3\' && !!unAssignedPrivileges.length"\n        [nodes]="unAssignedPrivileges"\n        [checkable]="false"\n      ></nxq-tree>\n    </div>\n  </div>\n  <div class="buttons">\n    <nxq-button type="primary" (click)="cancel()">{{ \'CANCEL\' | translate }}</nxq-button>\n    <nxq-button type="secondary" (click)="addRole(formElement)" *ngIf="!role">{{ \'ADD\' | translate }}</nxq-button>\n    <nxq-button type="secondary" (click)="editRole(formElement)" *ngIf="!!role">{{ \'EDIT\' | translate }}</nxq-button>\n  </div>\n</div>\n'},1549:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.container .header {\n  position: absolute;\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 22px;\n  color: #2373ff;\n  top: 0px;\n  width: 90%;\n  height: 50px;\n  z-index: 10;\n  background-color: #ffffff;\n  padding-top: 10px;\n}\n.container .content {\n  margin: 25px 0;\n  display: flex;\n  flex-direction: column;\n}\n.container .content > * {\n  margin-bottom: 20px;\n}\n.container .content > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form {\n  display: flex;\n  flex-direction: column;\n}\n.container .content .form > * {\n  margin-bottom: 20px;\n}\n.container .content .form > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form .input-field {\n  display: flex;\n  flex-direction: column;\n}\n.container .content .form .input-field > * {\n  margin-bottom: 10px;\n}\n.container .content .form .input-field > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form .input-field .input-container {\n  display: flex;\n  flex-direction: column;\n}\n.container .content .form .input-field .input-container > * {\n  margin-bottom: 10px;\n}\n.container .content .form .input-field .input-container > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form .quill {\n  width: 100%;\n  height: 100px;\n}\n.select-privileges {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n}\n.select-privileges > * {\n  margin-bottom: 20px;\n}\n.select-privileges > *:last-child {\n  margin-bottom: 0;\n}\n.select-privileges h3 {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\n.buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n  padding: 10px 20px 10px 20px;\n  background: #ffffff;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  border-top: 1px solid lightgray;\n  box-shadow: 0px 0px 10px 2px rgba(187, 187, 187, 0.7);\n  z-index: 1;\n}\n.buttons > * {\n  margin-right: 13px;\n}\n.buttons > *:last-child {\n  margin-right: 0;\n}"},1550:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="tenant-types__add">\n  <div class="header">\n    <span>{{ \'ADD_NEW_TENANT_TYPE\' | translate }}</span>\n  </div>\n\n  <nz-divider></nz-divider>\n\n  <div class="content">\n    <form [formGroup]="form" class="tenant-types-add-form" #formElement>\n      <div class="input-field">\n        <span class="label">{{ \'NAME\' | translate }}</span>\n        <nxq-input-master [control]="controls.name" [placeholder]="\'NAME\' | translate"></nxq-input-master>\n      </div>\n\n      <div class="input-field">\n        <span class="label">{{ \'Description\' | uppercase }}</span>\n        <nxq-input-master [control]="controls.description" [placeholder]="\'DESCRIPTION\' | translate"></nxq-input-master>\n      </div>\n    </form>\n\n    <div class="buttons">\n      <nxq-button [type]="buttonType.PRIMARY" (click)="onCancel()">{{ \'CANCEL\' | translate }}</nxq-button>\n      <nxq-button *ngIf="action === \'add\'" [type]="buttonType.SECONDARY" (click)="addTenantType(formElement)">{{\n        \'ADD\' | translate\n      }}</nxq-button>\n      <nxq-button *ngIf="action === \'edit\'" [type]="buttonType.SECONDARY" (click)="editTenantType(formElement)">{{\n        \'EDIT\' | translate\n      }}</nxq-button>\n      <nxq-button *ngIf="action === \'duplicate\'" [type]="buttonType.SECONDARY" (click)="duplicateTenantType(formElement)">{{\n        \'DUPLICATE\' | translate\n      }}</nxq-button>\n    </div>\n  </div>\n</div>\n'},1551:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.tenant-types__add .header {\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 22px;\n  color: #2373ff;\n}\n.tenant-types__add .content {\n  display: flex;\n  flex-direction: column;\n}\n.tenant-types__add .content > * {\n  margin-bottom: 20px;\n}\n.tenant-types__add .content > *:last-child {\n  margin-bottom: 0;\n}\n.tenant-types__add .content .tenant-types-add-form {\n  display: flex;\n  flex-direction: column;\n}\n.tenant-types__add .content .tenant-types-add-form > * {\n  margin-bottom: 15px;\n}\n.tenant-types__add .content .tenant-types-add-form > *:last-child {\n  margin-bottom: 0;\n}\n.tenant-types__add .content .tenant-types-add-form .input-field {\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n}\n.tenant-types__add .content .tenant-types-add-form .input-field > * {\n  margin-bottom: 10px;\n}\n.tenant-types__add .content .tenant-types-add-form .input-field > *:last-child {\n  margin-bottom: 0;\n}\n.tenant-types__add .content .tenant-types-add-form .input-field .label {\n  font-weight: bold;\n  font-size: 12px;\n  line-height: 13px;\n  color: #aeb3c6;\n}\n.tenant-types__add .content .buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n  padding: 10px 20px 10px 20px;\n  background: #ffffff;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  border-top: 1px solid lightgray;\n  box-shadow: 0px 0px 10px 2px rgba(187, 187, 187, 0.7);\n  z-index: 1;\n}\n.tenant-types__add .content .buttons > * {\n  margin-right: 13px;\n}\n.tenant-types__add .content .buttons > *:last-child {\n  margin-right: 0;\n}"},1552:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="container">\n  <div class="header">\n    <span *ngIf="!survey">{{ \'ADD_NEW_SURVEY\' | translate }}</span>\n    <span *ngIf="!!survey">{{ \'EDIT_SURVEY\' | translate }}</span>\n  </div>\n\n  <div class="content">\n    <form class="form" [formGroup]="form" #formElement>\n      <div class="input-field">\n        <div class="input-container">\n          <nxq-label labelType="code" [value]="\'TEMPLATE\' | translate"></nxq-label>\n          <nxq-input-master [placeholder]="\'TEMPLATE\' | translate" [control]="controls.template"></nxq-input-master>\n        </div>\n\n        <div class="input-container">\n          <nxq-label labelType="code" [value]="\'SURVEY\' | translate"></nxq-label>\n          <nxq-select [placeholder]="\'SURVEY\' | translate" [control]="controls.survey" [options]="surveyOptions"></nxq-select>\n          <nxq-control-error\n            [control]="controls.survey"\n            *ngIf="controls.survey.invalid && controls.survey.touched"\n            [errorMessage]="\'THIS_FIELD_REQUIRED\' | translate"\n          ></nxq-control-error>\n        </div>\n\n        <div class="input-container" *ngIf="!!controls.survey.value">\n          <p class="label">{{ \'SURVEY_ICON\' | translate }}</p>\n          <div class="logo">\n            <input type="file" accept="image/*" hidden (change)="addSquareLogo($event)" #squareLogoInput />\n            <nxq-logo [image]="controls.surveyIconUrl.value" [fullLogo]="true"></nxq-logo>\n            <div class="logo-buttons">\n              <nxq-button type="primary" [width]="\'100%\'" (click)="uploadSurveyLogo()">{{ \'UPLOAD\' | translate }}</nxq-button>\n              <nxq-button type="danger" [width]="\'100%\'" (click)="removeSurveyLogo()">{{ \'REMOVE\' | translate }}</nxq-button>\n            </div>\n          </div>\n        </div>\n\n        <div class="input-container">\n          <nxq-label labelType="code" [value]="\'CUSTOM_VARIABLE\' | translate"></nxq-label>\n          <nxq-select\n            [placeholder]="\'CUSTOM_VARIABLE\' | translate"\n            [control]="controls.selectedCustomVariable"\n            [options]="customVariableOptions"\n            [mode]="selectMode.TAGS"\n          ></nxq-select>\n          <nxq-control-error\n            [control]="controls.selectedCustomVariable"\n            *ngIf="controls.selectedCustomVariable.invalid && controls.selectedCustomVariable.touched"\n            [errorMessage]="\'THIS_FIELD_REQUIRED\' | translate"\n          ></nxq-control-error>\n        </div>\n\n        <div class="input-container">\n          <nxq-label labelType="code" [value]="\'MIN_AXIS\' | translate"></nxq-label>\n          <nxq-input-master [placeholder]="\'MIN_AXIS\' | translate" [control]="controls.minAxisValue"></nxq-input-master>\n        </div>\n\n        <div class="input-container">\n          <nxq-label labelType="code" [value]="\'MAX_AXIS\' | translate"></nxq-label>\n          <nxq-input-master [placeholder]="\'MAX_AXIS\' | translate" [control]="controls.maxAxisValue"></nxq-input-master>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <div class="buttons">\n    <nxq-button type="primary" (click)="cancel()">{{ \'CANCEL\' | translate }}</nxq-button>\n    <nxq-button type="secondary" (click)="addSurvey(formElement)" *ngIf="!survey">{{ \'ADD\' | translate }}</nxq-button>\n    <nxq-button type="secondary" (click)="editSurvey(formElement)" *ngIf="!!survey">{{ \'SAVE\' | translate }}</nxq-button>\n  </div>\n</div>\n'},1553:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.container .header {\n  position: absolute;\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 22px;\n  color: #2373ff;\n  top: 0px;\n  width: 90%;\n  height: 50px;\n  z-index: 10;\n  background-color: #ffffff;\n  padding-top: 10px;\n}\n.container .content {\n  margin: 25px 0 65px 0;\n  display: flex;\n  flex-direction: column;\n}\n.container .content > * {\n  margin-bottom: 20px;\n}\n.container .content > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form {\n  display: flex;\n  flex-direction: column;\n}\n.container .content .form > * {\n  margin-bottom: 20px;\n}\n.container .content .form > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form .input-field {\n  display: flex;\n  flex-direction: column;\n}\n.container .content .form .input-field > * {\n  margin-bottom: 10px;\n}\n.container .content .form .input-field > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form .input-field .input-container {\n  display: flex;\n  flex-direction: column;\n}\n.container .content .form .input-field .input-container > * {\n  margin-bottom: 10px;\n}\n.container .content .form .input-field .input-container > *:last-child {\n  margin-bottom: 0;\n}\n.container .content .form .input-field .switch-container {\n  display: flex;\n  flex-direction: row;\n  margin: 20px 0 20px 0;\n}\n.container .content .form .input-field .switch-container > * {\n  margin-right: 30px;\n}\n.container .content .form .input-field .switch-container > *:last-child {\n  margin-right: 0;\n}\n.container .content .form .logo {\n  display: flex;\n  flex-direction: row;\n}\n.container .content .form .logo nxq-logo {\n  width: 180px;\n}\n.container .content .form .logo .logo-buttons {\n  display: flex;\n  flex-direction: column;\n}\n.container .content .form .logo .logo-buttons > * {\n  margin-bottom: 10px;\n}\n.container .content .form .logo .logo-buttons > *:last-child {\n  margin-bottom: 0;\n}\n.buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n  padding: 10px 20px 10px 20px;\n  background: #ffffff;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  border-top: 1px solid lightgray;\n  box-shadow: 0px 0px 10px 2px rgba(187, 187, 187, 0.7);\n  z-index: 1;\n}\n.buttons > * {\n  margin-right: 13px;\n}\n.buttons > *:last-child {\n  margin-right: 0;\n}"},1691:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return tenant_type_privileges_manager_TenantTypePrivilegesManager}));var tslib_es6=__webpack_require__(1),core=__webpack_require__(0),map=__webpack_require__(22),take=__webpack_require__(85),tap=__webpack_require__(73),organisation_service=__webpack_require__(1415),datorama_akita=__webpack_require__(244);let tenant_type_privileges_store_TenantTypePrivilegesStore=class TenantTypePrivilegesStore extends datorama_akita.a{constructor(){super({loaded:!1,loading:!1,updating:!1,roles:null})}};var _a;tenant_type_privileges_store_TenantTypePrivilegesStore=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(datorama_akita.c)({name:"tenant-type-privileges"}),Object(tslib_es6.f)("design:paramtypes",[])],tenant_type_privileges_store_TenantTypePrivilegesStore);let tenant_type_privileges_query_TenantTypePrivilegesQuery=class TenantTypePrivilegesQuery extends datorama_akita.b{constructor(store){super(store),this.store=store}selectTenantTypePrivileges(tenantTypeId){return this.selectAll().pipe(Object(map.a)(privileges=>privileges.filter(p=>p.tenantTypeId===tenantTypeId)))}};var tenant_type_privileges_manager_a,_b,_c;tenant_type_privileges_query_TenantTypePrivilegesQuery=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(_a=void 0!==tenant_type_privileges_store_TenantTypePrivilegesStore&&tenant_type_privileges_store_TenantTypePrivilegesStore)?_a:Object])],tenant_type_privileges_query_TenantTypePrivilegesQuery);let tenant_type_privileges_manager_TenantTypePrivilegesManager=class TenantTypePrivilegesManager{constructor(tenantTypePrivilegesStore,tenantTypePrivilegesQuery,organisationService){this.tenantTypePrivilegesStore=tenantTypePrivilegesStore,this.tenantTypePrivilegesQuery=tenantTypePrivilegesQuery,this.organisationService=organisationService}getLoading(){return this.tenantTypePrivilegesQuery.selectLoading()}getLoaded(){return this.tenantTypePrivilegesQuery.select("loaded")}getUpdating(){return this.tenantTypePrivilegesQuery.select("updating")}getPrivilegeRoles(){return this.tenantTypePrivilegesQuery.select("roles")}getTenantTypePrivilegeLoaded(tenantId){return this.tenantTypePrivilegesQuery.selectTenantTypePrivileges(tenantId).pipe(Object(map.a)(v=>!!v.length))}setLoading(value){this.tenantTypePrivilegesStore.update({loading:value})}setUpdating(value){this.tenantTypePrivilegesStore.update({updating:value})}getTenantTypePrivileges(tenantId,force=!1){let loaded=!1;return this.getTenantTypePrivilegeLoaded(tenantId).pipe(Object(take.a)(1)).subscribe(res=>loaded=res),loaded&&!force||(this.searchSubscription&&(this.setLoading(!1),this.searchSubscription.unsubscribe()),this.fetchTenantTypePrivileges(tenantId,force)),this.tenantTypePrivilegesQuery.selectTenantTypePrivileges(tenantId)}fetchTenantTypePrivileges(tenantId,force=!1){let loading=!1,privilegesRolesLoaded=!1;this.getLoading().pipe(Object(take.a)(1)).subscribe(res=>loading=res),this.getPrivilegeRoles().pipe(Object(take.a)(1)).subscribe(res=>privilegesRolesLoaded=!!res),loading||(this.setLoading(!0),this.searchSubscription=this.organisationService.getTenantTypePrivileges(tenantId).subscribe(res=>{this.tenantTypePrivilegesStore.upsertMany(res.privileges),privilegesRolesLoaded||this.tenantTypePrivilegesStore.update({roles:res.roles}),this.setLoading(!1)},err=>{this.setLoading(!1)}))}updateTenantTypePrivileges(tenantId,data){let privileges;return this.tenantTypePrivilegesQuery.selectTenantTypePrivileges(tenantId).pipe(Object(take.a)(1)).subscribe(res=>{privileges=res}),this.setUpdating(!0),this.organisationService.updateTenantTypePrivileges(tenantId,data).pipe(Object(tap.a)(()=>{this.setUpdating(!1);const updatedPrivileges=data.privileges;this.tenantTypePrivilegesStore.upsertMany(updatedPrivileges)},err=>{this.setUpdating(!1)}))}ngOnDestroy(){}transformPrivilege(privileges,privilegesToUpdate){const idsOfPrivilegesToUpdate=[...privilegesToUpdate].map(p=>p.id);return privileges.map(privilege=>{if(privilege.children)return Object.assign(Object.assign({},privilege),{children:this.transformPrivilege(privilege.children,privilegesToUpdate)});if(idsOfPrivilegesToUpdate.includes(privilege.id)){const updatedPrivilege=privilegesToUpdate.filter(p=>p.id===privilege.id)[0];return Object.assign(Object.assign({},privilege),{accessType:updatedPrivilege.accessType,roleIds:updatedPrivilege.roleIds})}return privilege})}};tenant_type_privileges_manager_TenantTypePrivilegesManager=Object(tslib_es6.c)([Object(core.Injectable)(),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_privileges_manager_a=void 0!==tenant_type_privileges_store_TenantTypePrivilegesStore&&tenant_type_privileges_store_TenantTypePrivilegesStore)?tenant_type_privileges_manager_a:Object,"function"==typeof(_b=void 0!==tenant_type_privileges_query_TenantTypePrivilegesQuery&&tenant_type_privileges_query_TenantTypePrivilegesQuery)?_b:Object,"function"==typeof(_c=void 0!==organisation_service.a&&organisation_service.a)?_c:Object])],tenant_type_privileges_manager_TenantTypePrivilegesManager)},1702:function(module,exports){},1705:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"MasterManagementModule",(function(){return MasterManagementModule}));var _a,_b,_c,tslib_es6=__webpack_require__(1),core=__webpack_require__(0),common=__webpack_require__(6),shared_module=__webpack_require__(587),fesm5_router=__webpack_require__(35),public_api=__webpack_require__(12),takeUntil=__webpack_require__(29),filter=__webpack_require__(44),unsubscribe=__webpack_require__(216),translate_pipe=__webpack_require__(215);let master_management_component_MasterManagementComponent=class MasterManagementComponent extends unsubscribe.a{constructor(router,route,translatePipe){super(),this.router=router,this.route=route,this.translatePipe=translatePipe,this.subMenu=[{id:1,name:this.translatePipe.transform("TENANT_TYPES"),canAddChild:!1,deletable:!1,routerLink:"tenant-types"},{id:2,name:this.translatePipe.transform("MODULES_PLUG_INS"),canAddChild:!1,deletable:!1,routerLink:"modules-and-plug-ins"},{id:3,name:this.translatePipe.transform("INTEGRATIONS"),canAddChild:!1,deletable:!1,routerLink:"integrations"},{id:4,name:this.translatePipe.transform("USER_RIGHTS_PRIVILEGES"),canAddChild:!1,deletable:!1,routerLink:"user-rights-and-privileges"},{id:5,name:this.translatePipe.transform("ROLE_TEMPLATES"),canAddChild:!1,deletable:!1,routerLink:"role-templates"},{id:6,name:this.translatePipe.transform("SURVEY"),canAddChild:!1,deletable:!1,routerLink:"survey"}],this.pageHeader="",this.pageHeaderType=public_api.g.PAGE,this.parentBreadCrumbs=[{url:"manage-organisation",label:this.translatePipe.transform("MANAGE_ORGANISATION")},{url:"master-management",label:this.translatePipe.transform("MASTER_MANAGEMENT")}],this.breadcrumbs=[...this.parentBreadCrumbs,{label:this.translatePipe.transform("TENANT_TYPES"),url:"tenant-types"}]}ngOnInit(){this.setBreadCrumbs(),this.router.events.pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(event=>event instanceof fesm5_router.c)).subscribe(()=>{this.setBreadCrumbs()})}subMenuSelectedItem(subMenuItem){this.router.navigate([subMenuItem.routerLink],{relativeTo:this.route})}setBreadCrumbs(){const routeLink=this.route.snapshot.firstChild.url[0].path;this.level=this.subMenu.map(item=>item.routerLink).indexOf(routeLink);const subMenuItem=this.subMenu[this.level];this.pageHeader=subMenuItem.name,this.breadcrumbs=[...this.parentBreadCrumbs,{url:subMenuItem.routerLink,label:this.pageHeader}]}};master_management_component_MasterManagementComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-master-management",template:(__webpack_require__(1532).default||__webpack_require__(1532)).length?__webpack_require__(1532).default||__webpack_require__(1532):"",styles:[(__webpack_require__(1533).default||__webpack_require__(1533)).length?__webpack_require__(1533).default||__webpack_require__(1533):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(_a=void 0!==fesm5_router.i&&fesm5_router.i)?_a:Object,"function"==typeof(_b=void 0!==fesm5_router.a&&fesm5_router.a)?_b:Object,"function"==typeof(_c=void 0!==translate_pipe.a&&translate_pipe.a)?_c:Object])],master_management_component_MasterManagementComponent);var distinctUntilChanged=__webpack_require__(79),take=__webpack_require__(85),tap=__webpack_require__(73),datorama_akita=__webpack_require__(244);let tenant_types_store_TenantTypesStore=class TenantTypesStore extends datorama_akita.a{constructor(){super({loaded:!1,loading:!1,adding:!1,deleting:!1,updating:!1,query:""})}};var tenant_types_query_a;tenant_types_store_TenantTypesStore=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(datorama_akita.c)({name:"tenant-types"}),Object(tslib_es6.f)("design:paramtypes",[])],tenant_types_store_TenantTypesStore);let tenant_types_query_TenantTypesQuery=class TenantTypesQuery extends datorama_akita.b{constructor(store){super(store),this.store=store}selectTenantTypes(){return this.selectAll()}selectTenantTypeById(id){return this.selectEntity(id)}};tenant_types_query_TenantTypesQuery=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_types_query_a=void 0!==tenant_types_store_TenantTypesStore&&tenant_types_store_TenantTypesStore)?tenant_types_query_a:Object])],tenant_types_query_TenantTypesQuery);var tenant_type_manager_a,tenant_type_manager_b,tenant_type_manager_c,organisation_service=__webpack_require__(1415),utils=__webpack_require__(586);let tenant_type_manager_TenantTypeManager=class TenantTypeManager{constructor(tenantTypesStore,tenantTypesQuery,organisationService){this.tenantTypesStore=tenantTypesStore,this.tenantTypesQuery=tenantTypesQuery,this.organisationService=organisationService}getLoading(){return this.tenantTypesQuery.selectLoading()}getLoaded(){return this.tenantTypesQuery.select("loaded")}getAdding(){return this.tenantTypesQuery.select("adding")}getDeleting(){return this.tenantTypesQuery.select("deleting")}getUpdating(){return this.tenantTypesQuery.select("updating")}getQuery(){return this.tenantTypesQuery.select("query")}setLoading(value){this.tenantTypesStore.setLoading(value)}setAdding(value){this.tenantTypesStore.update({adding:value})}setUpdating(value){this.tenantTypesStore.update({updating:value})}setDeleting(value){this.tenantTypesStore.update({deleting:value})}setQuery(value){this.tenantTypesStore.update({query:value})}getTenantTypes(force=!1){this.combinedSubscription&&this.combinedSubscription.unsubscribe();const query$=this.getQuery().pipe(Object(distinctUntilChanged.a)());return this.combinedSubscription=query$.subscribe(()=>{this.searchSubscription&&(this.setLoading(!1),this.searchSubscription.unsubscribe()),this.fetchTenantTypes(!0)}),this.tenantTypesQuery.selectTenantTypes()}fetchTenantTypes(force=!1){let loading=!1,loaded=!1,query="";this.getLoading().pipe(Object(take.a)(1)).subscribe(res=>loading=res),this.getLoaded().pipe(Object(take.a)(1)).subscribe(res=>loaded=res),this.getQuery().pipe(Object(take.a)(1)).subscribe(res=>query=res),loading||loaded&&!force||(this.setLoading(!0),this.searchSubscription=this.organisationService.getTenantTypeList().subscribe(res=>{this.tenantTypesStore.set(res),this.tenantTypesStore.update({loaded:!0}),this.setLoading(!1)},err=>{this.setLoading(!1)}))}createTenantType(data){this.setAdding(!0);const cleanData=utils.a.removeNullAndUndefinedKeys(data);return this.organisationService.createTenantType(cleanData).pipe(Object(tap.a)(res=>{this.setAdding(!1),this.tenantTypesStore.add(res)},err=>{this.setAdding(!1)}))}updateTenantType(id,data){this.setUpdating(!0);const cleanData=utils.a.removeNullAndUndefinedKeys(data);return this.organisationService.updateTenantType(id,cleanData).pipe(Object(tap.a)(res=>{this.setUpdating(!1),this.tenantTypesStore.update(id,res)},err=>{this.setUpdating(!1)}))}duplicateTenantType(id,data){return this.setUpdating(!0),this.organisationService.duplicateTenantType(id,data).pipe(Object(tap.a)(res=>{this.setUpdating(!1),this.tenantTypesStore.add(res)},err=>{this.setUpdating(!1)}))}deleteTenantType(id){this.setDeleting(!0)}ngOnDestroy(){}};tenant_type_manager_TenantTypeManager=Object(tslib_es6.c)([Object(core.Injectable)(),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_manager_a=void 0!==tenant_types_store_TenantTypesStore&&tenant_types_store_TenantTypesStore)?tenant_type_manager_a:Object,"function"==typeof(tenant_type_manager_b=void 0!==tenant_types_query_TenantTypesQuery&&tenant_types_query_TenantTypesQuery)?tenant_type_manager_b:Object,"function"==typeof(tenant_type_manager_c=void 0!==organisation_service.a&&organisation_service.a)?tenant_type_manager_c:Object])],tenant_type_manager_TenantTypeManager);var tenant_types_component_a,tenant_types_component_b,tenant_types_component_c,_d,_e,privilege_enum=__webpack_require__(47),privilege_utils=__webpack_require__(87),ng_zorro_antd_message=__webpack_require__(185);let tenant_types_component_TenantTypesComponent=class TenantTypesComponent extends unsubscribe.a{constructor(tenantTypeManager,router,route,translatePipe,messageService){super(),this.tenantTypeManager=tenantTypeManager,this.router=router,this.route=route,this.translatePipe=translatePipe,this.messageService=messageService,this.showAdd=!1,this.buttonType=public_api.c,this.isLoading=!0,this.editAllowed=privilege_utils.a.hasViewPrivileges([privilege_enum.a.SUBSCRIPTIONS,privilege_enum.a.MASTER_MANAGEMENT,privilege_enum.a.EDIT]),this.headers=[{title:this.translatePipe.transform("NAME"),type:public_api.s.TEXT,property:"name",showSort:!0},{title:this.translatePipe.transform("ACTIVE"),type:public_api.s.COMPONENT,property:"active",component:public_api.f},{title:this.translatePipe.transform("DESCRIPTION"),type:public_api.s.TEXT,property:"description",showSort:!0},{title:this.translatePipe.transform("ACTIONS"),type:public_api.s.ACTIONS,property:"",actions:[{title:this.translatePipe.transform("DUPLICATE"),type:public_api.r.BUTTON,value:"duplicate"},{title:this.translatePipe.transform("EDIT"),type:public_api.r.BUTTON,value:"edit"}]}],this.tenantTypes=[],this.data=[],this.showPagination=!1,this.enableSelect=!0,this.action=""}ngOnInit(){this.tenantTypeManager.getLoading().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.isLoading=res}),this.tenantTypeManager.getTenantTypes().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.tenantTypes=this.transformTenantList(res),this.data=[...this.tenantTypes]}),this.editAllowed||(this.headers=this.headers.filter(s=>s.type!==public_api.s.ACTIONS))}transformTenantList(data){return data.map(type=>Object.assign(Object.assign({},type),{active:{value:type.active,disable:!this.editAllowed}}))}onAdd(){this.action="add",this.selectedTenantType=null,this.showAdd=!0}onEdit(data){this.action="edit",this.selectedTenantType=data,this.showAdd=!0}onDuplicate(data){this.action="duplicate",this.selectedTenantType=Object.assign(Object.assign({},data),{name:data.name+"-2"}),console.log(this.selectedTenantType),this.showAdd=!0}actionClicked(event){"edit"===event.value?this.onEdit(event.data):"duplicate"===event.value&&this.onDuplicate(event.data)}customAction(event){console.log("Custom Action",event),event.hasOwnProperty("active")&&this.tenantTypeManager.updateTenantType(event.data.id,{active:event.active}).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{console.log("Set Status to"+event.active),this.messageService.success(this.translatePipe.transform("TENANT_TYPES_STATUS_CHANGED"))})}filters(event){console.log("EVENT",event),event.search?this.data=[...this.tenantTypes.filter(type=>type.name.toLowerCase().includes(event.search.toLowerCase())||(type.id+"").toLowerCase().includes(event.search.toLowerCase())||(type.description+"").toLowerCase().includes(event.search.toLowerCase()))]:this.data=[...this.tenantTypes],event.sortBy&&(this.data=utils.a.sortByMultipleValues(this.data,event.sortBy))}rowsSelected(event){console.log("ROWS",event)}onClose(){this.formIsDirty?this.showModal=!0:this.showAdd=!1}back(){this.router.navigate(["../../../manage-organisation"],{relativeTo:this.route})}next(){this.router.navigate(["../modules-and-plug-ins"],{relativeTo:this.route})}formDirtyStateChanged($event){this.formIsDirty=$event}onCancelPopup(){this.showModal=!1}onConfirmPopup(){this.formIsDirty=!1,this.showAdd=!1,this.showModal=!1}};tenant_types_component_TenantTypesComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-tenant-types",template:(__webpack_require__(1534).default||__webpack_require__(1534)).length?__webpack_require__(1534).default||__webpack_require__(1534):"",styles:[(__webpack_require__(1535).default||__webpack_require__(1535)).length?__webpack_require__(1535).default||__webpack_require__(1535):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_types_component_a=void 0!==tenant_type_manager_TenantTypeManager&&tenant_type_manager_TenantTypeManager)?tenant_types_component_a:Object,"function"==typeof(tenant_types_component_b=void 0!==fesm5_router.i&&fesm5_router.i)?tenant_types_component_b:Object,"function"==typeof(tenant_types_component_c=void 0!==fesm5_router.a&&fesm5_router.a)?tenant_types_component_c:Object,"function"==typeof(_d=void 0!==translate_pipe.a&&translate_pipe.a)?_d:Object,"function"==typeof(_e=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?_e:Object])],tenant_types_component_TenantTypesComponent);var fesm5_forms=__webpack_require__(5),map=__webpack_require__(22);let tenant_type_plugins_store_TenantTypePluginsStore=class TenantTypePluginsStore extends datorama_akita.a{constructor(){super({loaded:!1,loading:!1,updating:!1,masterPlugins:null,tenantPlugins:null})}};var tenant_type_plugins_query_a;tenant_type_plugins_store_TenantTypePluginsStore=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(datorama_akita.c)({name:"tenant-type-plugins"}),Object(tslib_es6.f)("design:paramtypes",[])],tenant_type_plugins_store_TenantTypePluginsStore);let tenant_type_plugins_query_TenantTypePluginsQuery=class TenantTypePluginsQuery extends datorama_akita.b{constructor(store){super(store),this.store=store}selectTenantTypePlugins(){return this.selectAll()}selectTenantTypePluginsById(id){return this.selectEntity(id)}};var tenant_type_plugins_manager_a,tenant_type_plugins_manager_b,tenant_type_plugins_manager_c;tenant_type_plugins_query_TenantTypePluginsQuery=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_plugins_query_a=void 0!==tenant_type_plugins_store_TenantTypePluginsStore&&tenant_type_plugins_store_TenantTypePluginsStore)?tenant_type_plugins_query_a:Object])],tenant_type_plugins_query_TenantTypePluginsQuery);let tenant_type_plugins_manager_TenantTypePluginsManager=class TenantTypePluginsManager{constructor(tenantTypePluginsStore,tenantTypePluginsQuery,organisationService){this.tenantTypePluginsStore=tenantTypePluginsStore,this.tenantTypePluginsQuery=tenantTypePluginsQuery,this.organisationService=organisationService}getLoading(){return this.tenantTypePluginsQuery.selectLoading()}getLoaded(){return this.tenantTypePluginsQuery.select("loaded")}getUpdating(){return this.tenantTypePluginsQuery.select("updating")}getMasterPlugins(){return this.tenantTypePluginsQuery.select("masterPlugins")}getTenantTypePluginLoaded(tenantId){return this.tenantTypePluginsQuery.select("tenantPlugins").pipe(Object(map.a)(v=>!!v&&!!v[tenantId]))}setLoading(value){this.tenantTypePluginsStore.update({loading:value})}setUpdating(value){this.tenantTypePluginsStore.update({updating:value})}getTenantTypePlugins(tenantId,force=!1){let loaded=!1;return this.getTenantTypePluginLoaded(tenantId).pipe(Object(take.a)(1)).subscribe(res=>loaded=res),loaded&&!force||(this.searchSubscription&&(this.setLoading(!1),this.searchSubscription.unsubscribe()),this.fetchTenantTypePlugins(tenantId,force)),this.tenantTypePluginsQuery.selectTenantTypePluginsById(tenantId)}fetchTenantTypePlugins(tenantTypeId,force=!1){let loading=!1,masterPluginsLoaded=!1;this.getLoading().pipe(Object(take.a)(1)).subscribe(res=>loading=res),this.getMasterPlugins().pipe(Object(take.a)(1)).subscribe(res=>masterPluginsLoaded=!!res&&!!res.length),loading||(this.setLoading(!0),this.searchSubscription=this.organisationService.getTenantTypeModulesAndPlugins(tenantTypeId).subscribe(res=>{this.tenantTypePluginsStore.update({masterPlugins:res.master}),this.tenantTypePluginsStore.add({id:tenantTypeId,modules:res.tenants.Modules,plugins:res.tenants.Plugins}),this.setLoading(!1)},err=>{this.setLoading(!1)}))}updateTenantTypePlugins(tenantTypeId,data){return this.setUpdating(!0),this.organisationService.updateTenantTypeModulesAndPlugins(tenantTypeId,data).pipe(Object(tap.a)(()=>{this.setUpdating(!1),this.tenantTypePluginsStore.upsert(tenantTypeId,{id:tenantTypeId,modules:data.tenants.Modules,plugins:data.tenants.Plugins})},err=>{this.setUpdating(!1)}))}ngOnDestroy(){}};var modules_plug_ins_component_b,modules_plug_ins_component_c,modules_plug_ins_component_d,modules_plug_ins_component_e,_f,_g;tenant_type_plugins_manager_TenantTypePluginsManager=Object(tslib_es6.c)([Object(core.Injectable)(),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_plugins_manager_a=void 0!==tenant_type_plugins_store_TenantTypePluginsStore&&tenant_type_plugins_store_TenantTypePluginsStore)?tenant_type_plugins_manager_a:Object,"function"==typeof(tenant_type_plugins_manager_b=void 0!==tenant_type_plugins_query_TenantTypePluginsQuery&&tenant_type_plugins_query_TenantTypePluginsQuery)?tenant_type_plugins_manager_b:Object,"function"==typeof(tenant_type_plugins_manager_c=void 0!==organisation_service.a&&organisation_service.a)?tenant_type_plugins_manager_c:Object])],tenant_type_plugins_manager_TenantTypePluginsManager);let modules_plug_ins_component_ModulesPlugInsComponent=class ModulesPlugInsComponent extends unsubscribe.a{constructor(tenantTypeManager,tenantTypePluginsManager,router,route,messageService,translatePipe){super(),this.tenantTypeManager=tenantTypeManager,this.tenantTypePluginsManager=tenantTypePluginsManager,this.router=router,this.route=route,this.messageService=messageService,this.translatePipe=translatePipe,this.selectTenantType=new fesm5_forms.FormControl,this.buttonType=public_api.c,this.formIsSaved=!1,this.tenantTypeOptions=[],this.masterPlugins=[],this.modules=[],this.plugins=[],this.modulesForm=new fesm5_forms.FormGroup({}),this.pluginsForm=new fesm5_forms.FormGroup({}),this.editAllowed=privilege_utils.a.hasViewPrivileges([privilege_enum.a.SUBSCRIPTIONS,privilege_enum.a.MASTER_MANAGEMENT,privilege_enum.a.EDIT]);const currentNavigation=this.router.getCurrentNavigation();if(currentNavigation){const state=currentNavigation.extras.state;state&&state.tenantTypeId&&(this.tenantTypeId=+state.tenantTypeId)}}canDeactivate(){return!!this.formIsSaved||!((this.modulesForm.touched&&this.modulesForm.dirty||this.pluginsForm.touched&&this.pluginsForm.dirty)&&!this.formIsSaved)}ngOnInit(){this.getFilterOptions(),this.selectTenantType.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{res?this.tenantTypePluginsManager.getTenantTypePlugins(+res).pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(v=>!!v)).subscribe(data=>{data.modules.forEach(module=>{this.modulesForm.addControl(module.masterId+"",new fesm5_forms.FormControl(module.active))}),data.plugins.forEach(module=>{this.pluginsForm.addControl(module.masterId+"",new fesm5_forms.FormControl(module.active))}),this.modules=data.modules,this.plugins=data.plugins,this.editAllowed||(this.modulesForm.disable(),this.pluginsForm.disable())}):(this.modules=[],this.plugins=[])}),this.tenantTypeId&&this.selectTenantType.setValue(this.tenantTypeId+"")}searchQueryChanged($event){}reset(){this.modules.forEach(module=>{this.modulesForm.patchValue({[module.masterId]:module.active})}),this.plugins.forEach(module=>{this.pluginsForm.patchValue({[module.masterId]:module.active})})}update(action){if(this.modulesForm.touched||this.pluginsForm.touched,this.selectTenantType.value){const tenantTypeId=+this.selectTenantType.value,moduleForm=this.modulesForm.getRawValue(),pluginForm=this.pluginsForm.getRawValue(),data=this.transformTenantPlugins(moduleForm,pluginForm);this.tenantTypePluginsManager.updateTenantTypePlugins(tenantTypeId,data).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{console.log("updated",res),this.formIsSaved=!0,this.messageService.success(this.translatePipe.transform("MODULES_PLUGINS_UPDATED")),"back"===action?this.router.navigate(["../tenant-types"],{relativeTo:this.route}):this.router.navigate(["../integrations"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}})})}else this.messageService.warning(this.translatePipe.transform("PLEASE_CHOOSE_TENANT_TYPE"))}getFilterOptions(){this.tenantTypeManager.getTenantTypes().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.tenantTypeOptions=this.transformTenantList(res)}),this.tenantTypePluginsManager.getMasterPlugins().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.masterPlugins=res})}transformTenantList(data){return data.map(type=>({label:type.name,value:type.id+""}))}transformTenantPlugins(moduleForm,pluginForm){const Modules=[],Plugins=[];return Object.keys(moduleForm).forEach(id=>{Modules.push({masterId:+id,active:moduleForm[id]})}),Object.keys(pluginForm).forEach(id=>{Plugins.push({masterId:+id,active:pluginForm[id]})}),{tenants:{Modules:Modules,Plugins:Plugins}}}onCancelPopup(){}onConfirmPopup(){}};Object(tslib_es6.c)([Object(core.HostListener)("window:beforeunload",["$event"]),Object(tslib_es6.f)("design:type",Function),Object(tslib_es6.f)("design:paramtypes",[]),Object(tslib_es6.f)("design:returntype",Object)],modules_plug_ins_component_ModulesPlugInsComponent.prototype,"canDeactivate",null),modules_plug_ins_component_ModulesPlugInsComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-modules-plug-ins",template:(__webpack_require__(1536).default||__webpack_require__(1536)).length?__webpack_require__(1536).default||__webpack_require__(1536):"",styles:[(__webpack_require__(1537).default||__webpack_require__(1537)).length?__webpack_require__(1537).default||__webpack_require__(1537):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(modules_plug_ins_component_b=void 0!==tenant_type_manager_TenantTypeManager&&tenant_type_manager_TenantTypeManager)?modules_plug_ins_component_b:Object,"function"==typeof(modules_plug_ins_component_c=void 0!==tenant_type_plugins_manager_TenantTypePluginsManager&&tenant_type_plugins_manager_TenantTypePluginsManager)?modules_plug_ins_component_c:Object,"function"==typeof(modules_plug_ins_component_d=void 0!==fesm5_router.i&&fesm5_router.i)?modules_plug_ins_component_d:Object,"function"==typeof(modules_plug_ins_component_e=void 0!==fesm5_router.a&&fesm5_router.a)?modules_plug_ins_component_e:Object,"function"==typeof(_f=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?_f:Object,"function"==typeof(_g=void 0!==translate_pipe.a&&translate_pipe.a)?_g:Object])],modules_plug_ins_component_ModulesPlugInsComponent);let tenant_type_integrations_store_TenantTypeIntegrationsStore=class TenantTypeIntegrationsStore extends datorama_akita.a{constructor(){super({loaded:!1,loading:!1,updating:!1,masterIntegrations:null})}};var tenant_type_integrations_query_a;tenant_type_integrations_store_TenantTypeIntegrationsStore=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(datorama_akita.c)({name:"tenant-type-integrations"}),Object(tslib_es6.f)("design:paramtypes",[])],tenant_type_integrations_store_TenantTypeIntegrationsStore);let tenant_type_integrations_query_TenantTypeIntegrationsQuery=class TenantTypeIntegrationsQuery extends datorama_akita.b{constructor(store){super(store),this.store=store}selectTenantTypeIntegrations(){return this.selectAll()}selectTenantTypeIntegrationsById(id){return this.selectEntity(id)}};var tenant_type_integrations_manager_a,tenant_type_integrations_manager_b,tenant_type_integrations_manager_c;tenant_type_integrations_query_TenantTypeIntegrationsQuery=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_integrations_query_a=void 0!==tenant_type_integrations_store_TenantTypeIntegrationsStore&&tenant_type_integrations_store_TenantTypeIntegrationsStore)?tenant_type_integrations_query_a:Object])],tenant_type_integrations_query_TenantTypeIntegrationsQuery);let tenant_type_integrations_manager_TenantTypeIntegrationsManager=class TenantTypeIntegrationsManager{constructor(tenantTypeIntegrationsStore,tenantTypeIntegrationsQuery,organisationService){this.tenantTypeIntegrationsStore=tenantTypeIntegrationsStore,this.tenantTypeIntegrationsQuery=tenantTypeIntegrationsQuery,this.organisationService=organisationService}getLoading(){return this.tenantTypeIntegrationsQuery.selectLoading()}getLoaded(){return this.tenantTypeIntegrationsQuery.select("loaded")}getUpdating(){return this.tenantTypeIntegrationsQuery.select("updating")}getMasterIntegrations(){return this.tenantTypeIntegrationsQuery.select("masterIntegrations")}getTenantTypeIntegrationLoaded(tenantId){return this.tenantTypeIntegrationsQuery.selectTenantTypeIntegrationsById(tenantId).pipe(Object(map.a)(v=>!!v))}setLoading(value){this.tenantTypeIntegrationsStore.update({loading:value})}setUpdating(value){this.tenantTypeIntegrationsStore.update({updating:value})}getTenantTypeIntegrations(tenantId,force=!1){let loaded=!1;return this.getTenantTypeIntegrationLoaded(tenantId).pipe(Object(take.a)(1)).subscribe(res=>loaded=res),loaded&&!force||(this.searchSubscription&&(this.setLoading(!1),this.searchSubscription.unsubscribe()),this.fetchTenantTypeIntegrations(tenantId,force)),this.tenantTypeIntegrationsQuery.selectTenantTypeIntegrationsById(tenantId)}fetchTenantTypeIntegrations(tenantId,force=!1){let loading=!1,masterIntegrationsListLoaded=!1;this.getLoading().pipe(Object(take.a)(1)).subscribe(res=>loading=res),this.getMasterIntegrations().pipe(Object(take.a)(1)).subscribe(res=>masterIntegrationsListLoaded=!!res),loading||(this.setLoading(!0),this.searchSubscription=this.organisationService.getTenantTypeIntegrations(tenantId).subscribe(res=>{const tenantIntegrations={id:tenantId,integrations:{}},integrations=Object.keys(res||[]);if(integrations.forEach(integration=>{tenantIntegrations.integrations[integration]=res[integration].selected}),this.tenantTypeIntegrationsStore.add(tenantIntegrations),!masterIntegrationsListLoaded){const masterIntegrations={};integrations.forEach(integration=>{masterIntegrations[integration]=res[integration].masters}),this.tenantTypeIntegrationsStore.update({masterIntegrations:masterIntegrations})}this.setLoading(!1)},err=>{this.setLoading(!1)}))}updateTenantTypeIntegrations(tenantId,data){return this.setUpdating(!0),this.organisationService.updateTenantTypeIntegrations(tenantId,data).pipe(Object(tap.a)(()=>{this.setUpdating(!1);const tenantIntegrations={id:tenantId,integrations:{}};Object.keys(data||[]).forEach(integration=>{tenantIntegrations.integrations[integration]=data[integration].selected}),this.tenantTypeIntegrationsStore.upsert(tenantId,tenantIntegrations)},err=>{this.setUpdating(!1)}))}ngOnDestroy(){}};var integrations_component_a,integrations_component_b,integrations_component_c,integrations_component_d,integrations_component_e,integrations_component_f;tenant_type_integrations_manager_TenantTypeIntegrationsManager=Object(tslib_es6.c)([Object(core.Injectable)(),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_integrations_manager_a=void 0!==tenant_type_integrations_store_TenantTypeIntegrationsStore&&tenant_type_integrations_store_TenantTypeIntegrationsStore)?tenant_type_integrations_manager_a:Object,"function"==typeof(tenant_type_integrations_manager_b=void 0!==tenant_type_integrations_query_TenantTypeIntegrationsQuery&&tenant_type_integrations_query_TenantTypeIntegrationsQuery)?tenant_type_integrations_manager_b:Object,"function"==typeof(tenant_type_integrations_manager_c=void 0!==organisation_service.a&&organisation_service.a)?tenant_type_integrations_manager_c:Object])],tenant_type_integrations_manager_TenantTypeIntegrationsManager);let integrations_component_IntegrationsComponent=class IntegrationsComponent extends unsubscribe.a{constructor(tenantTypeManager,tenantTypeIntegrationsManager,router,route,messageService,translatePipe){super(),this.tenantTypeManager=tenantTypeManager,this.tenantTypeIntegrationsManager=tenantTypeIntegrationsManager,this.router=router,this.route=route,this.messageService=messageService,this.translatePipe=translatePipe,this.selectTenantType=new fesm5_forms.FormControl,this.buttonType=public_api.c,this.tenantTypeOptions=[],this.integrationsForm=new fesm5_forms.FormGroup({}),this.editAllowed=privilege_utils.a.hasViewPrivileges([privilege_enum.a.SUBSCRIPTIONS,privilege_enum.a.MASTER_MANAGEMENT,privilege_enum.a.EDIT]);const currentNavigation=this.router.getCurrentNavigation();if(currentNavigation){const state=currentNavigation.extras.state;state&&state.tenantTypeId&&(this.tenantTypeId=+state.tenantTypeId)}}ngOnInit(){this.getFilterOptions(),this.selectTenantType.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{res?this.tenantTypeIntegrationsManager.getTenantTypeIntegrations(+res).pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(v=>!!v)).subscribe(data=>{this.integrationsForm=new fesm5_forms.FormGroup({}),Object.keys(data.integrations).forEach(integration=>{this.integrationsForm.removeControl(integration),this.integrationsForm.addControl(""+integration,new fesm5_forms.FormControl(data.integrations[integration]))}),this.integrations=data.integrations}):this.integrations={}}),this.tenantTypeId&&this.selectTenantType.setValue(this.tenantTypeId+"")}searchQueryChanged($event){}integrationSelected(integration,selected){this.editAllowed&&this.integrationsForm.patchValue({[integration]:[selected]})}reset(){this.integrations?Object.keys(this.integrations).forEach(integration=>{this.integrationsForm.patchValue({[integration]:this.integrations[integration]})}):this.messageService.warning(this.translatePipe.transform("PLEASE_CHOOSE_TENANT_TYPE"))}update(action){if(this.selectTenantType.value){const tenantTypeId=+this.selectTenantType.value,integrationForm=this.integrationsForm.getRawValue(),data=this.transformIntegrations(integrationForm);this.tenantTypeIntegrationsManager.updateTenantTypeIntegrations(tenantTypeId,data).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.messageService.success(this.translatePipe.transform("INTEGRATIONS_UPDATED_SUCCESSFULLY")),"back"===action?this.router.navigate(["../modules-and-plug-ins"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}}):this.router.navigate(["../user-rights-and-privileges"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}})})}else this.messageService.warning(this.translatePipe.transform("PLEASE_CHOOSE_TENANT_TYPE"))}getFilterOptions(){this.tenantTypeManager.getTenantTypes().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.tenantTypeOptions=this.transformTenantList(res)}),this.tenantTypeIntegrationsManager.getMasterIntegrations().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.masterIntegrations=res})}transformTenantList(data){return data.map(type=>({label:type.name,value:type.id+""}))}transformIntegrations(integrationForm){const selected={};return Object.keys(integrationForm).forEach(key=>{selected[key]={selected:integrationForm[key]}}),selected}};integrations_component_IntegrationsComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-integrations",template:(__webpack_require__(1538).default||__webpack_require__(1538)).length?__webpack_require__(1538).default||__webpack_require__(1538):"",styles:[(__webpack_require__(1539).default||__webpack_require__(1539)).length?__webpack_require__(1539).default||__webpack_require__(1539):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(integrations_component_a=void 0!==tenant_type_manager_TenantTypeManager&&tenant_type_manager_TenantTypeManager)?integrations_component_a:Object,"function"==typeof(integrations_component_b=void 0!==tenant_type_integrations_manager_TenantTypeIntegrationsManager&&tenant_type_integrations_manager_TenantTypeIntegrationsManager)?integrations_component_b:Object,"function"==typeof(integrations_component_c=void 0!==fesm5_router.i&&fesm5_router.i)?integrations_component_c:Object,"function"==typeof(integrations_component_d=void 0!==fesm5_router.a&&fesm5_router.a)?integrations_component_d:Object,"function"==typeof(integrations_component_e=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?integrations_component_e:Object,"function"==typeof(integrations_component_f=void 0!==translate_pipe.a&&translate_pipe.a)?integrations_component_f:Object])],integrations_component_IntegrationsComponent);var user_rights_privileges_component_b,user_rights_privileges_component_c,user_rights_privileges_component_d,user_rights_privileges_component_e,user_rights_privileges_component_f,user_rights_privileges_component_g,_h,tenant_type_privileges_manager=__webpack_require__(1691);let user_rights_privileges_component_UserRightsPrivilegesComponent=class UserRightsPrivilegesComponent extends unsubscribe.a{constructor(tenantTypeManager,tenantTypePrivilegesManager,organisationService,router,route,messageService,translatePipe){super(),this.tenantTypeManager=tenantTypeManager,this.tenantTypePrivilegesManager=tenantTypePrivilegesManager,this.organisationService=organisationService,this.router=router,this.route=route,this.messageService=messageService,this.translatePipe=translatePipe,this.formValueChanged=!1,this.selectTenantType=new fesm5_forms.FormControl,this.buttonType=public_api.c,this.formIsSaved=!1,this.tenantTypeOptions=[],this.selectedPrivileges=[],this.editAllowed=privilege_utils.a.hasViewPrivileges([privilege_enum.a.SUBSCRIPTIONS,privilege_enum.a.MASTER_MANAGEMENT,privilege_enum.a.EDIT]);const currentNavigation=this.router.getCurrentNavigation();if(currentNavigation){const state=currentNavigation.extras.state;state&&state.tenantTypeId&&(this.tenantTypeId=+state.tenantTypeId)}}canDeactivate(){return!this.formValueChanged&&!this.formIsSaved||!(this.formValueChanged&&!this.formIsSaved)}ngOnInit(){this.getFilterOptions(),this.selectTenantType.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{res?this.tenantTypePrivilegesManager.getTenantTypePrivileges(+res).pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(v=>!!v)).subscribe(data=>{this.privileges=data,this.previousPrivileges=[...data]}):(this.privileges=[],this.previousPrivileges=[])}),this.tenantTypeId&&this.selectTenantType.setValue(this.tenantTypeId+"")}reset(){this.selectTenantType.value?(this.selectedPrivileges=[],this.privileges=[],setTimeout(()=>{this.privileges=[...this.previousPrivileges]})):this.messageService.warning(this.translatePipe.transform("PLEASE_CHOOSE_TENANT_TYPE"))}update(action){if(this.selectTenantType.value){const tenantTypeId=+this.selectTenantType.value,data={privileges:this.tenantTypePrivilegesManager.transformPrivilege(this.privileges,this.selectedPrivileges)};this.tenantTypePrivilegesManager.updateTenantTypePrivileges(tenantTypeId,data).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.formIsSaved=!0,this.messageService.success(this.translatePipe.transform("PRIVILEGES_UPDATED")),"back"===action?this.router.navigate(["../integrations"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}}):this.router.navigate(["../role-templates"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}})})}else this.messageService.warning(this.translatePipe.transform("PLEASE_CHOOSE_TENANT_TYPE"))}searchQueryChanged($event){}getFilterOptions(){this.tenantTypeManager.getTenantTypes().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.tenantTypeOptions=this.transformTenantList(res)}),this.tenantTypePrivilegesManager.getPrivilegeRoles().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.privilegeRoles=res})}transformTenantList(data){return data.map(type=>({label:type.name,value:type.id+""}))}updatePrivilegeList(event){this.formValueChanged=!0;const index=this.selectedPrivileges.map(p=>p.privilegeId).indexOf(event.privilegeId);-1!==index?this.selectedPrivileges[index]=Object.assign(Object.assign({},event),{roleIds:event.roleIds}):this.selectedPrivileges.push(event),console.log(this.selectedPrivileges,event)}};Object(tslib_es6.c)([Object(core.HostListener)("window:beforeunload",["$event"]),Object(tslib_es6.f)("design:type",Function),Object(tslib_es6.f)("design:paramtypes",[]),Object(tslib_es6.f)("design:returntype",Object)],user_rights_privileges_component_UserRightsPrivilegesComponent.prototype,"canDeactivate",null),user_rights_privileges_component_UserRightsPrivilegesComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-user-rights-privileges",template:(__webpack_require__(1540).default||__webpack_require__(1540)).length?__webpack_require__(1540).default||__webpack_require__(1540):"",styles:[(__webpack_require__(1541).default||__webpack_require__(1541)).length?__webpack_require__(1541).default||__webpack_require__(1541):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(user_rights_privileges_component_b=void 0!==tenant_type_manager_TenantTypeManager&&tenant_type_manager_TenantTypeManager)?user_rights_privileges_component_b:Object,"function"==typeof(user_rights_privileges_component_c=void 0!==tenant_type_privileges_manager.a&&tenant_type_privileges_manager.a)?user_rights_privileges_component_c:Object,"function"==typeof(user_rights_privileges_component_d=void 0!==organisation_service.a&&organisation_service.a)?user_rights_privileges_component_d:Object,"function"==typeof(user_rights_privileges_component_e=void 0!==fesm5_router.i&&fesm5_router.i)?user_rights_privileges_component_e:Object,"function"==typeof(user_rights_privileges_component_f=void 0!==fesm5_router.a&&fesm5_router.a)?user_rights_privileges_component_f:Object,"function"==typeof(user_rights_privileges_component_g=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?user_rights_privileges_component_g:Object,"function"==typeof(_h=void 0!==translate_pipe.a&&translate_pipe.a)?_h:Object])],user_rights_privileges_component_UserRightsPrivilegesComponent);let tenant_type_roles_store_TenantTypeRolesStore=class TenantTypeRolesStore extends datorama_akita.a{constructor(){super({loaded:!1,loading:!1,updating:!1})}};var tenant_type_roles_query_a;tenant_type_roles_store_TenantTypeRolesStore=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(datorama_akita.c)({name:"tenant-type-roles"}),Object(tslib_es6.f)("design:paramtypes",[])],tenant_type_roles_store_TenantTypeRolesStore);let tenant_type_roles_query_TenantTypeRolesQuery=class TenantTypeRolesQuery extends datorama_akita.b{constructor(store){super(store),this.store=store}selectTenantTypeRoles(tenantTypeId){return this.selectAll().pipe(Object(map.a)(roles=>roles.filter(r=>r.tenantTypeId===tenantTypeId)))}};var tenant_type_roles_manager_a,tenant_type_roles_manager_b,tenant_type_roles_manager_c;tenant_type_roles_query_TenantTypeRolesQuery=Object(tslib_es6.c)([Object(core.Injectable)({providedIn:"root"}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_roles_query_a=void 0!==tenant_type_roles_store_TenantTypeRolesStore&&tenant_type_roles_store_TenantTypeRolesStore)?tenant_type_roles_query_a:Object])],tenant_type_roles_query_TenantTypeRolesQuery);let tenant_type_roles_manager_TenantTypeRolesManager=class TenantTypeRolesManager{constructor(tenantTypeRolesStore,tenantTypeRolesQuery,organisationService){this.tenantTypeRolesStore=tenantTypeRolesStore,this.tenantTypeRolesQuery=tenantTypeRolesQuery,this.organisationService=organisationService}getLoading(){return this.tenantTypeRolesQuery.selectLoading()}getLoaded(){return this.tenantTypeRolesQuery.select("loaded")}getUpdating(){return this.tenantTypeRolesQuery.select("updating")}getTenantTypeRoleLoaded(tenantTypeId){return this.tenantTypeRolesQuery.selectAll().pipe(Object(map.a)(v=>!!v.filter(role=>role.tenantTypeId===tenantTypeId).length))}setLoading(value){this.tenantTypeRolesStore.update({loading:value})}setUpdating(value){this.tenantTypeRolesStore.update({updating:value})}getTenantTypeRoles(tenantTypeId,force=!1){let loaded=!1;return this.getTenantTypeRoleLoaded(tenantTypeId).pipe(Object(take.a)(1)).subscribe(res=>loaded=res),loaded&&!force||(this.searchSubscription&&(this.setLoading(!1),this.searchSubscription.unsubscribe()),this.fetchTenantTypeRoles(tenantTypeId,force)),this.tenantTypeRolesQuery.selectAll()}fetchTenantTypeRoles(tenantId,force=!1){let loading=!1;this.getLoading().pipe(Object(take.a)(1)).subscribe(res=>loading=res),loading||(this.setLoading(!0),this.searchSubscription=this.organisationService.getTenantTypeRoles(tenantId).subscribe(res=>{this.tenantTypeRolesStore.upsertMany(res),this.setLoading(!1)},err=>{this.setLoading(!1)}))}updateTenantTypeRoleActive(tenantTypeId,data,active){return this.setUpdating(!0),this.organisationService.updateTenantTypeRoleActive(tenantTypeId,data.id,active).pipe(Object(tap.a)(()=>{this.setUpdating(!1);const updatedData=Object.assign(Object.assign({},data),{tenantTypeId:tenantTypeId,active:{value:active}});this.tenantTypeRolesStore.upsert(data.id,updatedData)},err=>{this.setUpdating(!1)}))}createTenantTypeRole(tenantTypeId,data){return this.setUpdating(!0),this.organisationService.createTenantTypeRoleWithPrivileges(tenantTypeId,data).pipe(Object(tap.a)(res=>{this.setUpdating(!1);const active={value:!!data.active};this.tenantTypeRolesStore.upsert(res.id,Object.assign(Object.assign({},data),{tenantTypeId:tenantTypeId,active:active}))},err=>{this.setUpdating(!1)}))}updateTenantTypeRole(tenantId,roleId,data){return this.setUpdating(!0),this.organisationService.updateTenantTypeRoleWithPrivileges(tenantId,roleId,data).pipe(Object(tap.a)(()=>{this.setUpdating(!1),this.tenantTypeRolesStore.upsert(roleId,Object.assign({},data))},err=>{this.setUpdating(!1)}))}ngOnDestroy(){}};var role_templates_component_a,role_templates_component_b,role_templates_component_c,role_templates_component_d,role_templates_component_e,role_templates_component_f;tenant_type_roles_manager_TenantTypeRolesManager=Object(tslib_es6.c)([Object(core.Injectable)(),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_roles_manager_a=void 0!==tenant_type_roles_store_TenantTypeRolesStore&&tenant_type_roles_store_TenantTypeRolesStore)?tenant_type_roles_manager_a:Object,"function"==typeof(tenant_type_roles_manager_b=void 0!==tenant_type_roles_query_TenantTypeRolesQuery&&tenant_type_roles_query_TenantTypeRolesQuery)?tenant_type_roles_manager_b:Object,"function"==typeof(tenant_type_roles_manager_c=void 0!==organisation_service.a&&organisation_service.a)?tenant_type_roles_manager_c:Object])],tenant_type_roles_manager_TenantTypeRolesManager);let role_templates_component_RoleTemplatesComponent=class RoleTemplatesComponent extends unsubscribe.a{constructor(tenantTypeManager,tenantTypeRolesManager,router,route,messageService,translatePipe){super(),this.tenantTypeManager=tenantTypeManager,this.tenantTypeRolesManager=tenantTypeRolesManager,this.router=router,this.route=route,this.messageService=messageService,this.translatePipe=translatePipe,this.isLoading=!0,this.selectTenantType=new fesm5_forms.FormControl,this.buttonType=public_api.c,this.showAdd=!1,this.tenantTypeOptions=[],this.editAllowed=privilege_utils.a.hasViewPrivileges([privilege_enum.a.SUBSCRIPTIONS,privilege_enum.a.MASTER_MANAGEMENT,privilege_enum.a.EDIT]),this.headers=[{title:this.translatePipe.transform("ROLE_NAME"),type:public_api.s.TEXT,property:"name",showSort:!0},{title:this.translatePipe.transform("ACTIVE"),type:public_api.s.COMPONENT,property:"active",component:public_api.f},{title:this.translatePipe.transform("TYPE"),type:public_api.s.TEXT,property:"typeName",showSort:!0},{title:this.translatePipe.transform("SUB_TYPE"),type:public_api.s.TEXT,property:"subtypeName",showSort:!0},{title:this.translatePipe.transform("DESCRIPTION"),type:public_api.s.QUILL_TEXT,property:"description",showSort:!0},{title:this.translatePipe.transform("ACTIONS"),type:public_api.s.ACTIONS,property:"",actions:[{title:this.translatePipe.transform("EDIT"),type:public_api.r.BUTTON}]}],this.data=[],this.showPagination=!1,this.enableSelect=!1,this.formIsDirty=!1;const currentNavigation=this.router.getCurrentNavigation();if(currentNavigation){const state=currentNavigation.extras.state;state&&state.tenantTypeId&&(this.tenantTypeId=+state.tenantTypeId)}}ngOnInit(){this.getFilterOptions(),this.tenantTypeRolesManager.getLoading().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.isLoading=res,console.log(res)}),this.selectTenantType.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{res?this.tenantTypeRolesManager.getTenantTypeRoles(+res).pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(v=>!!v.length)).subscribe(data=>{console.log("UPDATED ROLE LIST",data),this.roles=data.filter(role=>role.tenantTypeId===+res),this.data=[...this.roles]}):(this.roles=[],this.data=[])}),this.tenantTypeId&&this.selectTenantType.setValue(this.tenantTypeId+""),this.editAllowed||(this.headers=this.headers.filter(s=>"Actions"===s.title))}actionClicked(event){console.log("Action Clicked",event),this.selectedRole=event.data,this.showAdd=!0}customAction(event){const tenantTypeId=+this.selectTenantType.value;this.tenantTypeRolesManager.updateTenantTypeRoleActive(tenantTypeId,event.data,event.active).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe()}filters(event){console.log("EVENT",event),event.search?this.data=[...this.roles.filter(role=>role.name.toLowerCase().includes(event.search.toLowerCase())||(role.id+"").toLowerCase().includes(event.search.toLowerCase())||(role.description+"").toLowerCase().includes(event.search.toLowerCase()))]:this.data=[...this.roles]}searchQueryChanged($event){}add(){this.selectTenantType.value?(this.selectedRole=null,this.showAdd=!0):this.messageService.warning(this.translatePipe.transform("PLEASE_CHOOSE_TENANT_TYPE"))}back(){this.router.navigate(["../user-rights-and-privileges"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}})}next(){this.router.navigate(["../survey"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}})}getFilterOptions(){this.tenantTypeManager.getTenantTypes().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.tenantTypeOptions=this.transformTenantList(res)})}transformTenantList(data){return data.map(type=>({label:type.name,value:type.id+"",active:{value:type.active,disable:!this.editAllowed}}))}onClose(){this.formIsDirty?this.showModal=!0:this.showAdd=!1}onCancelPopup(){this.showModal=!1}onConfirmPopup(){this.showModal=!1,this.showAdd=!1,this.formIsDirty=!1}formDirtyStateChanged(event){this.formIsDirty=event}};var navigation_component_a,navigation_component_b,navigation_component_c;role_templates_component_RoleTemplatesComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-role-templates",template:(__webpack_require__(1542).default||__webpack_require__(1542)).length?__webpack_require__(1542).default||__webpack_require__(1542):"",styles:[(__webpack_require__(1543).default||__webpack_require__(1543)).length?__webpack_require__(1543).default||__webpack_require__(1543):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(role_templates_component_a=void 0!==tenant_type_manager_TenantTypeManager&&tenant_type_manager_TenantTypeManager)?role_templates_component_a:Object,"function"==typeof(role_templates_component_b=void 0!==tenant_type_roles_manager_TenantTypeRolesManager&&tenant_type_roles_manager_TenantTypeRolesManager)?role_templates_component_b:Object,"function"==typeof(role_templates_component_c=void 0!==fesm5_router.i&&fesm5_router.i)?role_templates_component_c:Object,"function"==typeof(role_templates_component_d=void 0!==fesm5_router.a&&fesm5_router.a)?role_templates_component_d:Object,"function"==typeof(role_templates_component_e=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?role_templates_component_e:Object,"function"==typeof(role_templates_component_f=void 0!==translate_pipe.a&&translate_pipe.a)?role_templates_component_f:Object])],role_templates_component_RoleTemplatesComponent);let navigation_component_NavigationComponent=class NavigationComponent{constructor(router,route,translatePipe){this.router=router,this.route=route,this.translatePipe=translatePipe,this.selectControl=new fesm5_forms.FormControl,this.buttonType=public_api.c,this.selectOptions=[{label:this.translatePipe.transform("SCHOOL"),value:"School"},{label:this.translatePipe.transform("COLLEGE"),value:"college"}],this.modules=["module 1","module 2","module 3","module 4"],this.plugins=["plugin 1","plugin 2","plugin 3","plugin 4"],this.modulesDict=[]}ngOnInit(){this.createArray(this.modules),this.moduleSwitchFormGroup=new fesm5_forms.FormGroup({})}createArray(array){for(const index of array)this.modulesDict.push({id:index,formControl:new fesm5_forms.FormControl(!1)})}back(){this.router.navigate(["../role-templates"],{relativeTo:this.route})}reset(){}searchQueryChanged($event){}};var survey_component_a,survey_component_b,survey_component_c,survey_component_d,survey_component_e,survey_component_f;navigation_component_NavigationComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-navigation",template:(__webpack_require__(1544).default||__webpack_require__(1544)).length?__webpack_require__(1544).default||__webpack_require__(1544):"",styles:[(__webpack_require__(1545).default||__webpack_require__(1545)).length?__webpack_require__(1545).default||__webpack_require__(1545):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(navigation_component_a=void 0!==fesm5_router.i&&fesm5_router.i)?navigation_component_a:Object,"function"==typeof(navigation_component_b=void 0!==fesm5_router.a&&fesm5_router.a)?navigation_component_b:Object,"function"==typeof(navigation_component_c=void 0!==translate_pipe.a&&translate_pipe.a)?navigation_component_c:Object])],navigation_component_NavigationComponent);let survey_component_SurveyComponent=class SurveyComponent extends unsubscribe.a{constructor(tenantTypeManager,organisationService,router,route,messageService,translatePipe){super(),this.tenantTypeManager=tenantTypeManager,this.organisationService=organisationService,this.router=router,this.route=route,this.messageService=messageService,this.translatePipe=translatePipe,this.type="Pulse",this.selectTenantType=new fesm5_forms.FormControl,this.buttonType=public_api.c,this.showAdd=!1,this.headerType=public_api.g,this.tenantTypeOptions=[],this.isLoading=!0,this.breadcrumbs=[],this.showPagination=!1,this.enableSelect=!1,this.editAllowed=privilege_utils.a.hasViewPrivileges([privilege_enum.a.SUBSCRIPTIONS,privilege_enum.a.MASTER_MANAGEMENT,privilege_enum.a.EDIT]),this.tableHeaders=[{title:this.translatePipe.transform("TEMPLATE"),type:public_api.s.COMPONENT,property:"template",component:public_api.j,left:!0},{title:this.translatePipe.transform("ACTIVE"),type:public_api.s.COMPONENT,component:public_api.f,property:"active"},{title:this.translatePipe.transform("SURVEY_URL"),type:public_api.s.TEXT,property:"surveyUrl"},{title:this.translatePipe.transform("SURVEY_ID"),type:public_api.s.TEXT,property:"surveyId",showSort:!0},{title:this.translatePipe.transform("WEBHOOK_URL"),type:public_api.s.TEXT,property:"webhookUrl",showSort:!0},{title:this.translatePipe.transform("CUSTOM_VARIABLE"),type:public_api.s.COMPONENT,property:"selectedCustomVariable",component:public_api.e},{title:this.translatePipe.transform("ACTIONS"),type:public_api.s.ACTIONS,property:"actions",right:!0,actions:[{title:this.translatePipe.transform("EDIT").toLowerCase(),type:public_api.r.BUTTON,value:"edit"},{title:this.translatePipe.transform("DELETE").toLowerCase(),type:public_api.r.BUTTON,value:"delete"}]}],this.pulseSurveys=[],this.threeSixtySurveys=[],this.deleteSurveyType="",this.pulseData=[],this.threeSixtyData=[];const currentNavigation=this.router.getCurrentNavigation();if(currentNavigation){const state=currentNavigation.extras.state;state&&state.tenantTypeId&&(this.tenantTypeId=+state.tenantTypeId)}}ngOnInit(){this.getFilterOptions(),this.selectTenantType.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{res?(this.tenantTypeId=+res,this.organisationService.getTenantTypeSurveyList(this.tenantTypeId).subscribe(surveys=>{console.log("SURVEYS",surveys),this.threeSixtySurveys=surveys.threeSixty,this.pulseSurveys=surveys.pulse,this.pulseData=this.transformSurvey(surveys.pulse),this.threeSixtyData=this.transformSurvey(surveys.threeSixty),this.pulseData&&this.threeSixtyData&&(this.isLoading=!1)})):(this.pulseSurveys=[],this.threeSixtySurveys=[],this.pulseData=[],this.threeSixtyData=[])}),this.tenantTypeId&&this.selectTenantType.setValue(this.tenantTypeId+""),this.editAllowed||(this.tableHeaders=this.tableHeaders.filter(s=>s.type!==public_api.s.ACTIONS))}actionClicked(event,type){console.log(event),this.type=type,"edit"===event.value?(this.showAdd=!0,this.selectedSurvey=event.data):"delete"===event.value&&(this.showModal=!0,this.deleteData=event.data,this.deleteSurveyType=type)}customActionClicked(event){console.log(event,"customAction");const tenantTypeId=+this.selectTenantType.value;if(event.hasOwnProperty("active"))this.organisationService.updateTenantTypeSurveyStatus(tenantTypeId,event.data.surveyId,event.active).subscribe(res=>{this.messageService.success(this.translatePipe.transform("SURVEY_STATUS_CHANGED")),console.log("CHANGED STATUS")});else{const selected=[...event.selectedCustomVariable.selected],data={selectedCustomVariable:[...new Set(selected.map(v=>JSON.stringify(v)))].map(v=>{const variable=JSON.parse(v);return{name:variable.label,id:variable.value}})};this.organisationService.updateTenantTypeSurvey(tenantTypeId,event.data.surveyId,data).subscribe(res=>console.log("CHANGED CUSTOM VARIABLE"))}}deleteSurvey(data){this.showModal=!1,data&&this.organisationService.deleteTenantTypeSurvey(this.tenantTypeId,data.surveyId).subscribe(value=>{console.log(value,"deleted"),"ThreeSixty"===this.deleteSurveyType&&(this.threeSixtyData=this.threeSixtyData.filter(x=>x.surveyId!==data.surveyId)),"Pulse"===this.deleteSurveyType&&(this.pulseData=this.pulseData.filter(x=>x.surveyId!==data.surveyId))})}searchQueryChanged($event){}pulseFiltersChanged(event){console.log("EVENT",event),event.search?this.pulseData=this.transformSurvey([...this.pulseSurveys.filter(pulse=>pulse.name.toLowerCase().includes(event.search.toLowerCase())||(pulse.template+"").toLowerCase().includes(event.search.toLowerCase()))]):this.pulseData=this.transformSurvey([...this.pulseSurveys])}threeSixtyFiltersChanged(event){console.log("EVENT",event),event.search?this.threeSixtyData=this.transformSurvey([...this.threeSixtySurveys.filter(type=>type.name.toLowerCase().includes(event.search.toLowerCase())||(type.template+"").toLowerCase().includes(event.search.toLowerCase()))]):this.threeSixtyData=this.transformSurvey([...this.threeSixtySurveys])}add(type){this.type=type,this.selectTenantType.value?(this.showAdd=!0,this.selectedSurvey=null):this.messageService.warning(this.translatePipe.transform("PLEASE_CHOOSE_TENANT_TYPE"))}onClose(event){console.log("triggered"),this.formIsDirty?this.showFormDirtyModal=!0:(this.showAdd=!1,this.updateSurveyList(event))}updateSurveyList(survey){"ThreeSixty"===survey.type?(this.threeSixtySurveys.forEach(threeSixtySurvey=>{threeSixtySurvey.surveyId===survey.id&&(threeSixtySurvey.template=survey.name,threeSixtySurvey.minAxisValue=survey.minAxisValue,threeSixtySurvey.maxAxisValue=survey.maxAxisValue)}),this.threeSixtyData=this.transformSurvey(this.threeSixtySurveys)):(this.pulseSurveys.forEach(pulseSurvey=>{pulseSurvey.surveyId===survey.id&&(pulseSurvey.template=survey.name,pulseSurvey.minAxisValue=survey.minAxisValue,pulseSurvey.maxAxisValue=survey.maxAxisValue)}),this.pulseData=this.transformSurvey(this.pulseSurveys))}back(){this.router.navigate(["../role-templates"],{relativeTo:this.route,state:{tenantTypeId:this.selectTenantType.value}})}getFilterOptions(){this.tenantTypeManager.getTenantTypes().pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.tenantTypeOptions=this.transformTenantList(res)})}transformTenantList(data){return data.map(type=>({label:type.name,value:type.id+"",active:{value:type.active,disable:!this.editAllowed}}))}transformSurvey(data){return console.log(data,"data"),data.map(survey=>Object.assign(Object.assign({},survey),{template:{image:survey.surveyIconUrl,fullLogo:!0,title:survey.template,height:24,border:!1},active:{value:survey.active},selectedCustomVariable:{placeholder:"select variables",serverSearch:!1,tags:[...survey.selectedCustomVariable].map(variable=>variable.id+"")},meta:{selectedCustomVariable:{options:[...survey.selectedCustomVariable,...survey.unSelectedCustomVariable].map(variable=>({label:variable.name,value:variable.id+""})),disable:survey.surveyTaken}},actions:{edit:!0,delete:!survey.courseExist}}))}onCancel(){this.showModal=!1}onConfirm(){this.deleteSurvey(this.deleteSurvey(this.deleteData))}formDirtyStateChanged($event){this.formIsDirty=$event}onCancelPopup(){this.showFormDirtyModal=!1}onConfirmPopup(){this.showFormDirtyModal=!1,this.showAdd=!1,this.formIsDirty=!1}};survey_component_SurveyComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-survey",template:(__webpack_require__(1546).default||__webpack_require__(1546)).length?__webpack_require__(1546).default||__webpack_require__(1546):"",styles:[(__webpack_require__(1547).default||__webpack_require__(1547)).length?__webpack_require__(1547).default||__webpack_require__(1547):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(survey_component_a=void 0!==tenant_type_manager_TenantTypeManager&&tenant_type_manager_TenantTypeManager)?survey_component_a:Object,"function"==typeof(survey_component_b=void 0!==organisation_service.a&&organisation_service.a)?survey_component_b:Object,"function"==typeof(survey_component_c=void 0!==fesm5_router.i&&fesm5_router.i)?survey_component_c:Object,"function"==typeof(survey_component_d=void 0!==fesm5_router.a&&fesm5_router.a)?survey_component_d:Object,"function"==typeof(survey_component_e=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?survey_component_e:Object,"function"==typeof(survey_component_f=void 0!==translate_pipe.a&&translate_pipe.a)?survey_component_f:Object])],survey_component_SurveyComponent);var pending_changes_guard=__webpack_require__(1425);const masterManagementRoutes=[{path:"",component:master_management_component_MasterManagementComponent,children:[{path:"",redirectTo:"tenant-types",pathMatch:"full"},{path:"tenant-types",component:tenant_types_component_TenantTypesComponent},{path:"modules-and-plug-ins",component:modules_plug_ins_component_ModulesPlugInsComponent,canDeactivate:[pending_changes_guard.a]},{path:"integrations",component:integrations_component_IntegrationsComponent},{path:"user-rights-and-privileges",component:user_rights_privileges_component_UserRightsPrivilegesComponent,canDeactivate:[pending_changes_guard.a]},{path:"role-templates",component:role_templates_component_RoleTemplatesComponent},{path:"navigation",component:navigation_component_NavigationComponent},{path:"survey",component:survey_component_SurveyComponent}]}];let MasterManagementRoutingModule=class MasterManagementRoutingModule{};MasterManagementRoutingModule=Object(tslib_es6.c)([Object(core.NgModule)({imports:[fesm5_router.l.forChild(masterManagementRoutes)],exports:[fesm5_router.l]})],MasterManagementRoutingModule);var add_new_role_component_a,add_new_role_component_b,add_new_role_component_d,add_new_role_component_e,add_new_role_component_f,add_new_role_component_g,add_new_role_component_h,tenant_type_role_model=__webpack_require__(1702),dropdown_options_service=__webpack_require__(1408),role_utils=__webpack_require__(1427);let add_new_role_component_AddNewRoleComponent=class AddNewRoleComponent extends unsubscribe.a{constructor(dropdownOptionsService,tenantTypeRolesManager,organisationService,translatePipe,messageService){super(),this.dropdownOptionsService=dropdownOptionsService,this.tenantTypeRolesManager=tenantTypeRolesManager,this.organisationService=organisationService,this.translatePipe=translatePipe,this.messageService=messageService,this.selectedTab=new fesm5_forms.FormControl("option-1"),this.errorMessage=this.translatePipe.transform("THIS_FIELD_REQUIRED"),this.closeDrawer=new core.EventEmitter,this.typeOptions=[],this.previouslySelectedPrivileges=[],this.subTypeOptions=[],this.selectedPrivileges=[],this.selectedLeafNodes=[],this.privilegesToTransform=[],this.allPrivileges=[],this.assignedPrivileges=[],this.unAssignedPrivileges=[],this.controls={name:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),typeId:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),subTypeId:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),description:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),selected:new fesm5_forms.FormControl([],[fesm5_forms.Validators.maxLength(1024)]),unselected:new fesm5_forms.FormControl([])},this.form=new fesm5_forms.FormGroup(this.controls),this.formIsDirty=new core.EventEmitter}get role(){return this._role}set role(role){console.log(role),role&&(this._role=role,this.organisationService.getTenantTypeRoleDetails(this.tenantTypeId,role.id).subscribe(res=>{this.form.patchValue(Object.assign(Object.assign({},res),{typeId:res.typeId+"",subTypeId:res.subTypeId+""}),{emitEvent:!1}),this.selectedPrivileges=res.selected?res.selected:[],this.previouslySelectedPrivileges=res.selected?res.selected:[],this.dropdownOptionsService.tenantTypeRolePrivileges(this.tenantTypeId,res.typeId).subscribe(data=>{this.privilegesToTransform=data,this.allPrivileges=role_utils.a.transformPrivilege(data),this.selectedPrivileges.length?(this.assignedPrivileges=role_utils.a.transformPrivilege(role_utils.a.generateAssignedPrivileges(data,this.selectedPrivileges)),this.unAssignedPrivileges=role_utils.a.transformPrivilege(role_utils.a.generateUnAssignedPrivileges(data,this.selectedPrivileges))):(this.assignedPrivileges=[],this.unAssignedPrivileges=[...this.allPrivileges])}),res.userExist&&(this.controls.subTypeId.disable({emitEvent:!1}),this.controls.typeId.disable({emitEvent:!1}))}))}canDeactivate(event){if(this.form.touched&&this.form.dirty)return!1}ngOnInit(){this.getDropDownOptions(),this.controls.typeId.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.typeSubTypes&&(this.subTypeOptions=[...this.typeSubTypes.subTypes].filter(subtype=>subtype.typeId===+res).map(subtype=>({label:subtype.name,value:subtype.id+""})))}),this.controls.subTypeId.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{if(res){const typeId=this.controls.typeId.value;this.dropdownOptionsService.tenantTypeRolePrivileges(this.tenantTypeId,typeId).subscribe(data=>{this.privilegesToTransform=data,this.selectedPrivileges=[],this.allPrivileges=role_utils.a.transformPrivilege(data),this.assignedPrivileges=[],this.unAssignedPrivileges=[...this.allPrivileges]})}}),this.form.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(v=>{this.form.dirty&&this.formIsDirty.emit(!0)})}cancel(){this.closeDrawer.emit("")}addRole(formElement){if(this.form.invalid)utils.a.checkFormValidity(this.form,formElement);else{const dataForApi=this.transformFormData(this.form.getRawValue());console.log(this.form.getRawValue(),dataForApi),this.tenantTypeRolesManager.createTenantTypeRole(this.tenantTypeId,dataForApi).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.messageService.success(this.translatePipe.transform("NEW_ROLE_ADDED_SUCCESS")),this.formIsDirty.emit(!1),this.closeDrawer.emit()})}}editRole(formElement){if(this.form.invalid)utils.a.checkFormValidity(this.form,formElement);else{const dataForApi=this.transformFormData(this.form.getRawValue());console.log(this.form.getRawValue(),dataForApi),this.tenantTypeRolesManager.updateTenantTypeRole(this.tenantTypeId,this.role.id,dataForApi).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{console.log("updated role"),this.messageService.success(this.translatePipe.transform("ROLE_EDITED_SUCCESSFULLY")),this.formIsDirty.emit(!1),this.closeDrawer.emit()})}}onCheckBoxClick(event){console.log("CheckBox",event),this.selectedPrivileges=event;const assignedPrivilegesTree=role_utils.a.generateAssignedPrivileges(this.privilegesToTransform,this.selectedPrivileges);this.assignedPrivileges=role_utils.a.transformPrivilege(assignedPrivilegesTree),this.unAssignedPrivileges=role_utils.a.transformPrivilege(role_utils.a.generateUnAssignedPrivileges(this.privilegesToTransform,this.selectedPrivileges));const selectedChildNodes=role_utils.a.getLeafNodes(assignedPrivilegesTree),selectedLeafNodes=[];Object.keys(selectedChildNodes).forEach(key=>{this.selectedPrivileges.includes(+key)&&selectedLeafNodes.push(...selectedChildNodes[+key])}),this.selectedLeafNodes=selectedLeafNodes}getDropDownOptions(){this.dropdownOptionsService.tenantTypeRoleTypes(this.tenantTypeId).subscribe(res=>{if(console.log(res,"typeSubTypes"),this.typeSubTypes=res,this.typeOptions=[...this.typeSubTypes.types].map(type=>({label:type.name,value:type.id+""})),this.role){const selectedType=this.typeOptions.filter(t=>t.label===this.role.typeName)[0].value;this.subTypeOptions=[...this.typeSubTypes.subTypes].filter(s=>s.typeId===+selectedType).map(subtype=>({label:subtype.name,value:subtype.id+""}))}else this.subTypeOptions=[...this.typeSubTypes.subTypes].map(subType=>({label:subType.name,value:subType.id+""}))})}transformFormData(data){const typeName=this.typeOptions.filter(type=>type.value===data.typeId)[0].label,subtypeName=this.subTypeOptions.filter(subtype=>subtype.value===data.subTypeId)[0].label;return this.selectedLeafNodes.length&&(data.selected=this.selectedLeafNodes.filter(v=>!this.previouslySelectedPrivileges.includes(v))),this.previouslySelectedPrivileges.length&&(data.unselected=this.previouslySelectedPrivileges.filter(v=>!this.selectedLeafNodes.includes(v))),this.role&&(data.active=this.role.active,data.userExist=this.role.userExist),Object.assign(Object.assign({},data),{typeName:typeName,subtypeName:subtypeName})}};var tenant_type_add_component_b,tenant_type_add_component_c,tenant_type_add_component_d,tenant_type_add_component_e,tenant_type_add_component_f;Object(tslib_es6.c)([Object(core.Output)(),Object(tslib_es6.f)("design:type",Object)],add_new_role_component_AddNewRoleComponent.prototype,"closeDrawer",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type",Object)],add_new_role_component_AddNewRoleComponent.prototype,"action",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type",Number)],add_new_role_component_AddNewRoleComponent.prototype,"tenantTypeId",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type","function"==typeof(add_new_role_component_a=void 0!==tenant_type_role_model.TenantTypeRole&&tenant_type_role_model.TenantTypeRole)?add_new_role_component_a:Object),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(add_new_role_component_b=void 0!==tenant_type_role_model.TenantTypeRole&&tenant_type_role_model.TenantTypeRole)?add_new_role_component_b:Object])],add_new_role_component_AddNewRoleComponent.prototype,"role",null),Object(tslib_es6.c)([Object(core.Output)(),Object(tslib_es6.f)("design:type",Object)],add_new_role_component_AddNewRoleComponent.prototype,"formIsDirty",void 0),Object(tslib_es6.c)([Object(core.HostListener)("window:beforeunload",["$event"]),Object(tslib_es6.f)("design:type",Function),Object(tslib_es6.f)("design:paramtypes",[Object]),Object(tslib_es6.f)("design:returntype",Object)],add_new_role_component_AddNewRoleComponent.prototype,"canDeactivate",null),add_new_role_component_AddNewRoleComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-add-new-role",template:(__webpack_require__(1548).default||__webpack_require__(1548)).length?__webpack_require__(1548).default||__webpack_require__(1548):"",styles:[(__webpack_require__(1549).default||__webpack_require__(1549)).length?__webpack_require__(1549).default||__webpack_require__(1549):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(add_new_role_component_d=void 0!==dropdown_options_service.a&&dropdown_options_service.a)?add_new_role_component_d:Object,"function"==typeof(add_new_role_component_e=void 0!==tenant_type_roles_manager_TenantTypeRolesManager&&tenant_type_roles_manager_TenantTypeRolesManager)?add_new_role_component_e:Object,"function"==typeof(add_new_role_component_f=void 0!==organisation_service.a&&organisation_service.a)?add_new_role_component_f:Object,"function"==typeof(add_new_role_component_g=void 0!==translate_pipe.a&&translate_pipe.a)?add_new_role_component_g:Object,"function"==typeof(add_new_role_component_h=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?add_new_role_component_h:Object])],add_new_role_component_AddNewRoleComponent);let tenant_type_add_component_TenantTypeAddComponent=class TenantTypeAddComponent extends unsubscribe.a{constructor(route,router,tenantTypeManager,translatePipe,messageService){super(),this.route=route,this.router=router,this.tenantTypeManager=tenantTypeManager,this.translatePipe=translatePipe,this.messageService=messageService,this.buttonType=public_api.c,this.controls={name:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),description:new fesm5_forms.FormControl("",fesm5_forms.Validators.required)},this.form=new fesm5_forms.FormGroup(this.controls),this.closeDrawer=new core.EventEmitter,this.formIsDirty=new core.EventEmitter}get tenantType(){return this._tenantType}set tenantType(tenantType){console.log(tenantType),tenantType&&(this._tenantType=tenantType,this.form.patchValue({name:tenantType.name,description:tenantType.description}))}canDeactivate(event){if(this.form.touched&&this.form.dirty)return!1}ngOnInit(){this.form.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(v=>{this.form.dirty&&this.formIsDirty.emit(!0)})}onCancel(){this.closeDrawer.emit("")}addTenantType(formElement){this.form.invalid?utils.a.checkFormValidity(this.form,formElement):this.tenantTypeManager.createTenantType(this.form.value).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{console.log(res),this.formIsDirty.emit(!1),this.router.navigate(["../modules-and-plug-ins"],{relativeTo:this.route,state:{tenantTypeId:res.id}}),this.closeDrawer.emit("")})}editTenantType(formElement){this.form.invalid?utils.a.checkFormValidity(this.form,formElement):this.tenantTypeManager.updateTenantType(this.tenantType.id,this.form.value).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{console.log(res),this.formIsDirty.emit(!1),this.closeDrawer.emit("")})}duplicateTenantType(formElement){this.form.invalid?utils.a.checkFormValidity(this.form,formElement):this.tenantTypeManager.duplicateTenantType(this.tenantType.id,this.form.value).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.messageService.success(this.translatePipe.transform("TENANT_TYPE_DUPLICATED")),console.log(res),this.formIsDirty.emit(!1),this.closeDrawer.emit("")})}};var add_survey_component_a,add_survey_component_e;Object(tslib_es6.c)([Object(core.Output)(),Object(tslib_es6.f)("design:type",Object)],tenant_type_add_component_TenantTypeAddComponent.prototype,"closeDrawer",void 0),Object(tslib_es6.c)([Object(core.Output)(),Object(tslib_es6.f)("design:type",Object)],tenant_type_add_component_TenantTypeAddComponent.prototype,"formIsDirty",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type",Object)],tenant_type_add_component_TenantTypeAddComponent.prototype,"action",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type",Object),Object(tslib_es6.f)("design:paramtypes",[Object])],tenant_type_add_component_TenantTypeAddComponent.prototype,"tenantType",null),Object(tslib_es6.c)([Object(core.HostListener)("window:beforeunload",["$event"]),Object(tslib_es6.f)("design:type",Function),Object(tslib_es6.f)("design:paramtypes",[Object]),Object(tslib_es6.f)("design:returntype",Object)],tenant_type_add_component_TenantTypeAddComponent.prototype,"canDeactivate",null),tenant_type_add_component_TenantTypeAddComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-tenant-type-add",template:(__webpack_require__(1550).default||__webpack_require__(1550)).length?__webpack_require__(1550).default||__webpack_require__(1550):"",styles:[(__webpack_require__(1551).default||__webpack_require__(1551)).length?__webpack_require__(1551).default||__webpack_require__(1551):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(tenant_type_add_component_b=void 0!==fesm5_router.a&&fesm5_router.a)?tenant_type_add_component_b:Object,"function"==typeof(tenant_type_add_component_c=void 0!==fesm5_router.i&&fesm5_router.i)?tenant_type_add_component_c:Object,"function"==typeof(tenant_type_add_component_d=void 0!==tenant_type_manager_TenantTypeManager&&tenant_type_manager_TenantTypeManager)?tenant_type_add_component_d:Object,"function"==typeof(tenant_type_add_component_e=void 0!==translate_pipe.a&&translate_pipe.a)?tenant_type_add_component_e:Object,"function"==typeof(tenant_type_add_component_f=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?tenant_type_add_component_f:Object])],tenant_type_add_component_TenantTypeAddComponent);let add_survey_component_AddSurveyComponent=class AddSurveyComponent extends unsubscribe.a{constructor(organisationService){super(),this.organisationService=organisationService,this.selectMode=public_api.o,this.buttonType=public_api.c,this.closeDrawer=new core.EventEmitter,this.surveyOptions=[],this.customVariableOptions=[],this.formIsDirty=new core.EventEmitter,this.defaultSurveys=[],this.controls={template:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),survey:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),selectedCustomVariable:new fesm5_forms.FormControl([],fesm5_forms.Validators.required),surveyIconUrl:new fesm5_forms.FormControl(""),minAxisValue:new fesm5_forms.FormControl("",fesm5_forms.Validators.required),maxAxisValue:new fesm5_forms.FormControl("",fesm5_forms.Validators.required)},this.form=new fesm5_forms.FormGroup(this.controls)}get survey(){return this._survey}set survey(survey){if(console.log("EDIT SURVEY DATA",survey),survey){this._survey=survey;const formValue=Object.assign(Object.assign({},survey),{template:survey.template.title,selectedCustomVariable:survey.selectedCustomVariable.tags,survey:survey.surveyId+""});this.form.patchValue(Object.assign({},formValue)),survey.surveyTaken&&this.controls.selectedCustomVariable.disable(),this.surveyId=survey.surveyId,this.customVariableOptions=survey.meta.selectedCustomVariable.options.filter(x=>!!x.label&&!!x.value)}}canDeactivate(event){if(this.form.touched&&this.form.dirty)return!1}ngOnInit(){this.survey?this.controls.survey.disable():(this.getDropDownOptions(),this.controls.survey.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.surveyId=this.survey?this.survey.surveyId:+res,this.customVariableOptions=[...this.defaultSurveys].filter(s=>s.id===+res)[0].customParams.map(v=>({label:v.name,value:v.id+""}))})),this.form.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(v=>{this.form.dirty&&this.formIsDirty.emit(!0)})}cancel(){this.closeDrawer.emit("")}addSurvey(formElement){if(this.form.invalid)utils.a.checkFormValidity(this.form,formElement);else{const selectedCustomVariableIds=[...this.form.value.selectedCustomVariable],survey={template:this.form.value.template,type:this.type,surveyIconUrl:this.form.value.surveyIconUrl,minAxisValue:this.form.value.minAxisValue,maxAxisValue:this.form.value.maxAxisValue,selectedCustomVariable:[...this.customVariableOptions].filter(v=>selectedCustomVariableIds.includes(v.value)).map(v=>({id:+v.value,name:v.label}))};this.organisationService.createTenantTypeSurvey(this.tenantTypeId,this.surveyId,survey).subscribe(value=>{console.log("added",value),this.formIsDirty.emit(!1),this.closeDrawer.emit()})}}editSurvey(formElement){if(this.form.invalid)utils.a.checkFormValidity(this.form,formElement);else{const survey={template:this.form.value.template,surveyIconUrl:this.form.value.surveyIconUrl,minAxisValue:this.form.value.minAxisValue,maxAxisValue:this.form.value.maxAxisValue,selectedCustomVariable:this.customVariableOptions.filter(variable=>this.form.value.selectedCustomVariable.includes(variable.value)).map(variable=>({id:+variable.value,name:variable.label}))};this.organisationService.updateTenantTypeSurvey(this.tenantTypeId,this.surveyId,survey).subscribe(value=>{this.formIsDirty.emit(!1),this.closeDrawer.emit({id:this.surveyId,name:survey.template,type:this.type,minAxisValue:survey.minAxisValue,maxAxisValue:survey.maxAxisValue})})}}getDropDownOptions(){this.organisationService.getTenantTypeDefaultSurveyList(this.tenantTypeId).subscribe(res=>{this.defaultSurveys=res.surveys,this.surveyOptions=this.defaultSurveys.map(survey=>({label:survey.name,value:survey.id+""}))})}uploadSurveyLogo(){this.squareLogoInput.nativeElement.click()}removeSurveyLogo(){const icon={name:this.controls.surveyIconUrl.value};icon.name&&this.organisationService.deleteLogoOfTenantTypeSurvey(this.tenantTypeId,this.surveyId,icon).subscribe(value=>{console.log("removed",value),this.form.patchValue({surveyIconUrl:null})})}addSquareLogo(event){const file=event.target.files[0],formData=new FormData;if(file){const fileReader=new FileReader;fileReader.onload=f=>{formData.append("file",file),this.surveyIcon=formData,this.organisationService.updateLogoOfTenantTypeSurvey(this.tenantTypeId,this.surveyId,this.surveyIcon).subscribe(value=>{console.log(value),this.form.patchValue({surveyIconUrl:value.surveyIconUrl})})},fileReader.readAsDataURL(file)}}};Object(tslib_es6.c)([Object(core.ViewChild)("squareLogoInput"),Object(tslib_es6.f)("design:type","function"==typeof(add_survey_component_a=void 0!==core.ElementRef&&core.ElementRef)?add_survey_component_a:Object)],add_survey_component_AddSurveyComponent.prototype,"squareLogoInput",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type",Number)],add_survey_component_AddSurveyComponent.prototype,"tenantTypeId",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type",String)],add_survey_component_AddSurveyComponent.prototype,"type",void 0),Object(tslib_es6.c)([Object(core.Input)(),Object(tslib_es6.f)("design:type","function"!=typeof!1&&Object),Object(tslib_es6.f)("design:paramtypes",["function"!=typeof!1&&Object])],add_survey_component_AddSurveyComponent.prototype,"survey",null),Object(tslib_es6.c)([Object(core.Output)(),Object(tslib_es6.f)("design:type",Object)],add_survey_component_AddSurveyComponent.prototype,"closeDrawer",void 0),Object(tslib_es6.c)([Object(core.Output)(),Object(tslib_es6.f)("design:type",Object)],add_survey_component_AddSurveyComponent.prototype,"formIsDirty",void 0),Object(tslib_es6.c)([Object(core.HostListener)("window:beforeunload",["$event"]),Object(tslib_es6.f)("design:type",Function),Object(tslib_es6.f)("design:paramtypes",[Object]),Object(tslib_es6.f)("design:returntype",Object)],add_survey_component_AddSurveyComponent.prototype,"canDeactivate",null),add_survey_component_AddSurveyComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-add-survey",template:(__webpack_require__(1552).default||__webpack_require__(1552)).length?__webpack_require__(1552).default||__webpack_require__(1552):"",styles:[(__webpack_require__(1553).default||__webpack_require__(1553)).length?__webpack_require__(1553).default||__webpack_require__(1553):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(add_survey_component_e=void 0!==organisation_service.a&&organisation_service.a)?add_survey_component_e:Object])],add_survey_component_AddSurveyComponent);const COMPONENTS=[...[master_management_component_MasterManagementComponent],...[tenant_types_component_TenantTypesComponent,tenant_type_add_component_TenantTypeAddComponent,modules_plug_ins_component_ModulesPlugInsComponent,integrations_component_IntegrationsComponent,user_rights_privileges_component_UserRightsPrivilegesComponent,role_templates_component_RoleTemplatesComponent,navigation_component_NavigationComponent,add_new_role_component_AddNewRoleComponent,survey_component_SurveyComponent,add_survey_component_AddSurveyComponent]];let MasterManagementModule=class MasterManagementModule{};MasterManagementModule=Object(tslib_es6.c)([Object(core.NgModule)({declarations:[...COMPONENTS],imports:[common.b,shared_module.a,MasterManagementRoutingModule],providers:[]})],MasterManagementModule)}}]);
//# sourceMappingURL=13.8083e24f987c35a716b3.bundle.js.map