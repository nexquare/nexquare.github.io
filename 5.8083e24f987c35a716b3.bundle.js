(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1421:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SkillsService}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_api_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(217);let SkillsService=class SkillsService{constructor(apiService){this.apiService=apiService,this.skill_sub_url="controller/api/skill"}getSkillsList(){return this.apiService.get("controller/api/courses/components/skills")}getSkill(skillId){return this.apiService.get(`${this.skill_sub_url}/${skillId}`)}createSkill(competencyId,data){return this.apiService.post(`${this.skill_sub_url}/competencies/${competencyId}`,data)}updateSkills(competencyId,data){return this.apiService.put(`${this.skill_sub_url}/competencies/${competencyId}`,data)}getSkillsListForCourse(courseId){return this.apiService.get(`${this.skill_sub_url}/learning-contents/${courseId}`)}getSkillsListForCompetency(competencyId){return this.apiService.get(`${this.skill_sub_url}/competencies/${competencyId}`)}deleteSkill(skillId){return this.apiService.delete(`${this.skill_sub_url}/${skillId}`,null,!0,null,!0,"application/text")}};SkillsService=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)({providedIn:"root"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.f)("design:paramtypes",["function"==typeof(_a=void 0!==_api_service__WEBPACK_IMPORTED_MODULE_2__.a&&_api_service__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object])],SkillsService)},1512:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<nxq-learning-header [headerSettings]="headerSettings" (tagLineButton)="seeDetails()" *ngIf="!isHeaderLoading">\n  <div class="nxq-cp-ctr">\n    <div class="nxq-cp-ctr-body" *ngIf="!showIframe && !isLoading && !!content">\n      <div class="nxq-cp-ctr-body-filter-buttons">\n        <nxq-button [type]="buttonType.PRIMARY" (click)="goBack()">{{ \'BACK\' | translate }}</nxq-button>\n        <nxq-button *ngIf="!!content.channelName" [type]="buttonType.PRIMARY" (click)="goChannel()">{{\n          \'GO_TO_CHANNEL\' | translate\n        }}</nxq-button>\n      </div>\n      <div class="nxq-cp-ctr-body-section">\n        <nxq-collapse [background]="false" [active]="true" *ngIf="selfAllowed">\n          <div slot="header">\n            <nxq-header [title]="\'SELF_REVIEW\' | translate" [headerType]="headerType.SECTION"></nxq-header>\n          </div>\n          <div slot="content" class="nxq-cp-ctr-body-content">\n            <nxq-table\n              [tableHeaders]="selfRatingHeaders"\n              [tableData]="selfRatingData"\n              [showPagination]="showPagination"\n              [enableSelect]="enableSelect"\n              (actionClicked)="selfActionClicked($event)"\n              (filtersChanged)="filters($event)"\n              (rowsSelected)="rowsSelected($event)"\n              [hideTableSearch]="true"\n            ></nxq-table>\n          </div>\n        </nxq-collapse>\n        <nxq-collapse [background]="false" [active]="true" *ngIf="othersAllowed">\n          <div slot="header">\n            <nxq-header [title]="\'REVIEW_FROM_OTHERS\' | translate" [headerType]="headerType.SECTION"></nxq-header>\n          </div>\n          <div slot="content" class="nxq-cp-ctr-body-content">\n            <nxq-table\n              [tableHeaders]="ratingFromOthersHeaders"\n              [tableData]="ratingFromOthersData"\n              [showPagination]="showPagination"\n              [enableSelect]="enableSelect"\n              (actionClicked)="FromActionClicked($event)"\n              (filtersChanged)="filters($event)"\n            ></nxq-table>\n            <nxq-button *ngIf="whoDoesAllocation" (click)="requestReviewClicked()">{{ \'REQUEST_REVIEWS\' | translate }}</nxq-button>\n          </div>\n        </nxq-collapse>\n      </div>\n    </div>\n    <div class="nxq-cp-ctr-body" *ngIf="showIframe">\n      \x3c!--      <div class="nxq-cp-ctr-body-filter">--\x3e\n      \x3c!--        <nxq-button [type]="buttonType.PRIMARY" *ngIf="showIframe" (click)="closeIframe()">{{ \'BACK\' | translate }}</nxq-button>--\x3e\n      \x3c!--      </div>--\x3e\n      <nxq-survey-iframe [url]="url"></nxq-survey-iframe>\n    </div>\n    <div class="nxq-spinner-cp" *ngIf="isLoading">\n      <nxq-loading></nxq-loading>\n    </div>\n  </div>\n  <nz-modal\n    [(nzVisible)]="showModal"\n    [nzContent]="modalContent"\n    [nzFooter]="modalFooter"\n    (nzOnCancel)="onCancel()"\n    nzWidth="400px"\n    nzHeight="300px"\n    class="confirm-popup"\n    nzClassName="confirm-modal"\n  >\n    <ng-template #modalContent>\n      {{ \'REJECT_REQUEST\' | translate }}\n    </ng-template>\n\n    <ng-template #modalFooter>\n      <nxq-button type="primary" (click)="onCancel()">{{ \'CANCEL\' | translate }}</nxq-button>\n      <nxq-button type="secondary" (click)="onConfirm()">{{ \'CONFIRM\' | translate }}</nxq-button>\n    </ng-template>\n  </nz-modal>\n  <nxq-content-details [contentID]="courseId" (drawerVisibility)="closeDrawer()" [drawerVisible]="showDetails"></nxq-content-details>\n</nxq-learning-header>\n<div class="nxq-spinner-cp" *ngIf="isHeaderLoading">\n  <nxq-loading></nxq-loading>\n</div>\n\n<nz-drawer\n  [nzBodyStyle]="{ height: \'calc(100% - 55px)\', overflow: \'auto\', \'padding-bottom\': \'53px\' }"\n  [nzClosable]="false"\n  [nzMaskClosable]="true"\n  [nzWidth]="\'600: 900\'"\n  [nzVisible]="showPopUp"\n  [nzTitle]="\'\'"\n  (nzOnClose)="onClose()"\n>\n  <div class="side-drawer" *ngIf="showPopUp">\n    <div class="add-reviewer">\n      <div class="header">\n        <span>{{ \'ADD_REVIEWERS\' | translate }}</span>\n      </div>\n      \x3c!-- <nxq-filters></nxq-filters> --\x3e\n      <div>\n        <nxq-select [control]="controls.configTitle" [options]="configOptions" [placeholder]="\'SELECT_TITLE\' | translate"></nxq-select>\n      </div>\n      <div class="add-reviewer__tag">\n        <span class="add-reviewer__tag__label">{{ \'INVITE_REVIEWERS\' | translate | uppercase }}</span>\n        <nxq-tags (isDirty)="tagsDirty($event)" (getTags)="emailTags($event)" [displayText]="\'ADD_EMAIL\' | translate"></nxq-tags>\n      </div>\n\n      <div class="content">\n        <span class="add-reviewer__tag__label">{{ \'ADD\' | translate | uppercase }} {{ \'EXISTING_USERS\' | translate | uppercase }}</span>\n        <div class="table">\n          <nxq-table\n            [tableHeaders]="headers"\n            [tableData]="data"\n            enableSelect="true"\n            (customAction)="customActionClicked($event)"\n            (filtersChanged)="reviewerFilters($event)"\n            (actionClicked)="addReviewerActionClicked($event)"\n            (rowsSelected)="addReviewerRowsSelected($event)"\n          ></nxq-table>\n        </div>\n        <div class="buttons">\n          <nxq-button type="primary" (click)="onClose()">{{ \'CANCEL\' | translate }}</nxq-button>\n          <nxq-button type="secondary" (click)="OnBulkUpload()">{{ \'ADD_SELECTED\' | translate }}</nxq-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</nz-drawer>\n\n<nz-modal\n  [(nzVisible)]="showFormDirtyModal"\n  [nzContent]="modalContents"\n  [nzFooter]="modalFooters"\n  (nzOnCancel)="onCancelModal()"\n  nzWidth="400px"\n  nzHeight="300px"\n  class="confirm-popup"\n  nzClassName="confirm-modal"\n>\n  <ng-template #modalContents>\n    You have unsaved data in the form, Are you sure you want to discard the changes?\n  </ng-template>\n\n  <ng-template #modalFooters>\n    <nxq-button type="primary" (click)="onCancelModal()">Cancel</nxq-button>\n    <nxq-button type="secondary" (click)="onConfirmModal()">Confirm</nxq-button>\n  </ng-template>\n</nz-modal>\n'},1513:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.nxq-cp-ctr {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body {\n  padding: 0 30px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-section {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr-body-content {\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n}\n.nxq-cp-ctr-body-content > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body-content > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-filter {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter__buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter__buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter__buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-filter-buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter-buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter-buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-pop-up {\n  margin: 20px 0;\n  padding: 30px;\n  border-radius: 10px;\n  border: 1px solid #2373ff;\n  box-shadow: 0 2px 22px rgba(174, 179, 198, 0.120465);\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-header {\n  color: #2373ff;\n  font-size: 22px;\n  font-weight: bold;\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-header > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-header > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-body {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-body > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-actions {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-pop-up-actions > * {\n  margin-right: 30px;\n}\n.nxq-pop-up-actions > *:last-child {\n  margin-right: 0;\n}\n.add-reviewer {\n  display: flex;\n  flex-direction: column;\n}\n.add-reviewer > * {\n  margin-bottom: 20px;\n}\n.add-reviewer > *:last-child {\n  margin-bottom: 0;\n}\n.add-reviewer .header {\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 22px;\n  color: #2373ff;\n}\n.add-reviewer__tag {\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n}\n.add-reviewer__tag > * {\n  margin-bottom: 10px;\n}\n.add-reviewer__tag > *:last-child {\n  margin-bottom: 0;\n}\n.add-reviewer .content {\n  display: flex;\n  flex-direction: column;\n}\n.add-reviewer .content > * {\n  margin-bottom: 20px;\n}\n.add-reviewer .content > *:last-child {\n  margin-bottom: 0;\n}\n.add-reviewer .content .table {\n  overflow-x: scroll;\n}\n.add-reviewer .content .buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n  padding: 10px 20px 10px 20px;\n  background: #ffffff;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  border-top: 1px solid lightgray;\n  box-shadow: 0px 0px 10px 2px rgba(187, 187, 187, 0.7);\n  z-index: 1;\n}\n.add-reviewer .content .buttons > * {\n  margin-right: 13px;\n}\n.add-reviewer .content .buttons > *:last-child {\n  margin-right: 0;\n}"},1514:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<nxq-learning-header [headerSettings]="headerSettings" (tagLineButton)="seeDetails()" *ngIf="!isHeaderLoading" [headerMarginBottom]="false">\n  <div class="nxq-cp-ctr">\n    <div class="nxq-cp-ctr-body" *ngIf="!isLoading">\n      <div class="nxq-cp-ctr-body-content">\n        <div class="nxq-cp-ctr-body-content-card">\n          \x3c!--          <div class="nxq-cp-ctr-body-filter">--\x3e\n          \x3c!--            <nxq-button [type]="buttonType.PRIMARY" (click)="goBack()">{{ \'BACK\' | translate }}</nxq-button>--\x3e\n          \x3c!--            <nxq-button *ngIf="!!content.channelName" [type]="buttonType.PRIMARY" (click)="goChannel()">{{--\x3e\n          \x3c!--              \'GO_TO_CHANNEL\' | translate--\x3e\n          \x3c!--            }}</nxq-button>--\x3e\n          \x3c!--          </div>--\x3e\n          <div class="nxq-cp-ctr__buttons">\n            <nxq-button [type]="buttonType.PRIMARY" *ngIf="!takeStatus && retakeAllowed" (click)="takeSurvey()">{{\n              \'RETAKE\' | translate\n            }}</nxq-button>\n            <nxq-button [type]="buttonType.PRIMARY" *ngIf="takeStatus" (click)="takeSurvey()">{{ \'TAKE\' | translate }}</nxq-button>\n            <nxq-button [type]="buttonType.PRIMARY" *ngIf="selfAllowed" (click)="requestReview()">{{\n              \'REQUEST_REVIEWS\' | translate\n            }}</nxq-button>\n          </div>\n          <div class="nxq-cp-ctr-body-filter">\n            \x3c!--<nxq-list-filters [control]="controls.limit" [label]="\'FILTERS\' | translate" [options]="filterOptions"></nxq-list-filters>--\x3e\n            <nxq-tabset-radio-button-group [control]="controls.limit" [tabGroupType]="tabGroupType.MANY">\n              <nxq-radio-button *ngFor="let filter of filterOptions" [value]="filter">{{ filter.label }}</nxq-radio-button>\n            </nxq-tabset-radio-button-group>\n            \x3c!--            <nxq-list-filters--\x3e\n            \x3c!--              [control]="controls.competencyId"--\x3e\n            \x3c!--              [label]="\'COMPETENCY\' | translate"--\x3e\n            \x3c!--              [options]="competencyOptions"--\x3e\n            \x3c!--            ></nxq-list-filters>--\x3e\n            <div class="nxq-cp-ctr-body-filter__buttons">\n              <nxq-icon\n                *ngIf="showSort"\n                [icon]="this.controls.order.value === \'Asc\' ? \'sort-ascending\' : \'sort-descending\'"\n                fontSize="20px"\n                (click)="setOrder()"\n              ></nxq-icon>\n              <nxq-list-filters [control]="controls.sort" [label]="\'OPTIONS\' | translate" [options]="sortByOptions"></nxq-list-filters>\n            </div>\n            \x3c!--                        <nxq-list-filters [control]="controls.method" [label]="\'METHOD\' | translate" [options]="methodOptions"></nxq-list-filters>--\x3e\n            \x3c!--                        <div class="nxq-cp-ctr-body-filter__buttons">--\x3e\n            \x3c!--                          <nxq-icon--\x3e\n            \x3c!--                            [icon]="this.controls.order.value === \'Asc\' ? \'sort-ascending\' : \'sort-descending\'"--\x3e\n            \x3c!--                            fontSize="20px"--\x3e\n            \x3c!--                            (click)="setOrder()"--\x3e\n            \x3c!--                          ></nxq-icon>--\x3e\n            \x3c!--                          <nxq-list-filters [control]="controls.sort" [label]="\'SORT\' | translate" [options]="sortByOptions"></nxq-list-filters>--\x3e\n            \x3c!--                        </div>--\x3e\n          </div>\n          <ng-container *ngIf="!recursiveView">\n            <div *ngFor="let surveyCard of surveyCards">\n              <div class="nxq-cp-ctr-body-content-card__label">\n                <div class="title" [ngClass]="{ active: surveyCard.id === skillId }">\n                  <span>{{ surveyCard.title }}</span>\n                  <p *ngIf="!!surveyCard.sections.length" class="section">({{ surveyCard.sections }})</p>\n                </div>\n                <div class="nxq-cp-ctr-body-content-card__dash" [ngClass]="{ activeBackground: surveyCard.id === skillId }"></div>\n                <nxq-survey-line\n                  [markers]="surveyCard.marker"\n                  [endLabelLine]="surveyCard.endLabel"\n                  [startLabelLine]="surveyCard.startLabel"\n                  [evidence]="surveyCard.evidence"\n                  [reviews]="surveyCard.review"\n                  [target]="surveyCard.target"\n                  [showInfo]="showInfo"\n                  (getEvidence)="getEvidence(surveyCard.id)"\n                  (getReviews)="getReviews(surveyCard.id)"\n                  (getInfo)="getInfo(surveyCard.id)"\n                  (click)="getRecommended(surveyCard.id)"\n                  [isActive]="skillId === surveyCard.id"\n                ></nxq-survey-line>\n              </div>\n            </div>\n          </ng-container>\n          <ng-container *ngIf="recursiveView">\n            <nxq-recursive-survey-card\n              [cards]="filteredSkillsWithSurvey"\n              [skillId]="skillId"\n              (evidence)="getEvidence($event)"\n              (reviews)="getReviews($event)"\n              (info)="getInfo($event)"\n              (recommended)="getRecommended($event)"\n            ></nxq-recursive-survey-card>\n          </ng-container>\n        </div>\n        <div *ngIf="isSmallScreen" class="nxq-cp-ctr-body-content-widget">\n          <nxq-tabset-radio-button-group [control]="tabSetControl" [tabGroupType]="tabGroupType.PAIR">\n            <nxq-radio-button value="following">{{ \'FOR_YOU\' | translate }}</nxq-radio-button>\n          </nxq-tabset-radio-button-group>\n          <ng-container>\n            <nxq-recommended-widget\n              type="pulse"\n              [setSkillId]="skillId"\n              [setUser]="user.userId"\n              [emptyMessage]="\'Click on skill card to see learning resources recommended for that skill\'"\n            ></nxq-recommended-widget>\n          </ng-container>\n        </div>\n      </div>\n    </div>\n    <div class="nxq-spinner-cp" *ngIf="isLoading">\n      <nxq-loading></nxq-loading>\n    </div>\n  </div>\n  <nxq-content-details [contentID]="courseId" (drawerVisibility)="closeDrawer()" [drawerVisible]="showDetails"></nxq-content-details>\n</nxq-learning-header>\n<div class="nxq-spinner-cp" *ngIf="isHeaderLoading">\n  <nxq-loading></nxq-loading>\n</div>\n\n\x3c!--for you on small screen--\x3e\n<nz-drawer\n  [nzClosable]="false"\n  [nzVisible]="forYouDrawerVisible"\n  nzPlacement="right"\n  [nzWidth]="370"\n  [nzTitle]="forDrawerHeader"\n  (nzOnClose)="forYouCloseDrawer()"\n>\n  <ng-template #forDrawerHeader>\n    <div class="side-drawer-header">\n      <h3>{{ \'FOR_YOU\' | translate }}</h3>\n      <nxq-icon icon="close" fontSize="16px" (click)="forYouCloseDrawer()"></nxq-icon>\n    </div>\n  </ng-template>\n  <nxq-recommended-widget\n    type="pulse"\n    [setSkillId]="skillId"\n    [setUser]="user.userId"\n    [emptyMessage]="\'Click on skill card to see learning resources recommended for that skill\'"\n  ></nxq-recommended-widget>\n</nz-drawer>\n\n<nz-drawer\n  [nzClosable]="false"\n  [nzVisible]="drawerVisible"\n  nzPlacement="right"\n  [nzWidth]="400"\n  [nzTitle]="drawerHeader"\n  (nzOnClose)="onCloseDrawer()"\n>\n  <ng-template #drawerHeader>\n    <div class="side-drawer-header">\n      <h3>{{ drawerTitle }}</h3>\n      <nxq-icon icon="close" fontSize="16px" (click)="onCloseDrawer()"></nxq-icon>\n    </div>\n  </ng-template>\n  <div class="side-drawer" *ngIf="drawerVisible">\n    <div class="side-drawer-content">\n      <ng-container *ngIf="!!evidenceData.length">\n        <div class="side-drawer-card" *ngFor="let data of evidenceData">\n          <ng-container *ngIf="data.type === \'TextInput\'">\n            <h4>{{ data.answer }}</h4>\n            <p>{{ data.question }}</p>\n            \x3c!--            <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n          </ng-container>\n          <ng-container *ngIf="data.type === \'FileInput\'">\n            <a (click)="showModal()"\n              ><h4 class="side-drawer-card-link">{{ fileName(data.answer) | truncate: 36 }}</h4></a\n            >\n            <p>{{ data.question }}</p>\n            \x3c!--            <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n            <nz-modal [(nzVisible)]="isVisible" nzTitle="Attachment" [nzFooter]="null" (nzOnCancel)="handleCancel()" nzWidth="80%">\n              <nxq-resource-display-component [setUrl]="data.answer"></nxq-resource-display-component>\n            </nz-modal>\n          </ng-container>\n        </div>\n      </ng-container>\n      <ng-container *ngIf="!!reviewsData.length">\n        <nxq-collapse [active]="true" *ngFor="let review of reviewsData">\n          <div slot="header">\n            <h4>{{ \'REVIEW\' | translate }} {{ reviewsData.indexOf(review) + 1 }} - {{ review.configTitle }}</h4>\n          </div>\n          <div slot="content" class="side-drawer-content">\n            <div class="side-drawer-card" *ngFor="let data of review.reviews">\n              <ng-container *ngIf="data.type === \'TextInput\'">\n                <h4>{{ data.answer }}</h4>\n                <p>{{ data.question }}</p>\n                \x3c!--                <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n              </ng-container>\n              <ng-container *ngIf="data.type === \'FileInput\'">\n                <a (click)="showModal()"\n                  ><h4 class="side-drawer-card-link">{{ fileName(data.answer) | truncate: 36 }}</h4></a\n                >\n                <p>{{ data.question }}</p>\n                \x3c!--                <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n                <nz-modal\n                  [(nzVisible)]="isVisible"\n                  [nzTitle]="\'ATTACHMENT\' | translate"\n                  [nzFooter]="null"\n                  (nzOnCancel)="handleCancel()"\n                  nzWidth="80%"\n                >\n                  <nxq-resource-display-component [setUrl]="data.answer"></nxq-resource-display-component>\n                </nz-modal>\n              </ng-container>\n            </div>\n          </div>\n        </nxq-collapse>\n      </ng-container>\n      <ng-container *ngIf="isInfo">\n        <div class="side-drawer-column">\n          <span class="side-drawer-label">{{ \'NAME\' | translate | uppercase }}</span>\n          <h4>{{ info.title }}</h4>\n        </div>\n        <div class="side-drawer-column" *ngIf="!!info.description">\n          <span class="side-drawer-label">{{ \'DESCRIPTION\' | translate | uppercase }}</span>\n          <p [innerHTML]="!!info.description ? info.description : \'\'"></p>\n        </div>\n        <div class="side-drawer-column" *ngIf="!!info.competencies.length">\n          <span class="side-drawer-label">{{ \'LINKED_COMPETENCIES\' | translate | uppercase }}</span>\n          <div class="side-drawer-tag">\n            <nz-tag *ngFor="let tag of info.competencies">{{ tag }}</nz-tag>\n          </div>\n        </div>\n      </ng-container>\n      <div class="nxq-spinner-cp" *ngIf="!isInfo && !reviewsData.length && !evidenceData.length">\n        <nxq-loading></nxq-loading>\n      </div>\n    </div>\n  </div>\n</nz-drawer>\n'},1515:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.nxq-cp-ctr {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr > * {\n  margin-bottom: 20px;\n}\n.nxq-cp-ctr > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr__buttons {\n  padding-right: 20px;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin-bottom: 10px;\n}\n.nxq-cp-ctr__buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr__buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body {\n  padding: 0 30px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-filter {\n  padding-right: 20px;\n  width: 100%;\n  flex-wrap: wrap;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  align-content: flex-start;\n  flex-wrap: wrap;\n}\n.nxq-cp-ctr-body-filter__buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter__buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter__buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-filter-buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter-buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter-buttons > *:last-child {\n  margin-right: 0;\n}\n.rtl .nxq-cp-ctr-body-filter {\n  padding-right: 0;\n  padding-left: 20px;\n}\n.nxq-cp-ctr-body-content {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n}\n.nxq-cp-ctr-body-content-card {\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: calc(100vh - 130px);\n  overflow: scroll;\n}\n.nxq-cp-ctr-body-content-card > div {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n}\n.nxq-cp-ctr-body-content-card__label {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  align-content: center;\n  width: 100%;\n  padding: 20px;\n}\n.nxq-cp-ctr-body-content-card__label > * {\n  margin-right: 10px;\n}\n.nxq-cp-ctr-body-content-card__label > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-content-card__label span {\n  max-width: 150px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.nxq-cp-ctr-body-content-card__label span > * {\n  margin-right: 10px;\n}\n.nxq-cp-ctr-body-content-card__label span > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-content-card__label nxq-survey-line {\n  width: 100%;\n}\n.nxq-cp-ctr-body-content-card__label .title {\n  min-width: 150px;\n}\n.nxq-cp-ctr-body-content-card__label .section {\n  margin-top: 5px;\n  font-size: 11px;\n  max-width: 150px;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.nxq-cp-ctr-body-content-card__dash {\n  height: 4px;\n  width: 30px;\n  background: #d9d9d9;\n  border-radius: 4px;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label, .xs .nxq-cp-ctr-body-content-card__label, :host-context(.sm) .nxq-cp-ctr-body-content-card__label, .sm .nxq-cp-ctr-body-content-card__label {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 0;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label > *, .xs .nxq-cp-ctr-body-content-card__label > *, :host-context(.sm) .nxq-cp-ctr-body-content-card__label > *, .sm .nxq-cp-ctr-body-content-card__label > * {\n  margin-bottom: 10px;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label > *:last-child, .xs .nxq-cp-ctr-body-content-card__label > *:last-child, :host-context(.sm) .nxq-cp-ctr-body-content-card__label > *:last-child, .sm .nxq-cp-ctr-body-content-card__label > *:last-child {\n  margin-bottom: 0;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label .title, .xs .nxq-cp-ctr-body-content-card__label .title, :host-context(.sm) .nxq-cp-ctr-body-content-card__label .title, .sm .nxq-cp-ctr-body-content-card__label .title {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label span, .xs .nxq-cp-ctr-body-content-card__label span, :host-context(.sm) .nxq-cp-ctr-body-content-card__label span, .sm .nxq-cp-ctr-body-content-card__label span {\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__dash, .xs .nxq-cp-ctr-body-content-card__dash, :host-context(.sm) .nxq-cp-ctr-body-content-card__dash, .sm .nxq-cp-ctr-body-content-card__dash {\n  height: 20px;\n  width: 4px;\n}\n.nxq-cp-ctr-body-content-widget {\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  align-content: center;\n  border-left: 1px solid #d9d9d9;\n  width: 351px;\n  padding-left: 30px;\n  flex-shrink: 0;\n}\n.nxq-cp-ctr-body-content-widget > * {\n  margin-bottom: 10px;\n}\n.nxq-cp-ctr-body-content-widget > *:last-child {\n  margin-bottom: 0;\n}\n.rtl .nxq-cp-ctr-body-content-widget {\n  border-right: 1px solid #d9d9d9;\n  border-left: none;\n}\n.nxq-cp-ctr-body-content-widget nxq-tabset-radio-button-group {\n  width: 100%;\n}\n.nxq-cp-ctr-body-content-widget nxq-tabset-radio-button-group .ant-radio-group {\n  justify-content: space-between;\n  align-items: center;\n  align-content: center;\n}\n.nxq-cp-ctr-body-content-widget nxq-suggestion-content-card {\n  width: 100%;\n}\n.nxq-cp-ctr-body-content-widget__button {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr .active {\n  color: #2373ff;\n}\n.nxq-cp-ctr .activeBackground {\n  background: #2373ff;\n}\nnxq-icon {\n  cursor: pointer;\n}\nnxq-icon:hover {\n  color: #2373ff;\n}\n.nxq-pop-up {\n  margin: 20px 0;\n  padding: 30px;\n  border-radius: 10px;\n  border: 1px solid #2373ff;\n  box-shadow: 0 2px 22px rgba(174, 179, 198, 0.120465);\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-header {\n  color: #2373ff;\n  font-size: 22px;\n  font-weight: bold;\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-header > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-header > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-body {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-body > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-actions {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-pop-up-actions > * {\n  margin-right: 30px;\n}\n.nxq-pop-up-actions > *:last-child {\n  margin-right: 0;\n}\n.side-drawer {\n  height: calc(100vh - 100px);\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.side-drawer > * {\n  margin-bottom: 20px;\n}\n.side-drawer > *:last-child {\n  margin-bottom: 0;\n}\n.side-drawer-header {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.side-drawer-header > * {\n  margin-right: 30px;\n}\n.side-drawer-header > *:last-child {\n  margin-right: 0;\n}\n.side-drawer-header nxq-icon {\n  cursor: pointer;\n}\n.side-drawer-content {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.side-drawer-content > * {\n  margin-bottom: 20px;\n}\n.side-drawer-content > *:last-child {\n  margin-bottom: 0;\n}\n.side-drawer-card {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 350px;\n  border: 1px solid #d9d9d9;\n  border-radius: 10px;\n}\n.side-drawer-card-link {\n  color: #2373ff;\n}\n.side-drawer-column {\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  max-width: 360px;\n}\n.side-drawer-column > * {\n  margin-bottom: 10px;\n}\n.side-drawer-column > *:last-child {\n  margin-bottom: 0;\n}\n.side-drawer-column p {\n  color: #181921;\n}\n.side-drawer-label {\n  display: flex;\n  flex-direction: row;\n  font-weight: bold;\n  font-size: 12px;\n  line-height: 13px;\n  color: #aeb3c6;\n  max-width: 360px;\n}\n.side-drawer-label > * {\n  margin-right: 15px;\n}\n.side-drawer-label > *:last-child {\n  margin-right: 0;\n}\n.side-drawer-tag {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  max-width: 360px;\n}\n.side-drawer-tag > * {\n  margin-right: 15px;\n}\n.side-drawer-tag > *:last-child {\n  margin-right: 0;\n}\n.side-drawer-tag ::ng-deep .ant-tag {\n  color: #181921;\n  background: #f7f9fc;\n  border: #d9d9d9;\n  max-width: 360px;\n  display: flex;\n  flex-wrap: wrap;\n  white-space: unset;\n  margin-bottom: 10px;\n}"},1718:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PulseDetailsModule",(function(){return PulseDetailsModule}));var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,tslib_es6=__webpack_require__(1),core=__webpack_require__(0),common=__webpack_require__(6),shared_module=__webpack_require__(587),fesm5_router=__webpack_require__(35),public_api=__webpack_require__(12),fesm5_forms=__webpack_require__(5),pulse_service=__webpack_require__(1417),subscribed_manager=__webpack_require__(1411),takeUntil=__webpack_require__(29),filter=__webpack_require__(44),take=__webpack_require__(85),subscribed_query=__webpack_require__(1409),unsubscribe=__webpack_require__(216),batches_service=__webpack_require__(1406),account_manager=__webpack_require__(218),privilege_enum=__webpack_require__(47),privilege_utils=__webpack_require__(87),translate_pipe=__webpack_require__(215),ng_zorro_antd_message=__webpack_require__(185),ng_zorro_antd_notification=__webpack_require__(1399),combineLatest=__webpack_require__(93),forkJoin=__webpack_require__(569);let home_component_HomeComponent=class HomeComponent extends unsubscribe.a{constructor(pulseService,subscribedManager,subscribedQuery,accountManager,route,batchesService,nzMessageService,notification,router,translatePipe){super(),this.pulseService=pulseService,this.subscribedManager=subscribedManager,this.subscribedQuery=subscribedQuery,this.accountManager=accountManager,this.route=route,this.batchesService=batchesService,this.nzMessageService=nzMessageService,this.notification=notification,this.router=router,this.translatePipe=translatePipe,this.buttonType=public_api.c,this.headerType=public_api.g,this.showDetails=!1,this.isHeaderLoading=!0,this.tabs=[{title:this.translatePipe.transform("HOME").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.HOME]},{title:this.translatePipe.transform("RESULTS").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.RESULTS]}].filter(t=>privilege_utils.a.hasViewPrivileges(t.keys)).map(t=>t.title),this.headerSettings={pageTitle:this.translatePipe.transform("HOME"),tabset:this.tabs,breadcrumbs:[{label:this.translatePipe.transform("LEARNING"),url:"learning"}],tabSetControl:new fesm5_forms.FormControl("home"),tagLine:null,tagLineButton:this.translatePipe.transform("SEE_DETAILS"),banner:"",isByte:!0},this.showPopUp=!1,this.showIframe=!1,this.selfRating=[],this.fromOthers=[],this.showPagination=!1,this.enableSelect=!1,this.selfRatingHeaders=[{title:this.translatePipe.transform("STATUS"),type:public_api.s.TEXT,property:"status",showSort:!0},{title:this.translatePipe.transform("ACTIONS"),type:public_api.s.ACTIONS,property:"actions",actions:[{title:this.translatePipe.transform("TAKE"),type:public_api.r.BUTTON,value:"take"},{title:this.translatePipe.transform("RETAKE"),type:public_api.r.BUTTON,value:"retake"}]}],this.selfRatingData=[],this.fromOtherUserIds=[],this.ratingFromOthersHeaders=[{title:this.translatePipe.transform("NAME"),type:public_api.s.COMPONENT,property:"name",component:public_api.j},{title:this.translatePipe.transform("TITLE"),type:public_api.s.TEXT,property:"configuredTitle",showSort:!0},{title:this.translatePipe.transform("STATUS"),type:public_api.s.TEXT,property:"status",showSort:!0}],this.ratingFromOthersData=[],this.configuredControl=new fesm5_forms.FormControl("type1"),this.configuredOptions=[{label:"type 1",value:"type1"},{label:"type 2",value:"type2"}],this.conditions=[{label:"typ1",value:"typ1"}],this.configuredFilterOptions=[{value:"typ1",label:"typ1",conditions:this.conditions,options:this.conditions}],this.headers=[{title:this.translatePipe.transform("USER_NAME").toUpperCase(),type:public_api.s.TEXT,property:"userName",showSort:!0},{title:this.translatePipe.transform("DESIGNATION").toUpperCase(),type:public_api.s.TEXT,property:"designation",showSort:!0},{title:this.translatePipe.transform("EMAIL").toUpperCase(),type:public_api.s.TEXT,property:"email",showSort:!0},{title:"",type:public_api.s.ACTIONS,property:"",actions:[{title:this.translatePipe.transform("ADD"),type:public_api.r.BUTTON,value:"add"}]}],this.tenantUsers=[],this.data=[],this.selectedUserIds=[],this.controls={configTitle:new fesm5_forms.FormControl(null,fesm5_forms.Validators.required)},this.configForm=new fesm5_forms.FormGroup(this.controls),this.whoDoesAllocation=!1,this.othersAllowed=!1,this.selfAllowed=!1}ngOnInit(){this.contentId=this.route.parent.snapshot.paramMap.get("id"),this.pathwayId=this.route.parent.snapshot.paramMap.get("pathwayId"),this.courseId=+this.route.parent.snapshot.paramMap.get("id").split("-")[0],this.headerSettings.tabSetControl.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(value=>{let route=`dashboard/learning/collection/${this.contentId}/pulse`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/pulse`),"results"===value?this.router.navigate([route,"results"]).then():"aggregated-results"===value?this.router.navigate([route,"aggregated-results"]).then():"two-by-two"===value?this.router.navigate([route,"two-by-two"]).then():this.router.navigate([route,"home"]).then()}),this.bindedMessageListner=this.messageListener.bind(this),window.addEventListener("message",this.bindedMessageListner),this.accountManager.getAccount().pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(u=>!!u)).subscribe(user=>{this.user=user}),this.subscribedQuery.selectIsLoading$.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(l=>{this.isHeaderLoading=l,console.log(this.isLoading)}),Object(combineLatest.b)([this.batchesService.getAllTenantUsers(),this.subscribedManager.getsubscribedById(this.contentId)]).pipe(Object(filter.a)(v=>!!v[1]),Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(value=>{this.batchId=value[1].batchId,this.headerSettings=Object.assign(Object.assign({},this.headerSettings),{banner:value[1].providerLogo?value[1].providerLogo:"",tagLine:value[1].batchName,pageTitle:value[1].name}),this.enrollmentId=value[1].enrollmentId,this.content=value[1],this.getPulseDetails(),value[1].courseId&&(this.isLoading=!1),this.tenantUsers=value[0].users.filter(user=>this.user.userId!==user.userId).map(user=>Object.assign(Object.assign({},user),{id:user.userId}));this.route.parent.snapshot.queryParamMap.get("requestReview")&&this.requestReviewClicked();this.route.parent.snapshot.queryParamMap.get("requestReview")})}setUser(){this.data=[...this.tenantUsers.filter(res=>!this.fromOtherUserIds.includes(res.id))],console.log("user",this.data),console.log("user",this.fromOtherUserIds)}getPulseDetails(){console.log("getPulseDetails"),this.pulseService.getPulseDetails(this.courseId).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(result=>{this.getFromOthers(),this.getSelf(),this.pulseDetails=result,"Self"===result.whoDoesAllocation?(this.whoDoesAllocation=!0,this.ratingFromOthersHeaders=[...this.ratingFromOthersHeaders,{title:this.translatePipe.transform("ACTIONS"),type:public_api.s.ACTIONS,property:"actions",actions:[{title:this.translatePipe.transform("DELETE"),type:public_api.r.BUTTON,value:"delete"}]}]):this.ratingFromOthersHeaders=[...this.ratingFromOthersHeaders].filter(r=>"actions"!==r.property),this.selfAllowed=result.allowSelf,this.othersAllowed=result.allowOthers,this.allowRetake=result.allowRetake,this.configOptions=result.allowOthersList.map(data=>({label:data.title,value:data.otherId}))})}getSelf(){this.pulseService.getAllocationBySelf(this.batchId).subscribe(result=>{this.selfRating=result,this.selfRatingData=result.map(value=>{const canTake="Pending"===value.status,canReTake="Completed"===value.status&&this.allowRetake;return{id:value.id,status:value.status,actions:{take:canTake,retake:canReTake}}})})}getFromOthers(){this.pulseService.getAllocationFromOthers(this.enrollmentId).subscribe(result=>{this.fromOthers=[...result],this.fromOtherUserIds=result.map(value=>value.reviewedBy.id),this.setUser(),this.ratingFromOthersData=result.map(value=>{const isPending="Pending"===value.status;return{id:value.id,name:{image:value.reviewedBy.imageUrl?value.reviewedBy.imageUrl:"./assets/placeholder.svg",fullLogo:!1,title:value.reviewedBy.firstName+" "+value.reviewedBy.lastName,height:24,round:!0},configuredTitle:value.pulseTittle.title,status:value.status,emailRequestPending:value.emailRequestPending,actions:{delete:isPending}}})})}selfActionClicked(item){"take"===item.value||"retake"===item.value?(console.log("take clicked"),this.isLoading=!0,this.notification.warning(this.translatePipe.transform("CAUTION"),this.translatePipe.transform("SURVEY_PRIVATE_MODE_MESSAGE")),this.pulseService.takeSelfReview(this.batchId,this.courseId).subscribe(res=>{this.url=res.surveyUrl,this.showIframe=!0,this.isLoading=!1})):(console.log(item.data.id),this.pulseService.rejectReview(item.data.id))}FromActionClicked(item){"delete"===item.value&&(this.showModal=!0,this.deleteId=item.data.id,this.deleteTypeEmail=item.data.emailRequestPending)}filters($event){}rowsSelected($event){}onClose(){this.formIsDirty||this.tagDirty?this.showFormDirtyModal=!0:(this.showPopUp=!1,this.setRoute())}onEnroll(users,type){const data=[...users].map(reqUser=>({requestedFor:{id:this.user.userId},reviewedBy:{id:reqUser.id},pulse:{id:this.content.byteObject.id},allowOtherPulse:{id:this.controls.configTitle.value},batch:{id:this.batchId}})),selectedConfigTitle=this.controls.configTitle.value,total=selectedConfigTitle?this.pulseDetails.allowOthersList.filter(t=>t.otherId===selectedConfigTitle).length:null,alreadyRequested=selectedConfigTitle?this.fromOthers.filter(t=>t.feedbackTittle.id===selectedConfigTitle).length:null,selected=(this.supporterEmails?this.supporterEmails.length:0)+(data?data.length:0),canRequest=total-(alreadyRequested+selected)>=0,remaining=total-alreadyRequested;console.log(selectedConfigTitle,total,alreadyRequested,selected,canRequest,remaining),canRequest?this.supporterEmails?Object(forkJoin.a)({externEmail:this.pulseService.addSupporter({batchId:this.content.batchId,configTitleId:this.controls.configTitle.value,learningContentId:this.courseId,emails:this.supporterEmails}),existingUser:this.pulseService.addReviewer(this.batchId,this.courseId,data)}).subscribe(result=>{this.getFromOthers(),this.supporterEmails=[],"bulk"===type&&(this.showPopUp=!1,this.setRoute(),this.nzMessageService.success(this.translatePipe.transform("YOUR_REQUEST_IS_SUCCESSFULLY_SUBMITTED")))}):this.pulseService.addReviewer(this.batchId,this.courseId,data).subscribe(res=>{this.getFromOthers(),"bulk"===type&&(this.showPopUp=!1,this.setRoute(),this.nzMessageService.success(this.translatePipe.transform("YOUR_REQUEST_IS_SUCCESSFULLY_SUBMITTED")))}):this.nzMessageService.warning(this.translatePipe.transform("YOU_CAN_ONLY_REQUEST")+" "+remaining+" "+this.translatePipe.transform("FOR_THIS_TITLE"))}emailTags(emails){this.supporterEmails=emails,console.log(this.supporterEmails)}customActionClicked(event){event.group&&(this.data=this.data.map(user=>user.id===event.data.id?Object.assign(Object.assign({},user),{group:event.group}):user)),console.log(event,this.data)}reviewerFilters(event){event.search?this.data=[...this.data.filter(user=>user.userName.toLowerCase().includes(event.search.toLowerCase())||user.email.toLowerCase().includes(event.search.toLowerCase()))]:this.data=[...this.tenantUsers]}addReviewerRowsSelected(event){this.selectedUserIds=event,this.formIsDirty=!0}addReviewerActionClicked(item){"add"===item.value&&this.onEnroll([item.data],"single")}OnBulkUpload(){if(this.configForm.valid){const selectedUsers=[...this.data].filter(user=>this.selectedUserIds.includes(user.id));this.onEnroll(selectedUsers,"bulk")}else this.configForm.setErrors([{error:this.translatePipe.transform("CONFIG_ERROR")}])}closeIframe(){this.showIframe=!1,this.url=null}seeDetails(){this.showDetails=!0}closeDrawer(){this.showDetails=!1}requestReviewClicked(){this.showPopUp=!0}cancelPopUp(){this.showPopUp=!1}goBack(){this.pathwayId?this.router.navigate(["dashboard/learning/pathway",this.pathwayId]).then(r=>{}):this.router.navigate(["dashboard/learning/collection"]).then(r=>{})}goChannel(){this.router.navigate(["dashboard","connect"],{state:{channel:this.content.channelName}}).then(r=>{})}onConfirm(){this.deleteTypeEmail?this.pulseService.deleteSupporter(this.deleteId).pipe(Object(take.a)(1)).subscribe(res=>{this.getFromOthers(),this.nzMessageService.success("Delete Successful")}):this.pulseService.deleteReviewRequest(this.deleteId).pipe(Object(take.a)(1)).subscribe(res=>{console.log("success"),this.getFromOthers(),this.nzMessageService.success("Delete Successful")}),this.showModal=!1}onCancel(){this.showModal=!1}messageListener(messageEvent){console.log("Listen IFrame EVENT",messageEvent);if("Survey Submitted Successfully"===messageEvent.data){this.showIframe=!1,this.getSelf();this.contentId}}tagsDirty($event){this.tagDirty=$event}onConfirmModal(){this.showFormDirtyModal=!1,this.formIsDirty=!1,this.showPopUp=!1,this.setRoute()}onCancelModal(){this.showFormDirtyModal=!1}setRoute(){let route=`dashboard/learning/collection/${this.contentId}/pulse`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/pulse`),this.router.navigate([route,"home"]).then()}};home_component_HomeComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-home",template:(__webpack_require__(1512).default||__webpack_require__(1512)).length?__webpack_require__(1512).default||__webpack_require__(1512):"",styles:[(__webpack_require__(1513).default||__webpack_require__(1513)).length?__webpack_require__(1513).default||__webpack_require__(1513):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(_a=void 0!==pulse_service.a&&pulse_service.a)?_a:Object,"function"==typeof(_b=void 0!==subscribed_manager.a&&subscribed_manager.a)?_b:Object,"function"==typeof(_c=void 0!==subscribed_query.a&&subscribed_query.a)?_c:Object,"function"==typeof(_d=void 0!==account_manager.a&&account_manager.a)?_d:Object,"function"==typeof(_e=void 0!==fesm5_router.a&&fesm5_router.a)?_e:Object,"function"==typeof(_f=void 0!==batches_service.a&&batches_service.a)?_f:Object,"function"==typeof(_g=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?_g:Object,"function"==typeof(_h=void 0!==ng_zorro_antd_notification.b&&ng_zorro_antd_notification.b)?_h:Object,"function"==typeof(_j=void 0!==fesm5_router.i&&fesm5_router.i)?_j:Object,"function"==typeof(_k=void 0!==translate_pipe.a&&translate_pipe.a)?_k:Object])],home_component_HomeComponent);var results_component_a,results_component_b,results_component_c,results_component_d,results_component_e,results_component_f,results_component_g,results_component_h,results_component_j,debounceTime=__webpack_require__(213),common_utils=__webpack_require__(186),ng_zorro_antd_core_util=__webpack_require__(3),layout=__webpack_require__(107),skills_service=__webpack_require__(1421),lodash=__webpack_require__(509);let results_component_ResultsComponent=class ResultsComponent extends unsubscribe.a{constructor(pulseService,subscribedManager,subscribedQuery,accountManager,skillsService,breakpointObserver,route,router,translatePipe){super(),this.pulseService=pulseService,this.subscribedManager=subscribedManager,this.subscribedQuery=subscribedQuery,this.accountManager=accountManager,this.skillsService=skillsService,this.breakpointObserver=breakpointObserver,this.route=route,this.router=router,this.translatePipe=translatePipe,this.buttonType=public_api.c,this.headerType=public_api.g,this.showDetails=!1,this.forYouDrawerVisible=!1,this.isHeaderLoading=!0,this.tabs=[{title:this.translatePipe.transform("HOME").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.HOME]},{title:this.translatePipe.transform("RESULTS").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.RESULTS]}].filter(t=>privilege_utils.a.hasViewPrivileges(t.keys)).map(t=>t.title),this.headerSettings={pageTitle:this.translatePipe.transform("RESULTS"),tabset:this.tabs,breadcrumbs:[{label:this.translatePipe.transform("LEARNING"),url:"learning"}],tabSetControl:new fesm5_forms.FormControl("results"),tagLine:null,tagLineButton:this.translatePipe.transform("SEE_DETAILS"),banner:"",isByte:!0},this.drawerVisible=!1,this.reviewsData=[],this.evidenceData=[],this.showPopUp=!1,this.showInfo=!0,this.filterOptions=[{label:this.translatePipe.transform("ALL"),value:"default"}],this.methodOptions=[],this.competencyOptions=[],this.sortByOptions=[{label:this.translatePipe.transform("DEFAULT").toLowerCase(),value:"default"}],this.controls={method:new fesm5_forms.FormControl,limit:new fesm5_forms.FormControl,sort:new fesm5_forms.FormControl,competencyId:new fesm5_forms.FormControl,order:new fesm5_forms.FormControl("Asc")},this.form=new fesm5_forms.FormGroup(this.controls),this.tabGroupType=public_api.p,this.isLoading=!0,this.isLoaded=!1,this.info={title:"this is title",description:"this is Description",competencies:["hello","java"]},this.tabSetControl=new fesm5_forms.FormControl("following"),this.icons={OthersCurrent:"nxq:team",AverageCurrent:"nxq:team",SelfTarget:"rocket",OthersTarget:"bulb",AverageTarget:"nxq:team"},this.showSort=!1}ngOnInit(){this.setUiState(),this.contentId=this.route.parent.snapshot.paramMap.get("id"),this.pathwayId=this.route.parent.snapshot.paramMap.get("pathwayId"),this.courseId=+this.route.parent.snapshot.paramMap.get("id").split("-")[0],this.headerSettings.tabSetControl.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(value=>{let route=`dashboard/learning/collection/${this.contentId}/pulse`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/pulse`),"results"===value?this.router.navigate([route,"results"]).then():"aggregated-results"===value?this.router.navigate([route,"aggregated-results"]).then():"two-by-two"===value?this.router.navigate([route,"two-by-two"]).then():this.router.navigate([route,"home"]).then()}),this.accountManager.getAccount().pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(u=>!!u)).subscribe(user=>{this.user=user}),this.skillsService.getSkillsList().subscribe(s=>{this.skills1=lodash.cloneDeep(s),this.skills=[...s]}),this.subscribedQuery.selectIsLoading$.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(l=>{this.isHeaderLoading=l}),this.subscribedManager.getsubscribedById(this.contentId).pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(v=>!!v)).subscribe(data=>{this.content=data,this.batchId=data.batchId,this.headerSettings=Object.assign(Object.assign({},this.headerSettings),{banner:data.providerLogo?data.providerLogo:"",tagLine:data.batchName,pageTitle:data.name}),this.getPulseDetails(),this.getSelf()}),Object(forkJoin.a)({filters:this.pulseService.getPulseResultFilters(this.courseId),competency:this.pulseService.getPulseCompetency(this.courseId)}).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(result=>{result.filters.sorts.forEach(res=>{this.sortByOptions.push({label:res.name,value:res.key})}),result.filters.methods.forEach(res=>{this.methodOptions.push({label:res.name,value:res.key})}),result.filters.filters.forEach(res=>{this.filterOptions.push({label:res.name,value:res.key})}),this.competencies=result.competency,result.competency.forEach(res=>{this.competencyOptions.push({label:res.competencyName,value:res.id})}),this.form.setValue({method:this.methodOptions[0],limit:this.filterOptions[0],sort:this.sortByOptions[0],competencyId:this.competencyOptions[0],order:"Asc"}),this.evidence=result.filters.layout.evidence,this.reviews=result.filters.layout.reviews,this.isLoaded=!0}),this.controls.limit.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{"default"!==res.value?(this.sortByOptions=[...this.sortByOptions.filter(s=>"default"!==s.value)],this.controls.sort.setValue(this.sortByOptions[0])):this.sortByOptions=[{label:this.translatePipe.transform("DEFAULT").toLowerCase(),value:"default"},...this.sortByOptions.filter(s=>"default"!==s.value)]}),this.controls.sort.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{console.log("sort",res),this.recursiveView="Section"===res.value}),this.form.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$),Object(debounceTime.a)(500)).subscribe(res=>{this.controls.sort.markAsPristine(),this.controls.limit.markAsPristine(),this.isLoaded&&this.fetchPulse(),"default"!==res.sort.value&&"default"===res.limit.value?(this.showSort=!0,console.log("showSort",res)):this.showSort=!1})}setOrder(){"Desc"===this.controls.order.value?this.controls.order.setValue("Asc"):this.controls.order.setValue("Desc")}fetchPulse(){let data={method:this.controls.method.value.value,order:this.controls.order.value,competencyId:this.controls.competencyId.value.value};const sort=this.controls.sort.value;"default"!==sort.value&&(data=Object.assign(Object.assign({},data),{sort:sort.value}));const limit=this.controls.limit.value;"default"!==limit.value&&(data=Object.assign(Object.assign({},data),{limit:limit.value})),this.pulseService.getPulseResult(this.courseId,data).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.isLoading=!1;const competencyId=this.controls.competencyId.value.value,filteredSkills=this.filterSkillsWithCompetency(this.skills,competencyId);this.skillId=res.skills[0].id,this.surveyCards=[...res.skills].map(card=>{let marker=[];const _sort=this.controls.sort.value;if("default"===_sort.value)card.others&&(card.others.current&&(marker=[...marker,{order:card.others.current,toolTip:"Review by others : "+card.others.current,icon:"nxq:team",width:this.getWidth(card.axisData.low,card.axisData.high,card.others.current)}]),card.others.target&&(marker=[...marker,{order:card.others.target,toolTip:"Review by others - Target : "+card.others.target,icon:"bulb",width:this.getWidth(card.axisData.low,card.axisData.high,card.others.target)}])),card.self&&(card.self.current&&(marker=[...marker,{order:card.self.current,toolTip:"Self review : "+card.self.current,profileImage:this.user.imageUrl?this.user.imageUrl:"./assets/placeholder.svg",width:this.getWidth(card.axisData.low,card.axisData.high,card.self.current)}]),card.self.target&&(marker=[...marker,{order:card.self.target,toolTip:"Self review - Target : "+card.self.target,icon:"rocket",width:this.getWidth(card.axisData.low,card.axisData.high,card.self.target)}]));else if("SelfCurrent"===_sort.value)card.position&&(marker=[...marker,{order:card.position,toolTip:"Self review : "+card.position,profileImage:this.user.imageUrl?this.user.imageUrl:"./assets/placeholder.svg",width:this.getWidth(card.axisData.low,card.axisData.high,card.position)}]);else if(card.position){const icon=this.icons[_sort.value];marker=[...marker,{order:card.position,toolTip:_sort.label+" : "+card.position,icon:icon,width:this.getWidth(card.axisData.low,card.axisData.high,card.position)}]}marker=common_utils.a.sortByKey(marker,"order","desc");let sections=this.getParents(filteredSkills,card.id).map(s=>s.title);sections=[...sections].splice(0,sections.length-1);const target={toolTip:"Target : "+card.axisData.target,icon:"rocket",width:this.getWidth(card.axisData.low,card.axisData.high,card.axisData.target)};return console.log("target",target,card.axisData),{id:card.id,title:card.text,startLabel:card.axisData.lowText,endLabel:card.axisData.highText,evidence:card.evidence,target:target,review:card.review,marker:marker,sections:sections.join(" > ")}}),this.filteredSkillsWithSurvey=this.addSurveysToSkills(filteredSkills)})}getEvidence(id){this.drawerTitle=this.translatePipe.transform("EVIDENCE"),this.drawerVisible=!0;const data={skillId:id,method:this.controls.method.value.value};this.pulseService.getEvidence(this.courseId,data).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.evidenceData=res.evidences})}getReviews(id){this.drawerTitle=this.translatePipe.transform("REVIEWS"),this.drawerVisible=!0;const data={skillId:id,method:this.controls.method.value.value};this.pulseService.getReviews(this.courseId,data).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.reviewsData=res})}getInfo(id){this.drawerTitle=this.translatePipe.transform("INFO"),this.drawerVisible=!0;const competencyId=this.controls.competencyId.value.value;this.skillsService.getSkillsListForCompetency(competencyId).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(response=>{console.log(this.getParents(response,id));const comp=[...this.getParents(response,id)].pop();this.info={title:comp.title,description:comp.description,competencies:comp.linkedSkills?comp.linkedSkills.map(s=>s.title):[]},this.isInfo=!0})}onCloseDrawer(){this.drawerVisible=!1,this.evidenceData=[],this.reviewsData=[],this.isInfo=!1}showModal(){this.isVisible=!0}handleOk(){this.isVisible=!1}handleCancel(){this.isVisible=!1}seeDetails(){this.showDetails=!0}closeDrawer(){this.showDetails=!1}forYouCloseDrawer(){this.forYouDrawerVisible=!1}goBack(){this.pathwayId?this.router.navigate(["dashboard/learning/pathway",this.pathwayId]).then(r=>{}):this.router.navigate(["dashboard/learning/collection"]).then(r=>{})}goChannel(){this.router.navigate(["dashboard","connect"],{state:{channel:this.content.channelName}}).then(r=>{})}getWidth(min,max,value){return 0===value?"calc("+Object(ng_zorro_antd_core_util.g)(min,max,value)+"% + 32px)":"calc("+Object(ng_zorro_antd_core_util.g)(min,max,value)+"% + 16px)"}setUiState(){this.breakpointObserver.observe([layout.b.XSmall,layout.b.Small,layout.b.Medium,layout.b.Large,layout.b.XLarge]).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(state=>{state.breakpoints["(max-width: 599.99px)"]||state.breakpoints["(min-width: 600px) and (max-width: 959.99px)"]?this.isSmallScreen=!1:(state.breakpoints["(min-width: 960px) and (max-width: 1279.99px)"],this.isSmallScreen=!0)})}getCompetency(){const competencyId=this.controls.competencyId.value.value;return[...this.skills].filter(skill=>skill.competencyId===competencyId)}filterSkillsWithCompetency(skills,competencyId){const filteredSkills=[];return[...skills].forEach(skill=>{if(skill.competencyId===competencyId)skill.subSkills&&skill.subSkills.length&&(skill.subSkills=this.filterSkillsWithCompetency(skill.subSkills,competencyId)),filteredSkills.push(skill);else if(skill.subSkills&&skill.subSkills.length){const subSkills=this.filterSkillsWithCompetency(skill.subSkills,competencyId);filteredSkills.push(...subSkills)}}),filteredSkills}addSurveysToSkills(skills){const updatedSkills=[];return skills.forEach(skill=>{if(this.surveyCards.map(s=>s.id).includes(skill.id)){const surveyCard=this.surveyCards.find(s=>s.id===skill.id);if(skill.subSkills&&skill.subSkills.length){const subSkills=this.addSurveysToSkills(skill.subSkills);skill=subSkills&&subSkills.length?Object.assign(Object.assign({},skill),{subSkills:subSkills}):Object.assign(Object.assign({},skill),{subSkills:[]})}updatedSkills.push(skill),skill.surveyCard=surveyCard}else if(skill.subSkills&&skill.subSkills.length){const subSkills=this.addSurveysToSkills(skill.subSkills);subSkills&&subSkills.length&&(skill=Object.assign(Object.assign({},skill),{subSkills:subSkills}),updatedSkills.push(skill))}}),updatedSkills}getRecommended(e){this.skillId=e,this.isSmallScreen||(this.forYouDrawerVisible=!0)}fileName(url){if(url){url.split("/");const file=url.split("__");return file.pop()||file.pop()}return url}getParents(skills,id){for(const s of skills){const skill=this.createSkillsTree(s,id);if(skill.length>0)return skill}return[]}createSkillsTree(skill,id){if(skill.id===id)return[skill];if(skill.subSkills&&skill.subSkills.length>0)for(const s of skill.subSkills){const skills=this.createSkillsTree(s,id);if(skills.length>0)return[skill,...skills]}return[]}getPulseDetails(){this.pulseService.getPulseDetails(this.courseId).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(result=>{this.selfAllowed="Self"===result.whoDoesAllocation,this.retakeAllowed=result.allowRetake})}getSelf(){this.pulseService.getAllocationBySelf(this.batchId).pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(result=>{result.forEach(value=>{this.takeStatus="Pending"===value.status})})}requestReview(){let route=`dashboard/learning/collection/${this.contentId}/pulse`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/pulse`),this.router.navigate([route,"home"],{queryParams:{requestReview:!0}}).then()}takeSurvey(){let route=`dashboard/learning/collection/${this.contentId}/pulse`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/pulse`),this.router.navigate([route,"home"]).then()}};results_component_ResultsComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-results",template:(__webpack_require__(1514).default||__webpack_require__(1514)).length?__webpack_require__(1514).default||__webpack_require__(1514):"",styles:[(__webpack_require__(1515).default||__webpack_require__(1515)).length?__webpack_require__(1515).default||__webpack_require__(1515):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(results_component_a=void 0!==pulse_service.a&&pulse_service.a)?results_component_a:Object,"function"==typeof(results_component_b=void 0!==subscribed_manager.a&&subscribed_manager.a)?results_component_b:Object,"function"==typeof(results_component_c=void 0!==subscribed_query.a&&subscribed_query.a)?results_component_c:Object,"function"==typeof(results_component_d=void 0!==account_manager.a&&account_manager.a)?results_component_d:Object,"function"==typeof(results_component_e=void 0!==skills_service.a&&skills_service.a)?results_component_e:Object,"function"==typeof(results_component_f=void 0!==layout.a&&layout.a)?results_component_f:Object,"function"==typeof(results_component_g=void 0!==fesm5_router.a&&fesm5_router.a)?results_component_g:Object,"function"==typeof(results_component_h=void 0!==fesm5_router.i&&fesm5_router.i)?results_component_h:Object,"function"==typeof(results_component_j=void 0!==translate_pipe.a&&translate_pipe.a)?results_component_j:Object])],results_component_ResultsComponent);const pulseRoutes=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:home_component_HomeComponent},{path:"results",component:results_component_ResultsComponent}];let PulseDetailsRoutingModule=class PulseDetailsRoutingModule{};PulseDetailsRoutingModule=Object(tslib_es6.c)([Object(core.NgModule)({imports:[fesm5_router.l.forChild(pulseRoutes)],exports:[fesm5_router.l]})],PulseDetailsRoutingModule);var mutual_module=__webpack_require__(1423);const COMPONENTS=[...[home_component_HomeComponent,results_component_ResultsComponent,results_component_ResultsComponent]];let PulseDetailsModule=class PulseDetailsModule{};PulseDetailsModule=Object(tslib_es6.c)([Object(core.NgModule)({declarations:[...COMPONENTS],imports:[common.b,shared_module.a,PulseDetailsRoutingModule,mutual_module.a],exports:[...COMPONENTS],providers:[]})],PulseDetailsModule)}}]);
//# sourceMappingURL=5.8083e24f987c35a716b3.bundle.js.map