(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1516:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<nxq-learning-header [headerSettings]="headerSettings" (tagLineButton)="seeDetails()" *ngIf="!isHeaderLoading">\n  <div class="nxq-cp-ctr">\n    <div class="nxq-cp-ctr-body" *ngIf="!showIframe && !isLoading && !!content">\n      <div class="nxq-cp-ctr-body-filter">\n        <nxq-button [type]="buttonType.PRIMARY" (click)="goBack()">{{ \'BACK\' | translate }}</nxq-button>\n        <nxq-button *ngIf="!!content.channelName" [type]="buttonType.PRIMARY" (click)="goChannel()">{{\n          \'GO_TO_CHANNEL\' | translate\n        }}</nxq-button>\n      </div>\n      <div class="nxq-cp-ctr-body-section">\n        <nxq-collapse [background]="false" [active]="true" *ngIf="selfAllowed">\n          <div slot="header">\n            <nxq-header [title]="\'SELF_REVIEW\' | translate" [headerType]="headerType.SECTION"></nxq-header>\n          </div>\n          <div slot="content" class="nxq-cp-ctr-body-content">\n            <nxq-table\n              [tableHeaders]="selfRatingHeaders"\n              [tableData]="selfRatingData"\n              [showPagination]="showPagination"\n              [enableSelect]="enableSelect"\n              (actionClicked)="selfActionClicked($event)"\n              (filtersChanged)="filters($event)"\n              (rowsSelected)="rowsSelected($event)"\n              [hideTableSearch]="true"\n            ></nxq-table>\n          </div>\n        </nxq-collapse>\n        <nxq-collapse [background]="false" [active]="true" *ngIf="othersAllowed">\n          <div slot="header">\n            <nxq-header [title]="\'REVIEW_FROM_OTHERS\' | translate" [headerType]="headerType.SECTION"></nxq-header>\n          </div>\n          <div slot="content" class="nxq-cp-ctr-body-content">\n            <nxq-table\n              [tableHeaders]="ratingFromOthersHeaders"\n              [tableData]="ratingFromOthersData"\n              [showPagination]="showPagination"\n              [enableSelect]="enableSelect"\n              (actionClicked)="FromActionClicked($event)"\n              (filtersChanged)="filters($event)"\n            ></nxq-table>\n            <nxq-button *ngIf="whoDoesAllocation" (click)="requestReviewClicked()">{{ \'REQUEST_REVIEWS\' | translate }}</nxq-button>\n          </div>\n        </nxq-collapse>\n      </div>\n    </div>\n    <div class="nxq-cp-ctr-body" *ngIf="showIframe">\n      \x3c!--      <div class="nxq-cp-ctr-body-filter">--\x3e\n      \x3c!--        <nxq-button [type]="buttonType.PRIMARY" *ngIf="showIframe" (click)="closeIframe()">{{ \'BACK\' | translate }}</nxq-button>--\x3e\n      \x3c!--      </div>--\x3e\n      <nxq-survey-iframe [url]="url"></nxq-survey-iframe>\n    </div>\n    <div class="nxq-spinner-cp" *ngIf="isLoading">\n      <nxq-loading></nxq-loading>\n    </div>\n  </div>\n  <nz-modal\n    [(nzVisible)]="showModal"\n    [nzContent]="modalContent"\n    [nzFooter]="modalFooter"\n    (nzOnCancel)="onCancel()"\n    nzWidth="400px"\n    nzHeight="300px"\n    class="confirm-popup"\n    nzClassName="confirm-modal"\n  >\n    <ng-template #modalContent>\n      {{ \'REJECT_REQUEST\' | translate }}\n    </ng-template>\n\n    <ng-template #modalFooter>\n      <nxq-button type="primary" (click)="onCancel()">{{ \'CANCEL\' | translate }}</nxq-button>\n      <nxq-button type="secondary" (click)="onConfirm()">{{ \'CONFIRM\' | translate }}</nxq-button>\n    </ng-template>\n  </nz-modal>\n  <nxq-content-details [contentID]="courseId" (drawerVisibility)="closeDrawer()" [drawerVisible]="showDetails"></nxq-content-details>\n</nxq-learning-header>\n<div class="nxq-spinner-cp" *ngIf="isHeaderLoading">\n  <nxq-loading></nxq-loading>\n</div>\n<nz-drawer\n  *ngIf="!!showPopUp"\n  [nzBodyStyle]="{ height: \'calc(100% - 55px)\', overflow: \'auto\', \'padding-bottom\': \'53px\' }"\n  [nzClosable]="false"\n  [nzMaskClosable]="true"\n  [nzWidth]="\'600: 900\'"\n  [nzVisible]="showPopUp"\n  [nzTitle]="\'\'"\n  (nzOnClose)="onClose()"\n>\n  <div class="side-drawer" *ngIf="showPopUp">\n    <div class="add-reviewer">\n      <div class="header">\n        <span>{{ \'ADD_REVIEWERS\' | translate }}</span>\n      </div>\n      <div>\n        <nxq-select [control]="controls.configTitle" [options]="configOptions" [placeholder]="\'SELECT_TITLE\' | translate"></nxq-select>\n      </div>\n      <div class="add-reviewer__tag">\n        <span class="add-reviewer__tag__label">{{ \'INVITE_REVIEWERS\' | translate | uppercase }}</span>\n        <nxq-tags (isDirty)="tagsDirty($event)" (getTags)="emailTags($event)" [displayText]="\'ADD_EMAIL\' | translate"></nxq-tags>\n      </div>\n      <div class="content">\n        <span class="add-reviewer__tag__label">{{ \'ADD\' | translate | uppercase }} {{ \'EXISTING_USERS\' | translate | uppercase }}</span>\n        <div class="table">\n          <nxq-table\n            [tableHeaders]="headers"\n            [tableData]="data"\n            enableSelect="true"\n            (customAction)="customActionClicked($event)"\n            (filtersChanged)="reviewerFilters($event)"\n            (actionClicked)="addReviewerActionClicked($event)"\n            (rowsSelected)="addReviewerRowsSelected($event)"\n          ></nxq-table>\n        </div>\n        <div class="buttons">\n          <nxq-button type="primary" (click)="onClose()">{{ \'CANCEL\' | translate }}</nxq-button>\n          <nxq-button type="secondary" (click)="OnBulkUpload()">{{ \'ADD_SELECTED\' | translate }}</nxq-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</nz-drawer>\n\n<nz-modal\n  [(nzVisible)]="showFormDirtyModal"\n  [nzContent]="modalContents"\n  [nzFooter]="modalFooters"\n  (nzOnCancel)="onCancelModal()"\n  nzWidth="400px"\n  nzHeight="300px"\n  class="confirm-popup"\n  nzClassName="confirm-modal"\n>\n  <ng-template #modalContents>\n    You have unsaved data in the form, Are you sure you want to discard the changes?\n  </ng-template>\n\n  <ng-template #modalFooters>\n    <nxq-button type="primary" (click)="onCancelModal()">Cancel</nxq-button>\n    <nxq-button type="secondary" (click)="onConfirmModal()">Confirm</nxq-button>\n  </ng-template>\n</nz-modal>\n'},1517:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.nxq-cp-ctr {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body {\n  padding: 0 30px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-section {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr-body-content {\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n}\n.nxq-cp-ctr-body-content > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body-content > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-filter {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter__buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter__buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter__buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-filter-buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter-buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter-buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-pop-up {\n  margin: 20px 0;\n  padding: 30px;\n  border-radius: 10px;\n  border: 1px solid #2373ff;\n  box-shadow: 0 2px 22px rgba(174, 179, 198, 0.120465);\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-header {\n  color: #2373ff;\n  font-size: 22px;\n  font-weight: bold;\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-header > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-header > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-body {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-pop-up-body > * {\n  margin-bottom: 30px;\n}\n.nxq-pop-up-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-pop-up-actions {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-pop-up-actions > * {\n  margin-right: 30px;\n}\n.nxq-pop-up-actions > *:last-child {\n  margin-right: 0;\n}\n.add-reviewer {\n  display: flex;\n  flex-direction: column;\n}\n.add-reviewer > * {\n  margin-bottom: 20px;\n}\n.add-reviewer > *:last-child {\n  margin-bottom: 0;\n}\n.add-reviewer .header {\n  font-weight: bold;\n  font-size: 22px;\n  line-height: 22px;\n  color: #2373ff;\n}\n.add-reviewer__tag {\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n}\n.add-reviewer__tag > * {\n  margin-bottom: 10px;\n}\n.add-reviewer__tag > *:last-child {\n  margin-bottom: 0;\n}\n.add-reviewer .content {\n  display: flex;\n  flex-direction: column;\n}\n.add-reviewer .content > * {\n  margin-bottom: 20px;\n}\n.add-reviewer .content > *:last-child {\n  margin-bottom: 0;\n}\n.add-reviewer .content .table {\n  overflow-x: scroll;\n}\n.add-reviewer .content .buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n  padding: 10px 20px 10px 20px;\n  background: #ffffff;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  border-top: 1px solid lightgray;\n  box-shadow: 0px 0px 10px 2px rgba(187, 187, 187, 0.7);\n  z-index: 1;\n}\n.add-reviewer .content .buttons > * {\n  margin-right: 13px;\n}\n.add-reviewer .content .buttons > *:last-child {\n  margin-right: 0;\n}"},1518:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<nxq-learning-header [headerSettings]="headerSettings" (tagLineButton)="seeDetails()" [headerMarginBottom]="false" *ngIf="!isHeaderLoading">\n  <div class="nxq-cp-ctr">\n    <div class="nxq-cp-ctr-body" *ngIf="!isLoading">\n      <div class="nxq-cp-ctr-body-content">\n        <div class="nxq-cp-ctr-body-content-card">\n          \x3c!--          <div class="nxq-cp-ctr-body-filter">--\x3e\n          \x3c!--            <nxq-button [type]="buttonType.PRIMARY" (click)="goBack()">{{ \'BACK\' | translate }}</nxq-button>--\x3e\n          \x3c!--            <nxq-button *ngIf="!!content.channelName" [type]="buttonType.PRIMARY" (click)="goChannel()">{{--\x3e\n          \x3c!--              \'GO_TO_CHANNEL\' | translate--\x3e\n          \x3c!--            }}</nxq-button>--\x3e\n          \x3c!--          </div>--\x3e\n          <div class="nxq-cp-ctr__buttons">\n            <nxq-button [type]="buttonType.PRIMARY" *ngIf="!takeStatus && retakeAllowed" (click)="takeSurvey()">{{\n              \'RETAKE\' | translate\n            }}</nxq-button>\n            <nxq-button [type]="buttonType.PRIMARY" *ngIf="takeStatus" (click)="takeSurvey()">{{ \'TAKE\' | translate }}</nxq-button>\n            <nxq-button [type]="buttonType.PRIMARY" *ngIf="selfAllowed" (click)="requestReview()">{{\n              \'REQUEST_REVIEWS\' | translate\n            }}</nxq-button>\n          </div>\n          <div class="nxq-cp-ctr-body-filter">\n            <nxq-list-filters [control]="controls.method" [label]="\'METHOD\' | translate" [options]="filterOptions"></nxq-list-filters>\n            <div class="nxq-cp-ctr-body-filter__buttons">\n              <nxq-icon\n                *ngIf="this.controls.sort.value.value !== \'default\'"\n                [icon]="this.controls.order.value === \'Asc\' ? \'sort-ascending\' : \'sort-descending\'"\n                fontSize="20px"\n                (click)="setOrder()"\n              ></nxq-icon>\n              <nxq-list-filters [control]="controls.sort" [label]="\'SORT\' | translate" [options]="sortByOptions"></nxq-list-filters>\n            </div>\n          </div>\n          <ng-container *ngIf="!!sections">\n            <nxq-collapse *ngFor="let section of sections" [active]="true">\n              <div slot="header">\n                <h3>{{ section.title }}</h3>\n              </div>\n              <div slot="extra">\n                <nxq-icon icon="info-circle" fontSize="20px" (click)="getInfo(section.id, \'section\'); $event.stopPropagation()"></nxq-icon>\n              </div>\n              <div slot="content">\n                <div class="survey-card" *ngFor="let surveyCard of section.questions">\n                  <div class="nxq-cp-ctr-body-content-card__label">\n                    <div class="title" [ngClass]="{ active: surveyCard.id === skillId }">\n                      <span>{{ surveyCard.title }}</span>\n                    </div>\n                    <div class="nxq-cp-ctr-body-content-card__dash" [ngClass]="{ activeBackground: surveyCard.id === skillId }"></div>\n                    <nxq-survey-line\n                      [markers]="surveyCard.marker"\n                      [endLabelLine]="surveyCard.endLabel"\n                      [startLabelLine]="surveyCard.startLabel"\n                      [evidence]="surveyCard.evidence"\n                      [reviews]="surveyCard.review"\n                      [target]="surveyCard.target"\n                      [showInfo]="showInfo"\n                      [isActive]="skillId === surveyCard.id"\n                      (getInfo)="getInfo(surveyCard.id, \'card\')"\n                      (getEvidence)="getEvidence(surveyCard.id)"\n                      (getReviews)="getReviews(surveyCard.id)"\n                      (click)="getRecommended(surveyCard.id)"\n                    ></nxq-survey-line>\n                  </div>\n                </div>\n              </div>\n            </nxq-collapse>\n          </ng-container>\n          <ng-container *ngIf="!!surveyCards">\n            <div class="survey-card" *ngFor="let surveyCard of surveyCards">\n              <div class="nxq-cp-ctr-body-content-card__label">\n                <div class="title" [ngClass]="{ active: surveyCard.id === skillId }">\n                  <span>{{ surveyCard.title }}</span>\n                  <p class="section">({{ \'SECTION\' | translate }} - {{ surveyCard.sectionTitle }})</p>\n                </div>\n                <div class="nxq-cp-ctr-body-content-card__dash" [ngClass]="{ activeBackground: surveyCard.id === skillId }"></div>\n                <nxq-survey-line\n                  [markers]="surveyCard.marker"\n                  [endLabelLine]="surveyCard.endLabel"\n                  [startLabelLine]="surveyCard.startLabel"\n                  [evidence]="surveyCard.evidence"\n                  [reviews]="surveyCard.review"\n                  [target]="surveyCard.target"\n                  [showInfo]="showInfo"\n                  [isActive]="skillId === surveyCard.id"\n                  (getInfo)="getInfo(surveyCard.id, \'card\')"\n                  (getEvidence)="getEvidence(surveyCard.id)"\n                  (getReviews)="getReviews(surveyCard.id)"\n                  (click)="getRecommended(surveyCard.id)"\n                ></nxq-survey-line>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n        <div class="nxq-cp-ctr-body-content-widget" *ngIf="!isSmallScreen">\n          <nxq-tabset-radio-button-group [control]="tabSetControl" [tabGroupType]="tabGroupType.PAIR">\n            <nxq-radio-button value="following">{{ \'FOR_YOU\' | translate }}</nxq-radio-button>\n          </nxq-tabset-radio-button-group>\n          <ng-container>\n            <nxq-recommended-widget\n              type="feedback"\n              [setSkillId]="skillId"\n              [setUser]="user.userId"\n              [emptyMessage]="\'Click on skill card to see learning resources recommended for that skill\'"\n            ></nxq-recommended-widget>\n          </ng-container>\n        </div>\n      </div>\n    </div>\n    <div class="nxq-spinner-cp" *ngIf="isLoading">\n      <nxq-loading></nxq-loading>\n    </div>\n  </div>\n  <nxq-content-details [contentID]="courseId" (drawerVisibility)="closeDrawer()" [drawerVisible]="showDetails"></nxq-content-details>\n</nxq-learning-header>\n\n<div class="nxq-spinner-cp" *ngIf="isHeaderLoading">\n  <nxq-loading></nxq-loading>\n</div>\n\n\x3c!--for you on small screen--\x3e\n<nz-drawer\n  *ngIf="isSmallScreen"\n  [nzClosable]="false"\n  [nzVisible]="forYouDrawerVisible"\n  nzPlacement="right"\n  [nzWidth]="370"\n  [nzTitle]="forDrawerHeader"\n  (nzOnClose)="forYouCloseDrawer()"\n>\n  <ng-template #forDrawerHeader>\n    <div class="side-drawer-header">\n      <h3>{{ \'FOR_YOU\' | translate }}</h3>\n      <nxq-icon icon="close" fontSize="16px" (click)="forYouCloseDrawer()"></nxq-icon>\n    </div>\n  </ng-template>\n  <nxq-recommended-widget\n    type="feedback"\n    [setSkillId]="skillId"\n    [setUser]="user.userId"\n    [emptyMessage]="\'Click on skill card to see learning resources recommended for that skill\'"\n  ></nxq-recommended-widget>\n</nz-drawer>\n\n<nz-drawer\n  [nzClosable]="false"\n  [nzVisible]="drawerVisible"\n  nzPlacement="right"\n  [nzWidth]="400"\n  [nzTitle]="drawerHeader"\n  (nzOnClose)="onCloseDrawer()"\n>\n  <ng-template #drawerHeader>\n    <div class="side-drawer-header">\n      <h3>{{ drawerTitle }}</h3>\n      <nxq-icon icon="close" fontSize="16px" (click)="onCloseDrawer()"></nxq-icon>\n    </div>\n  </ng-template>\n  <div class="side-drawer" *ngIf="drawerVisible">\n    <div class="side-drawer-content">\n      <ng-container *ngIf="!!evidenceData">\n        <div class="side-drawer-card" *ngFor="let data of evidenceData">\n          <ng-container *ngIf="data.type === \'TextInput\'">\n            <h4>{{ data.answer }}</h4>\n            <p>{{ data.question }}</p>\n            \x3c!--            <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n          </ng-container>\n          <ng-container *ngIf="data.type === \'FileInput\'">\n            <a (click)="showModal()"\n              ><h4 class="side-drawer-card-link">{{ fileName(data.answer) | truncate: 36 }}</h4></a\n            >\n            <p>{{ data.question }}</p>\n            \x3c!--            <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n            <nz-modal\n              [(nzVisible)]="isVisible"\n              [nzTitle]="\'ATTACHMENT\' | translate"\n              [nzFooter]="null"\n              (nzOnCancel)="handleCancel()"\n              nzWidth="80%"\n            >\n              <nxq-resource-display-component [setUrl]="data.answer"></nxq-resource-display-component>\n            </nz-modal>\n          </ng-container>\n        </div>\n      </ng-container>\n      <ng-container *ngIf="!!reviewsData">\n        <nxq-collapse [active]="true" *ngFor="let review of reviewsData">\n          <div slot="header">\n            <h4>{{ \'REVIEW\' | translate }} {{ reviewsData.indexOf(review) + 1 }} - {{ review.configTitle }}</h4>\n          </div>\n          <div slot="content" class="side-drawer-content">\n            <div class="side-drawer-card" *ngFor="let data of review.reviews">\n              <ng-container *ngIf="data.type === \'TextInput\'">\n                <h4>{{ data.answer }}</h4>\n                <p>{{ data.question }}</p>\n                \x3c!--                <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n              </ng-container>\n              <ng-container *ngIf="data.type === \'FileInput\'">\n                <a (click)="showModal()">\n                  <h4 class="side-drawer-card-link">{{ fileName(data.answer) | truncate: 36 }}</h4>\n                </a>\n                <p>{{ data.question }}</p>\n                \x3c!--                <h5 *ngIf="!!data.userGivenName">{{ \'BY\' | translate }} - {{ data.userGivenName }}</h5>--\x3e\n                <nz-modal\n                  [(nzVisible)]="isVisible"\n                  [nzTitle]="\'ATTACHMENT\' | translate"\n                  [nzFooter]="null"\n                  (nzOnCancel)="handleCancel()"\n                  nzWidth="80%"\n                >\n                  <nxq-resource-display-component [setUrl]="data.answer"></nxq-resource-display-component>\n                </nz-modal>\n              </ng-container>\n            </div>\n          </div>\n        </nxq-collapse>\n      </ng-container>\n      <ng-container *ngIf="isInfo">\n        <div class="side-drawer-column">\n          <span class="side-drawer-label">{{ \'Name\' | uppercase }}</span>\n          <h4>{{ !!infoData.title ? infoData.title : \'\' }}</h4>\n        </div>\n        <div class="side-drawer-column" *ngIf="!!infoData.description">\n          <span class="side-drawer-label">{{ \'Description\' | uppercase }}</span>\n          <p [innerHTML]="!!infoData.description ? infoData.description : \'\'"></p>\n        </div>\n        <div class="side-drawer-column" *ngIf="!!infoData.competencies.length">\n          <span class="side-drawer-label">{{ \'Linked Competencies\' | uppercase }}</span>\n          <div class="side-drawer-tag" *ngIf="!!infoData.competencies.length">\n            <nz-tag *ngFor="let tag of infoData.competencies">{{ tag.title }}</nz-tag>\n          </div>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</nz-drawer>\n'},1519:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="/* These mixins are replacement of Flex Layout*/\n.nxq-cp-ctr {\n  display: flex;\n  flex-direction: column;\n}\n.nxq-cp-ctr > * {\n  margin-bottom: 20px;\n}\n.nxq-cp-ctr > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr__buttons {\n  padding-right: 20px;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin-bottom: 10px;\n}\n.nxq-cp-ctr__buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr__buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body {\n  padding: 0 30px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body > * {\n  margin-bottom: 30px;\n}\n.nxq-cp-ctr-body > *:last-child {\n  margin-bottom: 0;\n}\n.nxq-cp-ctr-body-filter {\n  flex-wrap: wrap;\n  width: 100%;\n  padding-right: 20px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter__buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter__buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter__buttons > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-filter-buttons {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr-body-filter-buttons > * {\n  margin-right: 20px;\n}\n.nxq-cp-ctr-body-filter-buttons > *:last-child {\n  margin-right: 0;\n}\n.rtl .nxq-cp-ctr-body-filter {\n  padding-right: 0;\n  padding-left: 20px;\n}\n.nxq-cp-ctr-body-content {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  overflow: scroll;\n}\n.nxq-cp-ctr-body-content-card {\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: calc(100vh - 150px);\n  overflow: scroll;\n}\n.nxq-cp-ctr-body-content-card .survey-card {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n}\n.nxq-cp-ctr-body-content-card__label {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  align-content: center;\n  width: 100%;\n  padding: 20px;\n}\n.nxq-cp-ctr-body-content-card__label > * {\n  margin-right: 10px;\n}\n.nxq-cp-ctr-body-content-card__label > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-content-card__label span {\n  max-width: 150px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.nxq-cp-ctr-body-content-card__label span > * {\n  margin-right: 10px;\n}\n.nxq-cp-ctr-body-content-card__label span > *:last-child {\n  margin-right: 0;\n}\n.nxq-cp-ctr-body-content-card__label nxq-survey-line {\n  width: 100%;\n}\n.nxq-cp-ctr-body-content-card__label .title {\n  min-width: 150px;\n}\n.nxq-cp-ctr-body-content-card__label .section {\n  margin-top: 5px;\n  font-size: 11px;\n  max-width: 150px;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  align-content: center;\n}\n.nxq-cp-ctr-body-content-card__dash {\n  height: 4px;\n  width: 30px;\n  background: #d9d9d9;\n  border-radius: 4px;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label, .xs .nxq-cp-ctr-body-content-card__label, :host-context(.sm) .nxq-cp-ctr-body-content-card__label, .sm .nxq-cp-ctr-body-content-card__label {\n  display: flex;\n  flex-direction: column;\n  padding: 20px 0;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label > *, .xs .nxq-cp-ctr-body-content-card__label > *, :host-context(.sm) .nxq-cp-ctr-body-content-card__label > *, .sm .nxq-cp-ctr-body-content-card__label > * {\n  margin-bottom: 10px;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label > *:last-child, .xs .nxq-cp-ctr-body-content-card__label > *:last-child, :host-context(.sm) .nxq-cp-ctr-body-content-card__label > *:last-child, .sm .nxq-cp-ctr-body-content-card__label > *:last-child {\n  margin-bottom: 0;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label .title, .xs .nxq-cp-ctr-body-content-card__label .title, :host-context(.sm) .nxq-cp-ctr-body-content-card__label .title, .sm .nxq-cp-ctr-body-content-card__label .title {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__label span, .xs .nxq-cp-ctr-body-content-card__label span, :host-context(.sm) .nxq-cp-ctr-body-content-card__label span, .sm .nxq-cp-ctr-body-content-card__label span {\n  max-width: unset;\n  padding: 0 10px;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n}\n:host-context(.xs) .nxq-cp-ctr-body-content-card__dash, .xs .nxq-cp-ctr-body-content-card__dash, :host-context(.sm) .nxq-cp-ctr-body-content-card__dash, .sm .nxq-cp-ctr-body-content-card__dash {\n  height: 20px;\n  width: 4px;\n}\n.nxq-cp-ctr-body-content-widget {\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  align-content: center;\n  border-left: 1px solid #d9d9d9;\n  width: 351px;\n  padding-left: 30px;\n  flex-shrink: 0;\n}\n.nxq-cp-ctr-body-content-widget > * {\n  margin-bottom: 10px;\n}\n.nxq-cp-ctr-body-content-widget > *:last-child {\n  margin-bottom: 0;\n}\n.rtl .nxq-cp-ctr-body-content-widget {\n  border-right: 1px solid #d9d9d9;\n  border-left: none;\n}\n.nxq-cp-ctr-body-content-widget nxq-tabset-radio-button-group {\n  width: 100%;\n}\n.nxq-cp-ctr-body-content-widget nxq-tabset-radio-button-group .ant-radio-group {\n  justify-content: space-between;\n  align-items: center;\n  align-content: center;\n}\n.nxq-cp-ctr-body-content-widget nxq-suggestion-content-card {\n  width: 100%;\n}\n.nxq-cp-ctr-body-content-widget__button {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.nxq-cp-ctr .active {\n  color: #2373ff;\n}\n.nxq-cp-ctr .activeBackground {\n  background: #2373ff;\n}\nnxq-icon {\n  cursor: pointer;\n}\nnxq-icon:hover {\n  color: #2373ff;\n}\n.side-drawer {\n  height: calc(100vh - 100px);\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.side-drawer > * {\n  margin-bottom: 20px;\n}\n.side-drawer > *:last-child {\n  margin-bottom: 0;\n}\n.side-drawer-header {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.side-drawer-header > * {\n  margin-right: 30px;\n}\n.side-drawer-header > *:last-child {\n  margin-right: 0;\n}\n.side-drawer-header nxq-icon {\n  cursor: pointer;\n}\n.side-drawer-content {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  align-content: flex-start;\n}\n.side-drawer-content > * {\n  margin-bottom: 20px;\n}\n.side-drawer-content > *:last-child {\n  margin-bottom: 0;\n}\n.side-drawer-card {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 350px;\n  border: 1px solid #d9d9d9;\n  border-radius: 10px;\n}\n.side-drawer-card-link {\n  color: #2373ff;\n}\n.side-drawer-column {\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  max-width: 360px;\n}\n.side-drawer-column > * {\n  margin-bottom: 10px;\n}\n.side-drawer-column > *:last-child {\n  margin-bottom: 0;\n}\n.side-drawer-column p {\n  color: #181921;\n}\n.side-drawer-label {\n  display: flex;\n  flex-direction: row;\n  font-weight: bold;\n  font-size: 12px;\n  line-height: 13px;\n  color: #aeb3c6;\n  max-width: 360px;\n}\n.side-drawer-label > * {\n  margin-right: 15px;\n}\n.side-drawer-label > *:last-child {\n  margin-right: 0;\n}\n.side-drawer-tag {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  max-width: 360px;\n}\n.side-drawer-tag > * {\n  margin-right: 15px;\n}\n.side-drawer-tag > *:last-child {\n  margin-right: 0;\n}\n.side-drawer-tag ::ng-deep .ant-tag {\n  color: #181921;\n  background: #f7f9fc;\n  border: #d9d9d9;\n  max-width: 360px;\n  display: flex;\n  flex-wrap: wrap;\n  white-space: unset;\n  margin-bottom: 10px;\n}\nnxq-collapse ::ng-deep .ant-collapse .ant-collapse-item .ant-collapse-header .ant-collapse-extra {\n  min-width: 0;\n  color: #9aa0b9;\n}"},1719:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ThreeSixtyDetailsModule",(function(){return ThreeSixtyDetailsModule}));var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,tslib_es6=__webpack_require__(1),core=__webpack_require__(0),common=__webpack_require__(6),shared_module=__webpack_require__(587),public_api=__webpack_require__(12),fesm5_forms=__webpack_require__(5),pulse_service=__webpack_require__(1417),subscribed_manager=__webpack_require__(1411),takeUntil=__webpack_require__(29),filter=__webpack_require__(44),take=__webpack_require__(85),subscribed_query=__webpack_require__(1409),unsubscribe=__webpack_require__(216),fesm5_router=__webpack_require__(35),batches_service=__webpack_require__(1406),account_manager=__webpack_require__(218),privilege_enum=__webpack_require__(47),privilege_utils=__webpack_require__(87),utils=__webpack_require__(586),translate_pipe=__webpack_require__(215),ng_zorro_antd_message=__webpack_require__(185),ng_zorro_antd_notification=__webpack_require__(1399),combineLatest=__webpack_require__(93),forkJoin=__webpack_require__(569);let home_component_HomeComponent=class HomeComponent extends unsubscribe.a{constructor(pulseService,batchesService,accountManager,subscribedManager,subscribedQuery,route,nzMessageService,notification,router,translatePipe){super(),this.pulseService=pulseService,this.batchesService=batchesService,this.accountManager=accountManager,this.subscribedManager=subscribedManager,this.subscribedQuery=subscribedQuery,this.route=route,this.nzMessageService=nzMessageService,this.notification=notification,this.router=router,this.translatePipe=translatePipe,this.buttonType=public_api.c,this.headerType=public_api.g,this.showDetails=!1,this.isHeaderLoading=!0,this.tabs=[{title:this.translatePipe.transform("HOME").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.HOME]},{title:this.translatePipe.transform("RESULTS").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.RESULTS]}].filter(t=>privilege_utils.a.hasViewPrivileges(t.keys)).map(t=>t.title),this.headerSettings={pageTitle:this.translatePipe.transform("HOME"),tabset:this.tabs,breadcrumbs:[{label:this.translatePipe.transform("LEARNING"),url:"learning"}],tabSetControl:new fesm5_forms.FormControl("home"),tagLine:null,tagLineButton:this.translatePipe.transform("SEE_DETAILS"),banner:"",isByte:!0},this.showPopUp=!1,this.showIframe=!1,this.selfRating=[],this.fromOthers=[],this.showPagination=!1,this.enableSelect=!1,this.selfRatingHeaders=[{title:this.translatePipe.transform("STATUS"),type:public_api.s.TEXT,property:"status",showSort:!0},{title:this.translatePipe.transform("ACTIONS"),type:public_api.s.ACTIONS,property:"actions",actions:[{title:this.translatePipe.transform("TAKE"),type:public_api.r.BUTTON,value:"take"},{title:this.translatePipe.transform("RETAKE"),type:public_api.r.BUTTON,value:"retake"}]}],this.selfRatingData=[],this.fromOtherUserIds=[],this.ratingFromOthersHeaders=[{title:this.translatePipe.transform("NAME"),type:public_api.s.COMPONENT,property:"name",component:public_api.j},{title:this.translatePipe.transform("TITLE"),type:public_api.s.TEXT,property:"configuredTitle",showSort:!0},{title:this.translatePipe.transform("STATUS"),type:public_api.s.TEXT,property:"status",showSort:!0}],this.ratingFromOthersData=[],this.configuredControl=new fesm5_forms.FormControl("type1"),this.configuredOptions=[{label:"type 1",value:"type1"},{label:"type 2",value:"type2"}],this.conditions=[{label:"typ1",value:"typ1"}],this.configuredFilterOptions=[{value:"typ1",label:"typ1",conditions:this.conditions,options:this.conditions}],this.headers=[{title:this.translatePipe.transform("USER_NAME").toUpperCase(),type:public_api.s.TEXT,property:"userName",showSort:!0},{title:this.translatePipe.transform("DESIGNATION").toUpperCase(),type:public_api.s.TEXT,property:"designation",showSort:!0},{title:this.translatePipe.transform("EMAIL").toUpperCase(),type:public_api.s.TEXT,property:"email",showSort:!0},{title:"",type:public_api.s.ACTIONS,property:"",actions:[{title:this.translatePipe.transform("ADD"),type:public_api.r.BUTTON,value:"add"}]}],this.tenantUsers=[],this.data=[],this.selectedUserIds=[],this.whoDoesAllocation=!1,this.controls={configTitle:new fesm5_forms.FormControl(null,fesm5_forms.Validators.required)},this.configForm=new fesm5_forms.FormGroup(this.controls),this.othersAllowed=!1,this.selfAllowed=!1}ngOnInit(){this.contentId=this.route.parent.snapshot.paramMap.get("id"),this.pathwayId=this.route.parent.snapshot.paramMap.get("pathwayId"),this.courseId=+this.route.parent.snapshot.paramMap.get("id").split("-")[0],this.headerSettings.tabSetControl.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(value=>{let route=`dashboard/learning/collection/${this.contentId}/feedback`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/feedback`),"results"===value?this.router.navigate([route,"results"]).then():"aggregated-results"===value?this.router.navigate([route,"aggregated-results"]).then():"two-by-two"===value?this.router.navigate([route,"two-by-two"]).then():this.router.navigate([route,"home"]).then()}),this.bindedMessageListner=this.messageListener.bind(this),window.addEventListener("message",this.bindedMessageListner),this.accountManager.getAccount().pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(u=>!!u)).subscribe(user=>{this.user=user}),this.subscribedQuery.selectIsLoading$.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(l=>{this.isHeaderLoading=l,console.log(this.isHeaderLoading)}),Object(combineLatest.b)([this.batchesService.getAllTenantUsers(),this.subscribedManager.getsubscribedById(this.contentId)]).pipe(Object(filter.a)(v=>!!v[1]),Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(value=>{this.batchId=value[1].batchId,this.headerSettings=Object.assign(Object.assign({},this.headerSettings),{banner:value[1].providerLogo?value[1].providerLogo:"",tagLine:value[1].batchName,pageTitle:value[1].name}),this.enrollmentId=value[1].enrollmentId,this.content=value[1],this.getThreeSixtyDetails(),value[1].courseId&&(this.isLoading=!1),this.tenantUsers=value[0].users.filter(user=>this.user.userId!==user.userId).map(user=>Object.assign(Object.assign({},user),{id:user.userId}));this.route.parent.snapshot.queryParamMap.get("requestReview")&&this.requestReviewClicked()})}setUser(){this.data=[...this.tenantUsers.filter(res=>!this.fromOtherUserIds.includes(res.id))],console.log("user",this.data),console.log("user",this.fromOtherUserIds)}getThreeSixtyDetails(){this.pulseService.getThreeSixtyDetails(this.courseId).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(result=>{this.getFromOthers(),this.getSelf(),"Self"===result.whoDoesAllocation?(this.whoDoesAllocation=!0,this.ratingFromOthersHeaders=[...this.ratingFromOthersHeaders,{title:this.translatePipe.transform("ACTIONS"),type:public_api.s.ACTIONS,property:"actions",actions:[{title:this.translatePipe.transform("DELETE"),type:public_api.r.BUTTON,value:"delete"}]}]):this.ratingFromOthersHeaders=[...this.ratingFromOthersHeaders].filter(r=>"actions"!==r.property),this.selfAllowed=result.allowSelf,this.othersAllowed=result.allowOthers,this.allowRetake=result.allowRetake,this.configOptions=result.allowOthersThreeSixty.map(data=>({label:data.title,value:data.id})),this.threeSixTyDetails=result})}getSelf(){this.pulseService.getAllocationBySelf(this.batchId).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(result=>{this.selfRating=result,this.selfRatingData=result.map(value=>{const canTake="Pending"===value.status,canReTake="Completed"===value.status&&this.allowRetake;return{id:value.id,status:value.status,actions:{take:canTake,retake:canReTake}}})})}getFromOthers(){this.pulseService.getAllocationFromOthers(this.enrollmentId).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(result=>{this.fromOthers=[...result],this.fromOtherUserIds=result.map(value=>value.reviewedBy.id),this.setUser(),this.ratingFromOthersData=result.map(value=>{const isPending="Pending"===value.status;return{id:value.id,name:{image:value.reviewedBy.imageUrl?value.reviewedBy.imageUrl:"./assets/placeholder.svg",fullLogo:!1,title:value.reviewedBy.firstName+" "+value.reviewedBy.lastName,height:24,round:!0},configuredTitle:value.feedbackTittle?value.feedbackTittle.title:"",status:value.status,emailRequestPending:value.emailRequestPending,actions:{delete:isPending}}})})}selfActionClicked(item){"take"===item.value||"retake"===item.value?(console.log("take clicked"),this.isLoading=!0,this.notification.warning(this.translatePipe.transform("CAUTION"),this.translatePipe.transform("SURVEY_PRIVATE_MODE_MESSAGE")),this.pulseService.takeSelfReview(this.batchId,this.courseId).pipe(Object(take.a)(1),Object(takeUntil.a)(this._destroyed$)).subscribe(res=>{this.url=res.surveyUrl,this.showIframe=!0,this.isLoading=!1})):(console.log(item.data.id),this.pulseService.rejectReview(item.data.id))}FromActionClicked(item){"delete"===item.value&&(this.showModal=!0,this.deleteId=item.data.id,this.deleteTypeEmail=item.data.emailRequestPending)}filters(event){event.sortBy&&(this.data=utils.a.sortByMultipleValues(this.data,event.sortBy))}rowsSelected($event){}onClose(){this.formIsDirty||this.tagDirty?this.showFormDirtyModal=!0:(this.showPopUp=!1,this.setRoute())}requestReviewClicked(){this.showPopUp=!0}cancelPopUp(){this.showPopUp=!1}onEnroll(users,type){const data=users.map(reqUser=>({requestedFor:{id:this.user.userId},reviewedBy:{id:reqUser.id},feedback:{id:this.content.byteObject.id},allowOtherThreeSixtyDegreeFeedback:{id:this.controls.configTitle.value},batch:{id:this.batchId}})),selectedConfigTitle=this.controls.configTitle.value,total=selectedConfigTitle?this.threeSixTyDetails.allowOthersThreeSixty.filter(t=>t.id===selectedConfigTitle).length:null,alreadyRequested=selectedConfigTitle?this.fromOthers.filter(t=>t.feedbackTittle.id===selectedConfigTitle).length:null,selected=(this.supporterEmails?this.supporterEmails.length:0)+(data?data.length:0),canRequest=total-(alreadyRequested+selected)>=0,remaining=total-alreadyRequested;console.log(selectedConfigTitle,total,alreadyRequested,selected,canRequest,remaining),canRequest?this.supporterEmails?Object(forkJoin.a)({externEmail:this.pulseService.addSupporter({batchId:this.content.batchId,configTitleId:this.controls.configTitle.value,learningContentId:this.courseId,emails:this.supporterEmails}),existingUser:this.pulseService.addReviewer(this.batchId,this.courseId,data)}).subscribe(result=>{this.getFromOthers(),this.supporterEmails=[],"bulk"===type&&(this.showPopUp=!1,this.setRoute(),this.nzMessageService.success(this.translatePipe.transform("YOUR_REQUEST_IS_SUCCESSFULLY_SUBMITTED")))}):this.pulseService.addReviewer(this.batchId,this.courseId,data).subscribe(res=>{this.getFromOthers(),"bulk"===type&&(this.showPopUp=!1,this.setRoute(),this.nzMessageService.success(this.translatePipe.transform("YOUR_REQUEST_IS_SUCCESSFULLY_SUBMITTED")))}):this.nzMessageService.warning(this.translatePipe.transform("YOU_CAN_ONLY_REQUEST")+" "+remaining+" "+this.translatePipe.transform("FOR_THIS_TITLE"))}emailTags(emails){this.supporterEmails=emails,console.log(this.supporterEmails)}customActionClicked(event){event.group&&(this.data=this.data.map(user=>user.id===event.data.id?Object.assign(Object.assign({},user),{group:event.group}):user)),console.log(event,this.data)}reviewerFilters(event){event.search?this.data=[...this.data.filter(user=>user.userName.toLowerCase().includes(event.search.toLowerCase())||user.email.toLowerCase().includes(event.search.toLowerCase()))]:this.data=[...this.tenantUsers],event.sortBy&&(this.data=utils.a.sortByMultipleValues(this.data,event.sortBy))}addReviewerRowsSelected(event){this.selectedUserIds=event,this.formIsDirty=!0}addReviewerActionClicked(item){"add"===item.value&&this.onEnroll([item.data],"single")}OnBulkUpload(){if(this.configForm.valid){const selectedUsers=[...this.data].filter(user=>this.selectedUserIds.includes(user.id));this.onEnroll(selectedUsers,"bulk")}else this.configForm.setErrors([{error:this.translatePipe.transform("CONFIG_ERROR")}])}closeIframe(){this.showIframe=!1,this.url=null}seeDetails(){this.showDetails=!0}closeDrawer(){this.showDetails=!1}goBack(){console.log(this.contentId),console.log(this.pathwayId),this.pathwayId?this.router.navigate(["dashboard/learning/pathway",this.pathwayId]).then(r=>{}):this.router.navigate(["dashboard/learning/collection"]).then(r=>{})}goChannel(){this.router.navigate(["dashboard","connect"],{state:{channel:this.content.channelName}}).then(r=>{})}onConfirm(){this.deleteTypeEmail?this.pulseService.deleteSupporter(this.deleteId).pipe(Object(take.a)(1)).subscribe(res=>{this.getFromOthers(),this.nzMessageService.success("Delete Successful")}):this.pulseService.deleteReviewRequest(this.deleteId).pipe(Object(take.a)(1)).subscribe(res=>{console.log("success"),this.getFromOthers(),this.nzMessageService.success("Delete Successful")}),this.showModal=!1}onCancel(){this.showModal=!1}messageListener(messageEvent){console.log("Listen IFrame EVENT",messageEvent);"Survey Submitted Successfully"===messageEvent.data&&(this.showIframe=!1,this.getSelf())}tagsDirty($event){this.tagDirty=$event}onConfirmModal(){this.showFormDirtyModal=!1,this.formIsDirty=!1,this.showPopUp=!1,this.setRoute()}onCancelModal(){this.showFormDirtyModal=!1}setRoute(){let route=`dashboard/learning/collection/${this.contentId}/feedback`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/feedback`),this.router.navigate([route,"home"]).then()}};home_component_HomeComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-home",template:(__webpack_require__(1516).default||__webpack_require__(1516)).length?__webpack_require__(1516).default||__webpack_require__(1516):"",styles:[(__webpack_require__(1517).default||__webpack_require__(1517)).length?__webpack_require__(1517).default||__webpack_require__(1517):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(_a=void 0!==pulse_service.a&&pulse_service.a)?_a:Object,"function"==typeof(_b=void 0!==batches_service.a&&batches_service.a)?_b:Object,"function"==typeof(_c=void 0!==account_manager.a&&account_manager.a)?_c:Object,"function"==typeof(_d=void 0!==subscribed_manager.a&&subscribed_manager.a)?_d:Object,"function"==typeof(_e=void 0!==subscribed_query.a&&subscribed_query.a)?_e:Object,"function"==typeof(_f=void 0!==fesm5_router.a&&fesm5_router.a)?_f:Object,"function"==typeof(_g=void 0!==ng_zorro_antd_message.e&&ng_zorro_antd_message.e)?_g:Object,"function"==typeof(_h=void 0!==ng_zorro_antd_notification.b&&ng_zorro_antd_notification.b)?_h:Object,"function"==typeof(_j=void 0!==fesm5_router.i&&fesm5_router.i)?_j:Object,"function"==typeof(_k=void 0!==translate_pipe.a&&translate_pipe.a)?_k:Object])],home_component_HomeComponent);var results_component_a,results_component_b,results_component_c,results_component_d,results_component_e,results_component_f,results_component_g,results_component_h,results_component_j,distinctUntilChanged=__webpack_require__(79),debounceTime=__webpack_require__(213),three_sixty_service=__webpack_require__(1443),common_utils=__webpack_require__(186),ng_zorro_antd_core_util=__webpack_require__(3),layout=__webpack_require__(107);let results_component_ResultsComponent=class ResultsComponent extends unsubscribe.a{constructor(threeSixtyService,pulseService,subscribedManager,subscribedQuery,accountManager,breakpointObserver,route,router,translatePipe){super(),this.threeSixtyService=threeSixtyService,this.pulseService=pulseService,this.subscribedManager=subscribedManager,this.subscribedQuery=subscribedQuery,this.accountManager=accountManager,this.breakpointObserver=breakpointObserver,this.route=route,this.router=router,this.translatePipe=translatePipe,this.buttonType=public_api.c,this.headerType=public_api.g,this.showDetails=!1,this.isHeaderLoading=!0,this.tabs=[{title:this.translatePipe.transform("HOME").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.HOME]},{title:this.translatePipe.transform("RESULTS").toLowerCase(),keys:[privilege_enum.a.LEARNING_PULSE_360,privilege_enum.a.RESULTS]}].filter(t=>privilege_utils.a.hasViewPrivileges(t.keys)).map(t=>t.title),this.headerSettings={pageTitle:this.translatePipe.transform("HOME").toLowerCase(),tabset:this.tabs,breadcrumbs:[{label:this.translatePipe.transform("LEARNING"),url:"learning"}],tabSetControl:new fesm5_forms.FormControl("results"),tagLine:null,tagLineButton:this.translatePipe.transform("SEE_DETAILS"),banner:"",isByte:!0},this.drawerVisible=!1,this.isInfo=!1,this.showPopUp=!1,this.tabSetControl=new fesm5_forms.FormControl("following"),this.filterOptions=[],this.sortByOptions=[{label:this.translatePipe.transform("DEFAULT").toLowerCase(),value:"default"}],this.controls={method:new fesm5_forms.FormControl,sort:new fesm5_forms.FormControl,order:new fesm5_forms.FormControl("Asc")},this.showInfo=!0,this.form=new fesm5_forms.FormGroup(this.controls),this.tabGroupType=public_api.p,this.isLoading=!0,this.isLoaded=!1,this.icons={OthersCurrent:"nxq:team",AverageCurrent:"nxq:team",SelfTarget:"rocket",OthersTarget:"bulb",AverageTarget:"nxq:team"},this.forYouDrawerVisible=!1}ngOnInit(){this.setUiState(),this.contentId=this.route.parent.snapshot.paramMap.get("id"),this.pathwayId=this.route.parent.snapshot.paramMap.get("pathwayId"),this.courseId=+this.route.parent.snapshot.paramMap.get("id").split("-")[0],this.headerSettings.tabSetControl.valueChanges.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(value=>{let route=`dashboard/learning/collection/${this.contentId}/feedback`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/feedback`),"results"===value?this.router.navigate([route,"results"]).then():"aggregated-results"===value?this.router.navigate([route,"aggregated-results"]).then():"two-by-two"===value?this.router.navigate([route,"two-by-two"]).then():this.router.navigate([route,"home"]).then()}),this.accountManager.getAccount().pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(u=>!!u)).subscribe(user=>{this.user=user}),this.subscribedQuery.selectIsLoading$.pipe(Object(takeUntil.a)(this._destroyed$)).subscribe(l=>{this.isHeaderLoading=l,console.log(this.isLoading)}),this.subscribedManager.getsubscribedById(this.contentId).pipe(Object(takeUntil.a)(this._destroyed$),Object(filter.a)(v=>!!v)).subscribe(data=>{this.content=data,this.batchId=data.batchId,this.headerSettings=Object.assign(Object.assign({},this.headerSettings),{banner:data.providerLogo?data.providerLogo:"",tagLine:data.batchName,pageTitle:data.name}),this.getSelf(),this.getThreeSixityDetails()}),this.threeSixtyService.getInfo(this.courseId).subscribe(res=>{console.log(res),this.allSections=res.sections.map(section=>({id:section.id,title:section.title,description:section.description,competencies:section.skills})),this.allQuestions=[],res.sections.forEach(section=>{const questions=section.questions.map(question=>({id:question.id,title:question.title,description:question.description,competencies:question.skills}));this.allQuestions=[...this.allQuestions,...questions]})}),this.threeSixtyService.getThreeSixtyResultFilters(this.courseId).subscribe(data=>{console.log("pulse filters",data),data.sorts.forEach(res=>{this.sortByOptions.push({label:res.name,value:res.key})}),data.methods.forEach(res=>{this.filterOptions.push({label:res.name,value:res.key})}),this.form.setValue({method:this.filterOptions[0],sort:this.sortByOptions[0],order:"Asc"}),this.evidence=data.layout.evidence,this.reviews=data.layout.reviews,this.isLoaded=!0}),this.form.valueChanges.pipe(Object(distinctUntilChanged.a)(),Object(debounceTime.a)(500)).subscribe(res=>{this.isLoaded&&this.fetchThreeSixty()})}setOrder(){"Desc"===this.controls.order.value?this.controls.order.setValue("Asc"):this.controls.order.setValue("Desc")}fetchThreeSixty(){console.log(this.form.value);let data={method:this.controls.method.value.value,order:this.controls.order.value};const sort=this.controls.sort.value;"default"!==sort.value&&(data=Object.assign(Object.assign({},data),{sort:sort.value})),this.threeSixtyService.getThreeSixtyResult(this.courseId,data).pipe(Object(take.a)(1)).subscribe(res=>{console.log("result",res),this.isLoading=!1;const _sort=this.controls.sort.value;"default"===_sort.value?(this.skillId=res.sections[0].questions[0].id,this.surveyCards=[],this.sections=[...res.sections].map(section=>{const questions=[...section.questions].map(question=>{let marker=[];question.others&&question.others.current&&(marker=[...marker,{order:question.others.current,toolTip:"Review by others (average) : "+question.others.current,icon:"nxq:team",width:this.getWidth(question.axisData.low,question.axisData.high,question.others.current)}]),question.self&&question.self.current&&(marker=[...marker,{order:question.self.current,toolTip:"Self review : "+question.self.current,profileImage:this.user.imageUrl?this.user.imageUrl:"./assets/placeholder.svg",width:this.getWidth(question.axisData.low,question.axisData.high,question.self.current)}]),marker=common_utils.a.sortByKey(marker,"order","desc");const target={toolTip:"Target : "+question.axisData.target,icon:"rocket",width:this.getWidth(question.axisData.low,question.axisData.high,question.axisData.target)};return{id:question.id,title:question.text,startLabel:question.axisData.lowText,endLabel:question.axisData.highText,evidence:question.evidence,review:question.review,target:target,marker:marker}});return{id:section.id,title:section.text,questions:questions}}),console.log("section",this.sections)):"SelfCurrent"===_sort.value?(this.skillId=res.questions[0].id,this.sections=[],this.surveyCards=[...res.questions].map(question=>{let marker=[];question.position&&(marker=[{toolTip:"Self review : "+question.position,profileImage:this.user.imageUrl?this.user.imageUrl:"./assets/placeholder.svg",width:this.getWidth(question.axisData.low,question.axisData.high,question.position)}]);const target={toolTip:"Target : "+question.axisData.target,icon:"rocket",width:this.getWidth(question.axisData.low,question.axisData.high,question.axisData.target)};return{id:question.id,title:question.text,sectionTitle:question.sectionText,startLabel:question.axisData.lowText,endLabel:question.axisData.highText,target:target,evidence:question.evidence,review:question.review,marker:marker}}),console.log(this.surveyCards)):(this.skillId=res.questions[0].id,this.sections=[],this.surveyCards=[...res.questions].map(question=>{let marker=[];const icon=this.icons[_sort.value];question.position&&(marker=[{toolTip:_sort.label+" - "+question.position,icon:icon,width:this.getWidth(question.axisData.low,question.axisData.high,question.position)}]);const target={toolTip:"Target : "+question.axisData.target,icon:"rocket",width:this.getWidth(question.axisData.low,question.axisData.high,question.axisData.target)};return{id:question.id,title:question.text,sectionTitle:question.sectionText,startLabel:question.axisData.lowText,endLabel:question.axisData.highText,evidence:question.evidence,target:target,review:question.review,marker:marker}}),console.log(this.surveyCards))})}getEvidence(id){this.drawerTitle=this.translatePipe.transform("EVIDENCE"),this.drawerVisible=!0,console.log("evidence",id);const data={questionId:id,method:this.controls.method.value.value};this.threeSixtyService.getEvidence(this.courseId,data).subscribe(res=>{console.log("evidence",res),this.evidenceData=res.evidences})}getReviews(id){this.drawerTitle=this.translatePipe.transform("REVIEWS"),this.drawerVisible=!0;const data={questionId:id,method:this.controls.method.value.value};this.threeSixtyService.getReviews(this.courseId,data).subscribe(res=>{console.log("reviews",res),this.reviewsData=res})}getInfo(id,type){console.log("info"),this.isInfo=!0,this.drawerTitle=this.translatePipe.transform("DETAILS"),this.drawerVisible=!0,this.infoData="section"===type?this.allSections.filter(section=>id===section.id)[0]:this.allQuestions.filter(question=>id===question.id)[0]}onCloseDrawer(){this.drawerVisible=!1,this.evidenceData=[],this.reviewsData=[],this.isInfo=!1}showModal(){this.isVisible=!0}handleOk(){console.log("Button ok clicked!"),this.isVisible=!1}handleCancel(){console.log("Button cancel clicked!"),this.isVisible=!1}fileName(url){if(url){url.split("/");const file=url.split("__");return file.pop()||file.pop()}return url}seeDetails(){this.showDetails=!0}closeDrawer(){this.showDetails=!1}goBack(){console.log(this.contentId),console.log(this.pathwayId),this.pathwayId?this.router.navigate(["dashboard/learning/pathway",this.pathwayId]).then(r=>{}):this.router.navigate(["dashboard/learning/collection"]).then(r=>{})}goChannel(){this.router.navigate(["dashboard","connect"],{state:{channel:this.content.channelName}}).then(r=>{})}getWidth(min,max,value){return 0===value?"calc("+Object(ng_zorro_antd_core_util.g)(min,max,value)+"% + 32px)":"calc("+Object(ng_zorro_antd_core_util.g)(min,max,value)+"% + 16px)"}setUiState(){this.breakpointObserver.observe([layout.b.XSmall,layout.b.Small,layout.b.Medium,layout.b.Large,layout.b.XLarge]).subscribe(state=>{state.breakpoints["(max-width: 599.99px)"]||state.breakpoints["(min-width: 600px) and (max-width: 959.99px)"]?this.isSmallScreen=!0:(state.breakpoints["(min-width: 960px) and (max-width: 1279.99px)"],this.isSmallScreen=!1)})}getRecommended(e){this.skillId=e,console.log("getRecommended",e),console.log("screen",this.isSmallScreen),this.isSmallScreen&&(this.forYouDrawerVisible=!0)}forYouCloseDrawer(){this.forYouDrawerVisible=!1}getThreeSixityDetails(){this.pulseService.getThreeSixtyDetails(this.courseId).pipe(Object(take.a)(1)).subscribe(result=>{this.selfAllowed="Self"===result.whoDoesAllocation,this.retakeAllowed=result.allowRetake,console.log("allowSelf",result.allowSelf)})}getSelf(){this.threeSixtyService.getAllocationBySelf(this.batchId).subscribe(result=>{result.forEach(value=>{this.takeStatus="Pending"===value.status,console.log("takeStatus",value.status)})})}requestReview(){let route=`dashboard/learning/collection/${this.contentId}/feedback`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/feedback`),this.router.navigate([route,"home"],{queryParams:{requestReview:!0}}).then()}takeSurvey(){let route=`dashboard/learning/collection/${this.contentId}/pulse`;this.pathwayId&&(route=`dashboard/learning/pathway/${this.pathwayId}/${this.contentId}/pulse`),this.router.navigate([route,"home"]).then()}};results_component_ResultsComponent=Object(tslib_es6.c)([Object(core.Component)({selector:"nxq-results",template:(__webpack_require__(1518).default||__webpack_require__(1518)).length?__webpack_require__(1518).default||__webpack_require__(1518):"",styles:[(__webpack_require__(1519).default||__webpack_require__(1519)).length?__webpack_require__(1519).default||__webpack_require__(1519):""]}),Object(tslib_es6.f)("design:paramtypes",["function"==typeof(results_component_a=void 0!==three_sixty_service.a&&three_sixty_service.a)?results_component_a:Object,"function"==typeof(results_component_b=void 0!==pulse_service.a&&pulse_service.a)?results_component_b:Object,"function"==typeof(results_component_c=void 0!==subscribed_manager.a&&subscribed_manager.a)?results_component_c:Object,"function"==typeof(results_component_d=void 0!==subscribed_query.a&&subscribed_query.a)?results_component_d:Object,"function"==typeof(results_component_e=void 0!==account_manager.a&&account_manager.a)?results_component_e:Object,"function"==typeof(results_component_f=void 0!==layout.a&&layout.a)?results_component_f:Object,"function"==typeof(results_component_g=void 0!==fesm5_router.a&&fesm5_router.a)?results_component_g:Object,"function"==typeof(results_component_h=void 0!==fesm5_router.i&&fesm5_router.i)?results_component_h:Object,"function"==typeof(results_component_j=void 0!==translate_pipe.a&&translate_pipe.a)?results_component_j:Object])],results_component_ResultsComponent);const threeSixtyRoutes=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:home_component_HomeComponent},{path:"results",component:results_component_ResultsComponent}];let ThreeSixtyDetailsRoutingModule=class ThreeSixtyDetailsRoutingModule{};ThreeSixtyDetailsRoutingModule=Object(tslib_es6.c)([Object(core.NgModule)({imports:[fesm5_router.l.forChild(threeSixtyRoutes)],exports:[fesm5_router.l]})],ThreeSixtyDetailsRoutingModule);var mutual_module=__webpack_require__(1423);const COMPONENTS=[...[home_component_HomeComponent,results_component_ResultsComponent,results_component_ResultsComponent]];let ThreeSixtyDetailsModule=class ThreeSixtyDetailsModule{};ThreeSixtyDetailsModule=Object(tslib_es6.c)([Object(core.NgModule)({declarations:[...COMPONENTS],imports:[common.b,shared_module.a,ThreeSixtyDetailsRoutingModule,mutual_module.a],exports:[...COMPONENTS],providers:[]})],ThreeSixtyDetailsModule)}}]);
//# sourceMappingURL=1.8083e24f987c35a716b3.bundle.js.map